(this.webpackJsonptrad_tune_book=this.webpackJsonptrad_tune_book||[]).push([[0],{221:function(e,t,n){e.exports=n.p+"static/media/logo-small.0ff303d1.svg"},228:function(e,t,n){e.exports=n.p+"static/media/logo.6f584227.svg"},241:function(e,t,n){e.exports=n(405)},242:function(e,t,n){},243:function(e,t,n){},405:function(e,t,n){"use strict";n.r(t);var a=n(26),r=(n(242),n(20)),s=n(57),o=n(231),i=n(457),c=n(21),l=n(22),u=n(24),p=n(25),m=(n(243),n(459)),d=n(446),h=n(223),g=n.n(h),f=n(0),E=n.n(f),v=n(454),b=n(461),y=n(5),O=n(43),w=n(113),j=n(406),k=n(443),S=n(444),x=n(213),T=n.n(x),I=n(76),C=n.n(I),R=n(204),U=n.n(R),N=n(23),_="https://thesession.org/tunes/",F="https://thesession.org/members/",L=n(55),D=n.n(L);function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"RECEIVE_SETS",sets:e,meta:t,add:n}}var A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(a){return a({type:"REQUEST_SETS"}),D.a.get("".concat(F).concat(e,"/sets?format=json&page=").concat(t,"&perpage=50")).then((function(e){var t=e.data,r=t.page,s=t.pages,o=t.total,i=t.sets,c=t.perpage;a(B(i,{page:r,pages:s,perpage:c,total:o},n))})).catch((function(e){console.log(e)}))}},W=function(e,t){return function(n){return n({type:"REQUEST_SET"}),D.a.get("".concat(F).concat(e,"/sets/").concat(t,"?format=json")).then((function(e){n({type:"RECEIVE_SET",currentSet:e.data})})).catch((function(e){console.log(e)}))}};function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"RECEIVE_TUNEBOOK",tunes:e,meta:t,add:n}}var z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(a){return a({type:"REQUEST_TUNEBOOK"}),D.a.get("".concat(F).concat(e,"/tunebook?format=json&page=").concat(t,"&perpage=50")).then((function(e){var t=e.data,r=t.page,s=t.pages,o=t.perpage,i=t.total,c=t.tunes;a(P(c,{page:r,pages:s,perpage:o,total:i},n))})).catch((function(e){alert("something went wrong, try again late")}))}},V=function(e){return function(t){return t({type:"REQUEST_TUNE"}),D.a.get("".concat(_).concat(e,"?format=json")).then((function(e){t({type:"RECEIVE_TUNE",currentTune:e.data})})).catch((function(e){console.log(e)}))}},q=n(44),H=n.n(q),M=n(66),Q=n(206),G=n.n(Q),K=n(83);var J={ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showDrawer:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_DRAWER":return Object.assign({},e,{showDrawer:!t.forceClose&&!e.showDrawer});default:return e}},session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentUser:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_CURRENT_USER":return Object(a.a)({},e,{currentUser:t.currentUser});case"LOGOUT":return Object(a.a)({},e,{currentUser:{}});default:return e}},tunes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,tunes:[],meta:{},currentTune:{isFetching:!1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_TUNEBOOK":return Object.assign({},e,{isFetching:!0});case"RECEIVE_TUNEBOOK":var n=t.add?[].concat(Object(K.a)(e.tunes),Object(K.a)(t.tunes)):t.tunes;return Object.assign({},e,{isFetching:!1,tunes:n,meta:t.meta});case"REQUEST_TUNE":return Object.assign({},e,{currentTune:{isFetching:!0}});case"RECEIVE_TUNE":var r=t.currentTune;return Object.assign({},e,{currentTune:Object(a.a)({},r,{isFetching:!1})});default:return e}},sets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,sets:[],meta:{},currentSet:{isFetching:!1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_SETS":return Object.assign({},e,{isFetching:!0});case"RECEIVE_SETS":var n=t.add?[].concat(Object(K.a)(e.sets),Object(K.a)(t.sets)):t.sets;return Object.assign({},e,{isFetching:!1,sets:n,meta:t.meta});case"REQUEST_SET":return Object.assign({},e,{currentSet:{isFetching:!0}});case"RECEIVE_SET":var r=t.currentSet;return Object.assign({},e,{currentSet:Object(a.a)({},r,{isFetching:!1})});default:return e}}},Y=n(207),X=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),$=[Y.a];G.a.init("hh8o22/foinn");var Z=M.d,ee=Object(M.e)(Object(M.c)(J),X,Z(M.a.apply(void 0,$)));ee.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){return}}({session:ee.getState().session,tunes:ee.getState().tunes,sets:ee.getState().sets})}));var te=ee;function ne(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:"TOGGLE_DRAWER",forceClose:e}}var ae=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).handleClick=function(){return function(e){te.dispatch(ne(!0))}},e._isRowLoaded=function(t){var n=t.index;return!!e.props.items[n]},e._loadMoreRows=function(){var t="sets"===e.props.type,n=e.props.meta.page+1;if(n>e.props.meta.pages)return!1;t?te.dispatch(A(e.props.userId,n,!0)):te.dispatch(z(e.props.userId,n,!0))},e._rowRenderer=function(t){var n=t.index,a=(t.key,t.style),s=e.props.items[n],o=s&&(s.name.length>40?H.a.decode(s.name).substring(0,40)+"...":H.a.decode(s.name));return s?E.a.createElement(j.a,{style:a,key:n,component:r.b,className:U()(Object(O.a)({},"".concat(e.props.classes.activeListItem),e.isActive(s.id))),button:!0,to:e.props.match.params.tuneId?"".concat(s.id):"".concat(e.props.match.url,"/").concat(s.id)},E.a.createElement(k.a,null,E.a.createElement(T.a,null)),E.a.createElement(S.a,{primary:o,secondary:s.type})):E.a.createElement("div",{style:a,key:n},"Loading")},e}return Object(l.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.list&&this.list.forceUpdateGrid(),e.type!==this.props.type&&(document.getElementById("drawer").scrollTop=0)}},{key:"isActive",value:function(e){return e===parseInt(this.props.match.params.tuneId,10)}},{key:"render",value:function(){var e=this,t=this.props,n=t.meta,a=t.height;t.isSets;return C()(n)?null:E.a.createElement(w.b,{isRowLoaded:this._isRowLoaded,loadMoreRows:this._loadMoreRows,rowCount:n.total},(function(t){var r=t.onRowsRendered;t.registerChild;return E.a.createElement(w.a,{disableHeight:!0},(function(t){var s=t.width;return E.a.createElement(w.c,{ref:function(t){return e.list=t},height:a||0,onRowsRendered:r,rowCount:n.total,rowHeight:80,rowRenderer:e._rowRenderer,threshold:300,width:s,id:"drawer"})}))}))}}]),n}(f.Component),re=Object(s.g)(Object(N.b)((function(e,t){var n="sets"===t.type;return{items:n?e.sets.sets:e.tunes.tunes,meta:n?e.sets.meta:e.tunes.meta,router:e.router,userId:e.session.currentUser.id,isSets:"sets"===t.type,currentUser:e.session.currentUser}}))(Object(y.a)((function(){return{activeListItem:{background:"#ddd"}}}))(ae))),se=function(e){return Object(O.a)({root:{flexGrow:1,zIndex:1,overflowX:"hidden",overflowY:"auto",position:"relative",display:"flex",height:"100vh"},appBar:{position:"fixed",zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},flex:{flex:1,display:"flex",alignItems:"center"},menuButton:{marginLeft:12,marginRight:20},hide:{display:"none"},drawerPaper:{zIndex:e.zIndex.drawer-1,width:300,top:0,left:0,height:"100vh",position:"fixed",overflowY:"auto"},drawerHeader:Object(a.a)({display:"flex",alignItems:"center",justifyContent:"center",padding:"0 8px"},e.mixins.toolbar),logo:{position:"relative",transform:"translateY(-2px)"},greetings:{marginRight:e.spacing.unit,opacity:.5,display:"inline-block"},content:{width:"100%",padding:3*e.spacing.unit,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),height:"calc(100% - 56px)",marginTop:56}},e.breakpoints.up("md"),{content:{marginTop:64,marginLeft:300},drawerPaper:{height:"calc(100vh - 64px)",top:64}})},oe=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={elementHeight:0},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){te.dispatch(z(this.props.userId)),te.dispatch(A(this.props.userId)),this.setState({elementHeight:this.divRef.clientHeight})}},{key:"handleDrawerToggle",value:function(){te.dispatch(ne())}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.folder,r=t.match.url,o="tunes"===a?E.a.createElement(re,{type:"tunes",height:this.state.elementHeight}):E.a.createElement(re,{type:"sets",height:this.state.elementHeight}),i=E.a.createElement("div",null,E.a.createElement(s.d,null,E.a.createElement(s.b,{path:"".concat(r,"/:tuneId")},o),E.a.createElement(s.b,{path:"".concat(r)},o)));return E.a.createElement("div",{className:n.drawerPaper,ref:function(t){return e.divRef=t}},E.a.createElement(m.a,{mdUp:!0},E.a.createElement(b.a,{variant:"temporary",anchor:"left",open:this.props.showDrawer,classes:{paper:n.drawerPaper},onClose:this.handleDrawerToggle,ModalProps:{keepMounted:!0}},i)),E.a.createElement(m.a,{smDown:!0,implementation:"css"},E.a.createElement(b.a,{variant:"persistent",open:!0,classes:{paper:n.drawerPaper}},i)))}}]),n}(f.Component),ie=Object(s.g)(Object(N.b)((function(e,t){return{userId:e.session.currentUser.id}}))(Object(y.a)(se)(oe))),ce=n(456),le=n(222),ue=n.n(le),pe=n(232),me=n(448),de=n(215),he=n.n(de),ge=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={anchorEl:null,open:!1,selectedIndex:1},e.handleClickListItem=function(t){e.setState({open:!0,anchorEl:t.currentTarget})},e.handleRequestClose=function(){e.setState({open:!1})},e}return Object(l.a)(n,[{key:"menuOptions",value:function(){return[{label:"Sets (".concat(this.props.setsCount,")"),shortLabel:"Sets",to:"/tunebook/".concat(this.props.currentUser.id,"/sets"),index:0},{label:"Tunes (".concat(this.props.tunesCount,")"),shortLabel:"Tunes",to:"/tunebook/".concat(this.props.currentUser.id,"/tunes"),index:1}]}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.location,s=this.menuOptions().find((function(e){return e.label.toLowerCase().includes(function(e){return e.pathname&&e.pathname.split("/")[3].toLowerCase()}(a))}));return E.a.createElement("div",{className:n.root},E.a.createElement(d.a,{"aria-owns":this.state.anchorEl?"simple-menu":null,"aria-haspopup":"true",onClick:this.handleClickListItem,color:"secondary"},s.shortLabel,E.a.createElement(he.a,{className:n.righIcon})),E.a.createElement(pe.a,{id:"simple-menu",anchorEl:this.state.anchorEl,open:this.state.open,onClose:this.handleRequestClose,PaperProps:{style:{width:265}}},this.menuOptions().map((function(t,n){return E.a.createElement(me.a,{key:t.label,component:r.b,selected:n===s.index,to:t.to,onClick:function(){return e.handleRequestClose()}},t.label)}))))}}]),n}(f.Component),fe=Object(s.g)(Object(N.b)((function(e){return{tunesCount:e.tunes.meta&&e.tunes.meta.total,setsCount:e.sets.meta&&e.sets.meta.total,currentUser:e.session.currentUser}}))(Object(y.a)((function(e){return{root:Object(a.a)({},e.mixins.toolbar,{display:"flex",alignItems:"center",marginLeft:"20px"}),righIcon:{marginLeft:16}}}))(ge)));var Ee=Object(y.a)((function(){return{root:{display:"flex",alignItems:"center",height:"100%",justifyContent:"center"}}}))((function(e){return E.a.createElement("div",{className:e.classes.root},"Please select a item from the list")})),ve=n(449),be=n(450),ye=n(114),Oe=n(462),we=n(451),je=n(452),ke=n(453),Se=n(220),xe=n.n(Se),Te=n(218),Ie=n.n(Te),Ce={jig:{key:"3/4",tempo:"140"},reel:{key:"4/4",tempo:"180"},"slip jig":{key:"9/8",tempo:"260"},hornpipe:{key:"4/4",tempo:"180"},polka:{key:"2/4",tempo:"100"},slide:{key:"12/8",tempo:"250"},waltz:{key:"3/4",tempo:"160"},barndance:{key:"4/4",tempo:"140"},strathspey:{key:"4/4",tempo:"140"},"three-two":{key:"3/2",tempo:"140"},mazurka:{key:"3/4",tempo:"140"}},Re=n(216),Ue=n.n(Re),Ne=n(217),_e=n.n(Ne),Fe=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderAbc",value:function(e){Ue.a.renderAbc(this.el,function(e,t,n){if(void 0===e.abc)return"";var a=t||e.type,r=e.abc.split("! ").join("\n"),s="T: ".concat(n),o="M: ".concat(Ce[a].key),i="K: ".concat(e.key);return[s,o,"Q: ".concat(Ce[a].tempo),"L: 1/8",i,r].join("\n")}(this.props.tune,this.props.type,this.title()),{},{paddingright:0,paddingleft:0,responsive:"resize"},{})}},{key:"title",value:function(){return this.props.tune.name?"".concat(H.a.decode(this.props.tune.name)," (").concat(this.props.tune.key," - ").concat(this.props.tune.type,")"):"".concat(this.props.tune.key," - ").concat(this.props.type)}},{key:"componentWillReceiveProps",value:function(e){var t=e.containerWidth;this.props.containerWidth!==t&&(this.renderAbc(this.props.containerWidth),this.renderMidi(this.props.containerWidth))}},{key:"componentDidMount",value:function(){this.renderAbc(this.props.containerWidth)}},{key:"render",value:function(){var e=this;return E.a.createElement("div",{className:this.props.classes.root},E.a.createElement("div",{ref:function(t){return e.el=t}}))}}]),n}(f.Component),Le=Object(y.a)((function(e){return{root:Object(O.a)({margin:"20px auto",maxWidth:"640px",borderBottom:"1px solid #ccc","&:last-child":{border:"none",marginBottom:0,paddingBottom:0}},e.breakpoints.up("md"),{padding:"20px"})}}))(_e()()(Fe)),De=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){te.dispatch(W(this.props.userId,this.props.setId))}},{key:"componentWillReceiveProps",value:function(e){var t=e.setId;this.props.setId!==t&&te.dispatch(W(this.props.userId,t))}},{key:"render",value:function(){var e,t="https://thesession.org/members/".concat(this.props.userId,"/sets/").concat(this.props.setId,"/sheetmusic?print=true"),n=this.props.classes;return this.props.isFetching?E.a.createElement(ve.a,{container:!0,spacing:24},E.a.createElement(ve.a,{item:!0,xs:12,md:8},E.a.createElement(be.a,null))):(e=this.props.currentSet,e||{}).name?E.a.createElement("div",null,E.a.createElement(ve.a,{container:!0,spacing:24},E.a.createElement(ve.a,{item:!0,xs:12,md:8},E.a.createElement(ye.a,{className:this.props.classes.mainTitle,variant:"h1"},H.a.decode(this.props.currentSet.name)),E.a.createElement(m.a,{smDown:!0},E.a.createElement("p",{className:n.printButton},E.a.createElement(d.a,{href:t,target:"_blank",mini:!0},E.a.createElement(Ie.a,{className:n.iconBtn}),"Print"),E.a.createElement(Oe.a,{title:"If your viewing another users set, you can copy it to your tuebook. Click to go the session.org where you can add it to yours."},E.a.createElement(d.a,{href:this.props.currentSet.url,target:"_blank",mini:!0},E.a.createElement(xe.a,{className:n.iconBtn}),"Copy")))))),E.a.createElement("div",{className:n.settings},this.props.currentSet.settings.map((function(e){return E.a.createElement(ve.a,{container:!0,spacing:24,key:e.id},E.a.createElement(ve.a,{item:!0,xs:12,md:8},E.a.createElement(Le,{tune:e})),E.a.createElement(m.a,{smDown:!0},E.a.createElement(ve.a,{item:!0,xs:12,md:4},E.a.createElement(we.a,{className:n.card,key:e.id},E.a.createElement(je.a,null,E.a.createElement(ye.a,{variant:"subtitle1",gutterBottom:!0},"Setting ",H.a.decode(e.name)," (",e.key,")"),E.a.createElement(ye.a,{variant:"caption"},"by ",e.member.name," on ",e.date)),E.a.createElement(ke.a,null,E.a.createElement(d.a,{component:"a",target:"_blank",href:"".concat(_).concat(e.id)},"View on The Session.org"))))))})))):null}}]),n}(f.Component),Be=Object(s.g)(Object(N.b)((function(e,t){return{setId:t.match.params.setId,currentSet:e.sets.currentSet,userId:e.session.currentUser.id,isFetching:e.sets.currentSet.isFetching}}))(Object(y.a)((function(e){return{card:{margin:"".concat(10*e.spacing.unit,"px 0")},title:{marginBottom:16,fontSize:14,color:e.palette.text.secondary},settings:{},iconBtn:{marginRight:"10px"},mainTitle:Object(O.a)({textAlign:"center",marginTop:2*e.spacing.unit,fontWeight:100,opacity:.7},e.breakpoints.down("sm"),{fontSize:"21px"}),printButton:{textAlign:"center"}}}))(De)));var Ae=Object(s.g)((function(e){var t=e.match.url;return E.a.createElement("div",null,E.a.createElement(s.d,null,E.a.createElement(s.b,{path:"".concat(t,"/:setId")},E.a.createElement(Be,null)),E.a.createElement(s.b,{path:"".concat(t)},E.a.createElement(Ee,null))))})),We=n(455),Pe=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){te.dispatch(V(this.props.tuneId))}},{key:"componentWillReceiveProps",value:function(e){var t=e.tuneId;this.props.tuneId!==t&&te.dispatch(V(t))}},{key:"render",value:function(){var e=this,t=this.props.classes;return this.props.isFetching?E.a.createElement(ve.a,{container:!0,spacing:24},E.a.createElement(ve.a,{item:!0,xs:12,md:8},E.a.createElement(be.a,null))):void 0===this.props.currentTune||void 0===this.props.currentTune.name?null:E.a.createElement("div",null,E.a.createElement(ve.a,{container:!0,spacing:24},E.a.createElement(ve.a,{item:!0,xs:12,md:8},E.a.createElement(ye.a,{className:this.props.classes.title,variant:"h1"},H.a.decode(this.props.currentTune.name)))),this.props.currentTune.settings.map((function(n){return E.a.createElement(ve.a,{container:!0,spacing:24,key:n.id},E.a.createElement(ve.a,{item:!0,xs:12,md:8},E.a.createElement(Le,{tune:n,type:e.props.currentTune.type})),E.a.createElement(m.a,{smDown:!0},E.a.createElement(ve.a,{item:!0,md:4},E.a.createElement(we.a,{className:t.card,key:n.id},E.a.createElement(je.a,null,E.a.createElement(ye.a,{variant:"subtitle1",gutterBottom:!0},"Setting #",n.id," (",n.key,")"),E.a.createElement(ye.a,{variant:"caption"},"by ",n.member.name," on ",n.date)),E.a.createElement(ke.a,null,E.a.createElement(d.a,{component:"a",target:"_blank",href:"".concat(_).concat(e.props.currentTune.id,"#setting").concat(n.id)},"View on The Session.org"))))))})))}}]),n}(f.Component),ze=Object(s.g)(Object(N.b)((function(e,t){return{currentTune:e.tunes.currentTune,isFetching:e.tunes.currentTune.isFetching,tuneId:t.match.params.tuneId}}))(Object(y.a)((function(e){return{card:{margin:"".concat(10*e.spacing.unit,"px 0")},settings:e.mixins.gutters({paddingTop:e.spacing.unit,paddingBottom:e.spacing.unit}),flex:{flex:1},title:{textAlign:"center",marginTop:2*e.spacing.unit,fontWeight:100,opacity:.7}}}))(Pe)));var Ve=Object(s.g)((function(e){var t=e.match.url;return E.a.createElement("div",null,E.a.createElement(s.d,null,E.a.createElement(s.b,{path:"".concat(t,"/:tuneId")},E.a.createElement(ze,null)),E.a.createElement(s.b,{path:"".concat(t)},E.a.createElement(Ee,null))))}));var qe=function(e){return D.a.get("".concat(F,"search?q=").concat(e,"&format=json")).catch((function(e){console.log(e)}))},He=n(221),Me=n.n(He),Qe=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"handleDrawerToggle",value:function(){te.dispatch(ne())}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.isLoggedOut,r=t.match.params.folder;return a?E.a.createElement(s.a,{to:"/"}):E.a.createElement("div",{className:n.root},E.a.createElement(v.a,{className:n.appBar},E.a.createElement(We.a,null,E.a.createElement(m.a,{mdUp:!0},E.a.createElement(ce.a,{color:"secondary","aria-label":"open drawer",onClick:this.handleDrawerToggle,className:n.navIconHide},E.a.createElement(ue.a,null))),E.a.createElement("div",{className:n.flex},E.a.createElement(m.a,{smDown:!0},E.a.createElement("img",{src:Me.a,alt:"Foinn",className:n.logo})),E.a.createElement(fe,null)),E.a.createElement(m.a,{smDown:!0},E.a.createElement("span",{className:n.greetings},"Hi! ",this.props.currentUser.name)),E.a.createElement(d.a,{onClick:function(){return e.props.logout()},color:"secondary"},"Change user"),E.a.createElement(ce.a,{size:"small",component:"a",color:"secondary",href:"mailto:accounts+foinn@rorsvort.com"},E.a.createElement(g.a,null)))),E.a.createElement("div",{className:n.content},"tunes"===r?E.a.createElement(Ve,null):E.a.createElement(Ae,null)),E.a.createElement(ie,{showDrawer:this.props.showDrawer,folder:r}))}}]),n}(f.Component),Ge=Object(s.g)(Object(N.b)((function(e){return{showDrawer:e.ui.showDrawer,isLoggedOut:C()(e.session.currentUser),currentUser:e.session.currentUser}}),{logout:function(){return{type:"LOGOUT"}}})(Object(y.a)(se)(Qe))),Ke=n(235),Je=n(224),Ye=n.n(Je),Xe=n(233),$e=n(458),Ze=n(225),et=n.n(Ze),tt=n(226),nt=n.n(tt),at=n(227),rt=n.n(at);function st(e){var t=e.classes,n=e.autoFocus,r=e.value,s=e.ref,o=Object(Xe.a)(e,["classes","autoFocus","value","ref"]);return E.a.createElement($e.a,{className:t.textField,autoFocus:n,value:r,inputRef:s,styles:{width:"100%"},InputProps:Object(a.a)({className:t.input},o)})}function ot(e,t){var n=t.query,a=t.isHighlighted,r=nt()(e.name,n),s=rt()(e.name,r);return E.a.createElement(me.a,{selected:a,component:"div"},E.a.createElement("div",null,s.map((function(e,t){return e.highlight?E.a.createElement("span",{key:t,style:{fontWeight:300}},e.text):E.a.createElement("strong",{key:t,style:{fontWeight:500}},e.text)}))))}function it(e){var t=e.containerProps,n=e.children;return E.a.createElement(Ke.a,Object.assign({},t,{square:!0}),n)}function ct(e){return te.dispatch({type:"UPDATE_CURRENT_USER",currentUser:e}),e.name}var lt=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={value:e.props.userName,selectedSuggestion:{},suggestions:[]},e.handleSuggestionsFetchRequested=function(t){var n=t.value;if(n.length<4)return!1;qe(n).then((function(t){if(void 0===t)return[];e.setState({suggestions:t.data.members})}))},e.handleSuggestionsClearRequested=function(){e.setState({suggestions:[]})},e.handleChange=function(t,n){var a=n.newValue;e.setState({value:a})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.classes;return E.a.createElement(et.a,{theme:{container:e.suggestionsContainer,suggestionsContainerOpen:e.suggestionsContainerOpen,suggestionsList:e.suggestionsList,suggestion:e.suggestion},renderInputComponent:st,suggestions:this.state.suggestions,onSuggestionsFetchRequested:this.handleSuggestionsFetchRequested,onSuggestionsClearRequested:this.handleSuggestionsClearRequested,renderSuggestionsContainer:it,getSuggestionValue:ct,renderSuggestion:ot,inputProps:{autoFocus:!1,classes:e,placeholder:"Search by typing your user name",value:this.state.value,onChange:this.handleChange}})}}]),n}(f.Component),ut=Object(y.a)((function(e){return{suggestionsContainer:{position:"relative",zIndex:999},suggestionsContainerOpen:{position:"absolute",marginBottom:3*e.spacing.unit,left:0,right:0},suggestion:{display:"block"},suggestionsList:{margin:0,padding:0,listStyleType:"none"},textField:{width:"100%"}}}))(lt),pt=n(228),mt=n.n(pt);var dt=Object(N.b)((function(e){return{currentUser:e.session.currentUser,userName:C()(e.session.currentUser)?"":e.session.currentUser.name}}))(Object(y.a)((function(e){return{container:{height:"100vh"},paper:{margin:"0 auto",padding:"20px"},button:{color:"white",marginTop:2*e.spacing.unit},home:{background:e.palette.primary[500]},logo:{maxWidth:"100%",margin:"0 auto 40px",display:"block"},title:{fontSize:21,fontWeight:"normal",textAlign:"center",lineHeight:1.5,color:"white",opacity:.8},login:{alignSelf:"flex-start"}}}))((function(e){var t=e.classes,n=e.userName,a=e.currentUser;return E.a.createElement(Ye.a,{className:t.home},E.a.createElement(ve.a,{container:!0,spacing:24,alignItems:"center",justify:"center",direction:"row",className:t.container},E.a.createElement(ve.a,{item:!0,xs:12,md:12},E.a.createElement("img",{src:mt.a,alt:"Foinn app",className:t.logo}),E.a.createElement("h1",{className:t.title},"Browse your tunes and sets from Thessession.org ",E.a.createElement("br",null),E.a.createElement("small",null,"The ideal session companion"))),E.a.createElement(ve.a,{item:!0,xs:12,md:4,className:t.login},E.a.createElement(Ke.a,{className:t.paper,elevation:8},E.a.createElement(ye.a,{variant:"subtitle1",gutterBottom:!0},"To start, select your"," ",E.a.createElement("a",{href:"https://thesession.org",target:"_blank",rel:"noopener noreferrer"},"TheSession.org")," ","user name."),E.a.createElement(ut,{userName:n}),n&&E.a.createElement(d.a,{to:"/tunebook/".concat(a.id,"/tunes"),className:t.button,component:r.b,variant:"raised",color:"primary"},"Open tunebook")))))}))),ht=n(12),gt=n.n(ht),ft=n(229),Et=n.n(ft),vt=n(230),bt=n.n(vt),yt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ot(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var wt=Object(o.a)({palette:{primary:Et.a,secondary:Object(a.a)({},{50:"#fff",100:"#fff",200:"#fff",300:"#fff",400:"#fff",500:"#fff",600:"#fff",700:"#fff",800:"#fff",900:"#fff",A100:"#fff",A200:"#fff",A400:"#fff",A700:"#fff",contrastDefaultColor:"brown"}),error:bt.a},typography:{useNextVariants:!0,h1:{fontFamily:"'Kaushan Script', 'cursive'",fontSize:"2.8125rem"}}}),jt=E.a.createElement(i.a,{theme:wt},E.a.createElement(N.a,{store:te},E.a.createElement(r.a,null,E.a.createElement("div",null,E.a.createElement(s.b,{exact:!0,path:"/"},E.a.createElement(dt,null)),E.a.createElement(s.b,{path:"/tunebook/:userId/:folder"},E.a.createElement(Ge,null))))));gt.a.render(jt,document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");yt?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ot(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):Ot(e)}))}}()}},[[241,1,2]]]);
//# sourceMappingURL=main.2c129efd.chunk.js.map