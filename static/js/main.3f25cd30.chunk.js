(this.webpackJsonptrad_tune_book=this.webpackJsonptrad_tune_book||[]).push([[0],{235:function(e,t,n){e.exports=n.p+"static/media/logo-small.0ff303d1.svg"},243:function(e,t,n){e.exports=n.p+"static/media/logo.6f584227.svg"},266:function(e,t,n){e.exports=n(479)},267:function(e,t,n){},289:function(e,t,n){},479:function(e,t,n){"use strict";n.r(t);var a=n(12),r=(n(267),n(17)),o=n(52),i=n(108),s=n(515),c=n(67),l=n(245),u=(n(289),n(218)),m=n(0),p=n.n(m),d=n(520),g=n(221),h="https://thesession.org/members/",f=n(120),E=n.n(f),v=n(121),b=n.n(v),y=n(37),O=n.n(y);function T(e){return{type:"UPDATE_CURRENT_USER",currentUser:e}}function j(){return{type:"LOGOUT"}}var w=function(e){return O.a.get("".concat(h,"search?q=").concat(e,"&format=json")).catch((function(e){console.log(e)}))};var S=function(e){return function(t){t({type:"REQUEST_TUNEBOOK"}),t(T({id:e}));var n=[];return function t(n,a){return new Promise((function(r){O.a.get("".concat(h).concat(e,"/tunebook"),{params:{page:n,format:"json",perpage:50}}).then((function(e){a.push(e);var n=e.data,o=n.page,i=n.pages;o&&o<i?O.a.all([t(o+1,a)]).then((function(){return r()})):r()}))}))}(1,n).then((function(){var e=b()(E()(n,(function(e){return e.data.tunes})),["name"]);t(function(e,t){return{type:"RECEIVE_TUNEBOOK",tunes:e,meta:t}}(e,{total:e.length}))}))}},k=n(15),C=n(154),F=n(519),I=n(521),N=n(522),U=n(78),x=n(523),R=n(524),_=n(5),L=n(124),P=n.n(L),D=n(32),B=n(33),W=n(73),A=n(74),G=n(31),V=n.n(G),q={jig:{key:"3/4",tempo:"140"},reel:{key:"4/4",tempo:"180"},"slip jig":{key:"9/8",tempo:"260"},hornpipe:{key:"4/4",tempo:"180"},polka:{key:"2/4",tempo:"100"},slide:{key:"12/8",tempo:"250"},waltz:{key:"3/4",tempo:"160"},barndance:{key:"4/4",tempo:"140"},strathspey:{key:"4/4",tempo:"140"},"three-two":{key:"3/2",tempo:"140"},mazurka:{key:"3/4",tempo:"140"},march:{key:"4/4",tempo:"140"}},z=function(e,t,n){var a;if(void 0===e.abc)return"";var r=t||e.type,o=e.abc.split("! ").join("\n"),i="T: ".concat(n),s="M: ".concat(q[r].key),c="K: ".concat(e.key),l="Q: ".concat(null===(a=q[r])||void 0===a?void 0:a.tempo);return V.a.decode(["X: 1",i,s,l,"L: 1/8",c,o].join("\n"))},M=n(223),Q=n.n(M),H=n(224),K=n.n(H),J=n(225),Y=n.n(J),X=function(e){Object(A.a)(n,e);var t=Object(W.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(B.a)(n,[{key:"renderAbc",value:function(){Q.a.renderAbc(this.el,z(this.props.tune,this.props.type,this.title()),{},{paddingright:0,paddingleft:0,responsive:"resize",add_classes:!0})}},{key:"renderMidi",value:function(){K.a.renderMidi(this.midi,z(this.props.tune,this.props.type,this.title()),{},{inlineControls:{selectionToggle:!1,loopToggle:!1,standard:!0,tempo:!1,startPlaying:!1}},{})}},{key:"title",value:function(){return this.props.tune.name?"".concat(V.a.decode(this.props.tune.name)," (").concat(this.props.tune.key," - ").concat(this.props.tune.type,")"):"".concat(this.props.tune.key," - ").concat(this.props.type)}},{key:"componentWillReceiveProps",value:function(e){var t=e.containerWidth;this.props.containerWidth!==t&&(this.renderAbc(this.props.containerWidth),this.renderMidi(this.props.containerWidth))}},{key:"componentDidMount",value:function(){this.renderAbc(this.props.containerWidth),this.renderMidi(this.props.containerWidth)}},{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:this.props.classes.root},p.a.createElement("div",{ref:function(t){return e.el=t}}),p.a.createElement("div",{ref:function(t){return e.midi=t}}))}}]),n}(m.Component),$=Object(_.a)((function(){return{root:{marginBottom:100,marginTop:50}}}))(Y()()(X)),Z=n(63),ee=n(226),te=n.n(ee);var ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,tunes:[],meta:{},currentTune:{isFetching:!1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGOUT":return Object(a.a)({},e,{tunes:[]});case"REQUEST_TUNEBOOK":return Object.assign({},e,{isFetching:!0});case"RECEIVE_TUNEBOOK":return Object(a.a)({},e,{isFetching:!1,tunes:t.tunes,meta:t.meta});case"REQUEST_TUNE":return Object.assign({},e,{currentTune:{isFetching:!0}});case"RECEIVE_TUNE":var n=t.currentTune;return Object.assign({},e,{currentTune:Object(a.a)({},n,{isFetching:!1})});default:return e}},ae=n(162);var re={ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showDrawer:!1,showFilters:!1,tuneFilters:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_DRAWER":return Object(a.a)({},e,{showDrawer:!t.forceClose&&!e.showDrawer});case"TOGGLE_FILTERS":return Object(a.a)({},e,{showFilters:!t.forceClose&&!e.showFilters});case"UPDATE_TUNE_FILTERS":return Object(a.a)({},e,{tuneFilters:t.filters});default:return e}},session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentUser:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_CURRENT_USER":return Object(a.a)({},e,{currentUser:t.currentUser});case"LOGOUT":return Object(a.a)({},e,{currentUser:{}});default:return e}},tunes:ne,sets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,sets:[],meta:{},currentSet:{isFetching:!1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGOUT":return Object(a.a)({},e,{sets:[]});case"REQUEST_SETS":return Object.assign({},e,{isFetching:!0});case"RECEIVE_SETS":var n=t.add?[].concat(Object(ae.a)(e.sets),Object(ae.a)(t.sets)):t.sets;return Object.assign({},e,{isFetching:!1,sets:n,meta:t.meta});case"REQUEST_SET":return Object.assign({},e,{currentSet:{isFetching:!0}});case"RECEIVE_SET":var r=t.currentSet;return Object.assign({},e,{currentSet:Object(a.a)({},r,{isFetching:!1})});default:return e}}},oe=n(227),ie=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),se=[oe.a];te.a.init("hh8o22/foinn");var ce=Z.d,le=Object(Z.e)(Object(Z.c)(re),ie,ce(Z.a.apply(void 0,se)));le.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){return}}({session:le.getState().session,tunes:le.getState().tunes,sets:le.getState().sets})}));var ue=le,me=n(171),pe=n(517),de=Object(me.a)((function(e){return{root:{height:"calc(100vh - 64px)",display:"flex",alignItems:"center",justifyContent:"center"}}}));var ge=function(){var e=de();return p.a.createElement("div",{className:e.root},p.a.createElement(pe.a,null))},he=n(518),fe=n(228),Ee=n.n(fe);var ve=Object(o.e)((function(e){var t,n,a=e.tuneId,o=e.folder,i=e.match.path,s=Object(k.d)((function(e){return e[o][o]})),c=Ee()(s,{id:a}),l=null===(t=s[c-1])||void 0===t?void 0:t.id,u=null===(n=s[c+1])||void 0===n?void 0:n.id;return p.a.createElement(p.a.Fragment,null,l&&p.a.createElement(he.a,{color:"inherit",component:r.b,to:i.replace(":tuneId?",l)},"Previous"),u&&p.a.createElement(he.a,{color:"inherit",component:r.b,to:i.replace(":tuneId?",u)},"Next"))})),be=p.a.forwardRef((function(e,t){return p.a.createElement(C.a,Object.assign({direction:"up",ref:t},e))}));var ye=Object(o.e)(Object(k.b)((function(e,t){return{currentTune:e.tunes.currentTune,isFetching:e.tunes.currentTune.isFetching,tuneId:t.match.params.tuneId}}))(Object(_.a)((function(e){return{root:{marginTop:100,padding:e.spacing(0,3)},settings:e.mixins.gutters({paddingTop:e.spacing(),paddingBottom:e.spacing()}),title:{marginLeft:e.spacing(2),flex:1}}}))((function(e){var t;Object(m.useEffect)((function(){var t;e.tuneId&&ue.dispatch((t=e.tuneId,function(e){return e({type:"REQUEST_TUNE"}),O.a.get("".concat("https://thesession.org/tunes/").concat(t,"?format=json")).then((function(t){e({type:"RECEIVE_TUNE",currentTune:t.data})})).catch((function(e){console.log(e)}))}))}),[e.tuneId]);var n=void 0!==(null===(t=e.currentTune)||void 0===t?void 0:t.name),a=function(){return e.history.push(e.referrer)};return p.a.createElement(F.a,{fullScreen:!0,open:!!e.tuneId,onClose:a,TransitionComponent:be},p.a.createElement(d.a,{className:e.classes.appBar},p.a.createElement(I.a,null,p.a.createElement(N.a,{edge:"start",onClick:a,"aria-label":"close",color:"inherit"},p.a.createElement(P.a,null)),p.a.createElement(U.a,{variant:"h6",className:e.classes.title},n&&V.a.decode(e.currentTune.name)),p.a.createElement(ve,{tuneId:e.currentTune.id,folder:"tunes"}))),!n&&p.a.createElement(ge,null),n&&p.a.createElement(x.a,{container:!0,justify:"center",className:e.classes.root},p.a.createElement(x.a,{item:!0,xs:12,md:8,lg:6},e.currentTune.settings.map((function(t,n){return p.a.createElement("div",{key:"".concat(t.id,"-").concat(n)},p.a.createElement(U.a,{variant:"h5",gutterBottom:!0},"Setting #",t.id),p.a.createElement(U.a,{variant:"body2"},"by ",t.member.name," on ",t.date," \u2014"," ",p.a.createElement(R.a,{target:"_blank",rel:"noopener noreferrer",color:"primary",href:t.url},"View on The Session.org")),p.a.createElement($,{tune:t,type:e.currentTune.type}))})))))})))),Oe=n(125),Te=n.n(Oe),je=n(525),we=n(484),Se=n(526),ke=n(527),Ce=n(528),Fe=n(541),Ie=Object(me.a)({});var Ne=Object(o.e)((function(e){var t=Ie(),n=e.items,a=e.match,o=a.url,i="tunes"===a.params.folder,s=function(e){return e&&(e.name.length>150?V.a.decode(e.name).substring(0,150)+"...":V.a.decode(e.name))};return p.a.createElement(je.a,{className:t.root,id:"tunesList"},n.map((function(e,t){return p.a.createElement("li",{key:"".concat(t,"-item.id")},p.a.createElement(we.a,{component:r.b,button:!0,to:"".concat(o,"/").concat(e.id)},p.a.createElement(Se.a,null,i?p.a.createElement(Te.a,null):p.a.createElement(Fe.a,null)),p.a.createElement(ke.a,{primary:s(e),secondary:e.type})),p.a.createElement(Ce.a,{variant:"inset"}))})))})),Ue=n(538),xe=n(529),Re=n(110),_e=function(e){return Object(Re.a)({root:{flexGrow:1,zIndex:1,overflowX:"hidden",overflowY:"auto",position:"relative",display:"flex",height:"100vh"},appBar:{position:"fixed",zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},title:{marginLeft:e.spacing(2)},flex:{flex:1,display:"flex",alignItems:"center"},menuButton:{marginLeft:12,marginRight:20},hide:{display:"none"},drawerPaper:{width:300,top:0,right:0,height:"100vh",overflowY:"auto"},drawerHeader:Object(a.a)({display:"flex",alignItems:"center",justifyContent:"center",padding:"0 8px"},e.mixins.toolbar),logo:{position:"relative",transform:"translateY(-2px)"},greetings:{marginRight:e.spacing(),opacity:.5,display:"inline-block"},content:{width:"100%",transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),height:"calc(100% - 56px)",marginTop:56}},e.breakpoints.up("md"),{content:{marginTop:64},drawerPaper:{height:"calc(100vh - 64px)",top:64}})};function Le(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:"TOGGLE_FILTERS",forceClose:e}}var Pe=function(e){Object(A.a)(n,e);var t=Object(W.a)(n);function n(){var e;Object(D.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleFiltersToggle=function(){e.props.toggleFilters()},e}return Object(B.a)(n,[{key:"render",value:function(){var e=this,t=this.props.classes;return p.a.createElement("div",{className:t.drawerPaper,ref:function(t){return e.divRef=t}},p.a.createElement(Ue.a,{mdUp:!0},p.a.createElement(xe.a,{variant:"temporary",anchor:"right",open:this.props.open,classes:{paper:t.drawerPaper},onClose:this.handleFiltersToggle,ModalProps:{keepMounted:!0}},this.props.children)),p.a.createElement(Ue.a,{smDown:!0,implementation:"css"},p.a.createElement(xe.a,{anchor:"right",variant:"persistent",open:!0,classes:{paper:t.drawerPaper}},this.props.children)))}}]),n}(m.Component),De=Object(o.e)(Object(k.b)((function(e){return{open:e.ui.showFilters}}),{toggleFilters:Le})(Object(_.a)(_e)(Pe))),Be=n(126),We=n.n(Be),Ae=n(534),Ge=n(530),Ve=n(531),qe=n(539),ze=n(532),Me=n(537),Qe=n(231),He=n.n(Qe),Ke=Object(me.a)((function(e){return{root:{margin:e.spacing(2)},formControl:{margin:e.spacing(2,0)}}}));var Je=Object(k.b)((function(e){return{currentFilters:e.ui.tuneFilters}}),{updateTuneFilters:function(e){return{type:"UPDATE_TUNE_FILTERS",filters:e}}})((function(e){var t=Ke(),n=e.currentFilters,r=e.folder,o=He()((function(t){e.updateTuneFilters(Object(a.a)({},n,{search:t}))}),200);return p.a.createElement("div",{className:t.root,id:"filtersForm"},p.a.createElement(Ae.a,{id:"filter-search",label:"Search",variant:"outlined",onChange:function(e){return o(e.target.value)},defaultValue:n.search,placeholder:"Search by name",InputLabelProps:{shrink:!0},fullWidth:!0,className:t.formControl}),"tunes"===r&&p.a.createElement(Ge.a,{component:"fieldset",className:t.formControl},p.a.createElement(Ve.a,{component:"legend"},"Type"),p.a.createElement(qe.a,{"aria-label":"Tune Type",id:"filter-tuneType",name:"tuneType",defaultValue:"all",onChange:function(t){var r="all"===t.target.value?void 0:t.target.value;e.updateTuneFilters(Object(a.a)({},n,{tuneType:r}))}},p.a.createElement(ze.a,{value:"all",control:p.a.createElement(Me.a,{color:"primary"}),label:"All"}),Object.keys(q).map((function(e){return p.a.createElement(ze.a,{key:e,value:e,control:p.a.createElement(Me.a,{color:"primary"}),label:We()(e)})})))))})),Ye={includeScore:!1,threshold:.2,findAllMatches:!0,keys:["name"]};var Xe=function(e){return function(t){t({type:"REQUEST_SETS"}),t(T({id:e}));var n=[];return function t(n,a){return new Promise((function(r){O.a.get("".concat(h).concat(e,"/sets"),{params:{page:n,format:"json",perpage:50}}).then((function(e){a.push(e);var n=e.data,o=n.page,i=n.pages;o&&o<i?O.a.all([t(o+1,a)]).then((function(){return r()})):r()}))}))}(1,n).then((function(){var e=b()(E()(n,(function(e){return e.data.sets})),["name"]);t(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"RECEIVE_SETS",sets:e,meta:t,add:n}}(e,{total:e.length}))}))}},$e=p.a.forwardRef((function(e,t){return p.a.createElement(C.a,Object.assign({direction:"up",ref:t},e))}));var Ze=Object(o.e)(Object(k.b)((function(e,t){return{currentSet:e.sets.currentSet,isFetching:e.sets.currentSet.isFetching,tuneId:t.match.params.tuneId,userId:e.session.currentUser.id}}))(Object(_.a)((function(e){return{root:{marginTop:100},settings:e.mixins.gutters({paddingTop:e.spacing(),paddingBottom:e.spacing()}),title:{marginLeft:e.spacing(2),flex:1}}}))((function(e){var t;Object(m.useEffect)((function(){var t,n;e.tuneId&&ue.dispatch((t=e.userId,n=e.tuneId,function(e){return e({type:"REQUEST_SET"}),O.a.get("".concat(h).concat(t,"/sets/").concat(n,"?format=json")).then((function(t){e({type:"RECEIVE_SET",currentSet:t.data})})).catch((function(e){console.log(e)}))}))}),[e.tuneId,e.userId]);var n=void 0!==(null===(t=e.currentSet)||void 0===t?void 0:t.name),a=function(){return e.history.push(e.referrer)};return console.log(e.currentSet.settings),p.a.createElement(F.a,{fullScreen:!0,open:!!e.tuneId,onClose:a,TransitionComponent:$e},p.a.createElement(d.a,{className:e.classes.appBar},p.a.createElement(I.a,null,p.a.createElement(N.a,{edge:"start",onClick:a,"aria-label":"close",color:"inherit"},p.a.createElement(P.a,null)),p.a.createElement(U.a,{variant:"h6",className:e.classes.title},n&&V.a.decode(e.currentSet.name)),p.a.createElement(ve,{tuneId:e.currentSet.id,folder:"sets"}))),!n&&p.a.createElement(ge,null),n&&p.a.createElement(x.a,{container:!0,justify:"center",className:e.classes.root},p.a.createElement(x.a,{item:!0,xs:12,md:6},e.currentSet.settings.map((function(t,n){return p.a.createElement("div",{key:"".concat(t.id,"-").concat(n)},p.a.createElement(U.a,{variant:"h5",gutterBottom:!0},Object(G.decode)(t.name)),p.a.createElement(U.a,{variant:"body2"},"by ",t.member.name," on ",t.date," \u2014"," ",p.a.createElement(R.a,{target:"_blank",rel:"noopener noreferrer",color:"primary",href:t.url},"View on The Session.org")),p.a.createElement($,{tune:t,type:e.currentSet.type}))})))))}))));var et=Object(k.b)((function(e,t){return{items:"tunes"===t.folder?e.tunes.tunes:e.sets.sets,isFetching:e.tunes.isFetching,userChanged:e.session.currentUser.id!==t.userId,filters:e.ui.tuneFilters}}),{fetchTuneBook:S,fetchSets:Xe})(Object(c.withSnackbar)(Object(o.e)((function(e){var t=e.match,n=t.url,a=t.params.folder,r=e.items,i=e.isFetching,s=e.filters,c="tunes"===a,l=new g.a(r,Ye),u=(s.search?l.search(s.search||"").map((function(e){return e.item})):r).filter((function(e){return!s.tuneType||!e.type||e.type===s.tuneType}));return p.a.createElement("div",null,i?p.a.createElement(ge,null):p.a.createElement(Ne,{items:u}),p.a.createElement(De,null,p.a.createElement(Je,{folder:a})),p.a.createElement(o.a,{path:"".concat(n,"/:tuneId?")},c?p.a.createElement(ye,{referrer:n}):p.a.createElement(Ze,{referrer:n})))})))),tt=n(234),nt=n.n(tt),at=n(233),rt=n.n(at),ot=n(232),it=n.n(ot),st=Object(me.a)({list:{width:250},fullList:{width:"auto"}});var ct=Object(k.b)((function(e){var t,n;return{tunesCount:null===(t=e.tunes.meta)||void 0===t?void 0:t.total,setsCount:null===(n=e.sets.meta)||void 0===n?void 0:n.total,currentUser:e.session.currentUser}}))(Object(o.e)((function(e){var t=st(),n=Object(k.c)(),a=[{label:"Sets ".concat(e.setsCount?"("+e.setsCount+")":""),to:"/tunebook/".concat(e.currentUser.id,"/sets"),icon:p.a.createElement(it.a,null)},{label:"Tunes ".concat(e.tunesCount?"("+e.tunesCount+")":""),to:"/tunebook/".concat(e.currentUser.id,"/tunes"),icon:p.a.createElement(Te.a,null)}],r=function(){e.onClose(),n({type:"LOGOUT"}),e.history.push("/")};return p.a.createElement(xe.a,{anchor:"left",open:e.open,onClose:e.onClose},p.a.createElement("div",{role:"presentation",className:t.list},p.a.createElement(je.a,null,p.a.createElement(we.a,{button:!0,key:"Change user",onClick:r},p.a.createElement(Se.a,null,p.a.createElement(rt.a,null)),p.a.createElement(ke.a,{primary:"Change user"})),a.map((function(t){return p.a.createElement(we.a,{button:!0,key:t.label,onClick:function(){return function(t){e.onClose(),e.history.push(t.to)}(t)}},p.a.createElement(Se.a,null,t.icon),p.a.createElement(ke.a,{primary:t.label}))})),p.a.createElement(Ce.a,null),p.a.createElement(we.a,{button:!0,key:"nav-help",href:"mailto:accounts+foinn@rorsvort.com",component:"a"},p.a.createElement(Se.a,null,p.a.createElement(nt.a,null)),p.a.createElement(ke.a,{primary:"Help"})))))}))),lt=[{placement:"center",target:"body",title:"Wecome to Foinn!",content:"You can now easily access you tunes and sets from thesession.org in a nicer way and use it to practice or in a session. Due to restrictions of thesession.org, we can only read what you have configured there. Therefore to add or remove tunes in your tunebook or sets, you\u2019ll need to login to thesession.org and make your changes there."},{target:"#tunesList",title:"Tunes list",placement:"auto",content:"Click on a tune to see all the settings and musicsheet"},{target:"#filtersForm",title:"Search & Filters",placement:"left",content:"Click on this button to access the app navigation"},{target:"#navToggle",title:"Navigation",placement:"bottom",content:"Access the app navigation for Sets, tunes, help or change user"}],ut={options:{primaryColor:"#357a38"},tooltipContainer:{textAlign:"left"},tooltipContent:{padding:"20px 0"}},mt=n(536),pt=n(236),dt=n.n(pt),gt=n(235),ht=n.n(gt),ft=n(237),Et=n.n(ft);var vt=Object(_.a)(_e)((function(e){var t=e.classes,n=e.folder,a=e.onToggleFilters,r=e.onDrawerToggle;return p.a.createElement(I.a,null,p.a.createElement(N.a,{id:"navToggle",color:"inherit","aria-label":"open drawer",onClick:r,className:t.navIconHide},p.a.createElement(dt.a,null)),p.a.createElement("div",{className:t.flex},p.a.createElement(Ue.a,{smDown:!0},p.a.createElement("img",{src:ht.a,alt:"Foinn",className:t.logo})),p.a.createElement(U.a,{className:t.title,variant:"h6"},p.a.createElement(Ue.a,{smDown:!0}," \u2014 "),We()(n))),p.a.createElement(Ue.a,{mdUp:!0},p.a.createElement(N.a,{color:"inherit","aria-label":"open drawer",onClick:a,className:t.navIconHide},p.a.createElement(Et.a,null))))}));var bt=Object(o.e)(Object(k.b)((function(e){return{showDrawer:e.ui.showDrawer}}),{logout:j,toggleFilters:Le,toggleDrawer:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:"TOGGLE_DRAWER",forceClose:e}}})(Object(c.withSnackbar)(Object(_.a)(_e)((function(e){var t=Object(mt.a)(),n=Object(l.a)(t,2),a=n[0],r=n[1],o=Object(k.c)(),i=e.classes,s=e.showDrawer,c=e.enqueueSnackbar,g=e.closeSnackbar,h=e.match.params,f=h.folder,E=h.userId;Object(m.useEffect)((function(){a.hadConfigTour||r("hadConfigTour",!0);var e=c("Syncing tunebook!",{variant:"success",persist:!0,action:p.a.createElement(pe.a,{size:20})});Promise.all([o(Xe(E)),o(S(E))]).finally((function(){g(e)}))}),[a,r,E,g,c,o]);var v=function(){e.toggleDrawer()};return p.a.createElement("div",{className:i.root},p.a.createElement(u.a,{steps:lt,continuous:!0,showProgress:!0,run:!a.hadConfigTour,disableScrolling:!0,styles:ut}),p.a.createElement(d.a,{className:i.appBar},p.a.createElement(vt,{folder:f,onToggleFilters:function(){e.toggleFilters()},onDrawerToggle:v})),p.a.createElement(ct,{onClose:v,open:s}),p.a.createElement("div",{className:i.content},p.a.createElement(et,{userId:E,folder:f})))}))))),yt=n(535),Ot=n(128),Tt=n(238),jt=n.n(Tt),wt=n(246),St=n(533),kt=n(239),Ct=n.n(kt),Ft=n(240),It=n.n(Ft),Nt=n(241),Ut=n.n(Nt);function xt(e){var t=e.classes,n=e.autoFocus,r=e.value,o=e.ref,i=Object(wt.a)(e,["classes","autoFocus","value","ref"]);return p.a.createElement(Ae.a,{className:t.textField,autoFocus:n,value:r,variant:"outlined",inputRef:o,styles:{width:"100%"},InputProps:Object(a.a)({className:t.input},i)})}function Rt(e,t){var n=t.query,a=t.isHighlighted,r=It()(e.name,n),o=Ut()(e.name,r);return p.a.createElement(St.a,{selected:a,component:"div"},p.a.createElement("div",null,o.map((function(e,t){return e.highlight?p.a.createElement("span",{key:t,style:{fontWeight:300}},e.text):p.a.createElement("strong",{key:t,style:{fontWeight:500}},e.text)}))))}function _t(e){var t=e.containerProps,n=e.children;return p.a.createElement(Ot.a,Object.assign({},t,{square:!0}),n)}function Lt(e){return e.name}var Pt=function(e){Object(A.a)(n,e);var t=Object(W.a)(n);function n(){var e;Object(D.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={value:e.props.userName||"",selectedSuggestion:{},suggestions:[]},e.handleSuggestionsFetchRequested=function(t){var n=t.value;if(n.length<4)return!1;w(n).then((function(t){if(void 0===t)return[];e.setState({suggestions:t.data.members})}))},e.handleSuggestionsClearRequested=function(){e.setState({suggestions:[]})},e.handleChange=function(t,n){var a=n.newValue;e.setState({value:a})},e}return Object(B.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.history;return p.a.createElement(Ct.a,{theme:{container:t.suggestionsContainer,suggestionsContainerOpen:t.suggestionsContainerOpen,suggestionsList:t.suggestionsList,suggestion:t.suggestion},renderInputComponent:xt,suggestions:this.state.suggestions,onSuggestionsFetchRequested:this.handleSuggestionsFetchRequested,onSuggestionsClearRequested:this.handleSuggestionsClearRequested,onSuggestionSelected:function(e,t){return function(e,t){var n=e.suggestion;ue.dispatch(T(n)),t.push("/tunebook/".concat(n.id,"/tunes"))}(t,n)},renderSuggestionsContainer:_t,getSuggestionValue:Lt,renderSuggestion:Rt,inputProps:{autoFocus:!0,classes:t,placeholder:"Search by typing your user name",value:this.state.value,onChange:this.handleChange}})}}]),n}(m.Component),Dt=Object(_.a)((function(e){return{suggestionsContainer:{position:"relative",zIndex:999},suggestionsContainerOpen:{position:"absolute",marginBottom:e.spacing(3),left:0,right:0},suggestion:{display:"block"},suggestionsList:{margin:0,padding:0,listStyleType:"none"},textField:{width:"100%"}}}))(Object(o.e)(Pt)),Bt=n(242),Wt=n.n(Bt),At=n(243),Gt=n.n(At);var Vt=Object(k.b)((function(e){return{currentUser:e.session.currentUser,userName:Wt()(e.session.currentUser)?"":e.session.currentUser.name}}))(Object(_.a)((function(e){return{container:{height:"100vh"},paper:{margin:"0 auto",padding:"20px"},button:{color:"white",marginTop:e.spacing(2)},home:{background:e.palette.primary[500]},logo:{maxWidth:"100%",margin:"0 auto 40px",display:"block"},title:{fontSize:21,fontWeight:"normal",textAlign:"center",lineHeight:1.5,color:"white",opacity:.8},login:{alignSelf:"flex-start"}}}))((function(e){var t=e.classes,n=e.userName,a=e.currentUser;return p.a.createElement(jt.a,{className:t.home},p.a.createElement(x.a,{container:!0,alignItems:"center",justify:"center",direction:"row",className:t.container},p.a.createElement(x.a,{item:!0,xs:12,md:12},p.a.createElement("img",{src:Gt.a,alt:"Foinn app",className:t.logo}),p.a.createElement("h1",{className:t.title},"Browse your tunes and sets from Thessession.org ",p.a.createElement("br",null),p.a.createElement("small",null,"The ideal session companion"))),p.a.createElement(x.a,{item:!0,xs:12,md:4,className:t.login},p.a.createElement(yt.a,{p:2},p.a.createElement(Ot.a,{className:t.paper,elevation:8},p.a.createElement(U.a,{variant:"subtitle1",gutterBottom:!0},"Find your"," ",p.a.createElement(R.a,{href:"https://thesession.org",color:"primary",target:"_blank",rel:"noopener noreferrer"},"TheSession.org")," ","profile:"),p.a.createElement(Dt,{userName:n}),n&&p.a.createElement(he.a,{to:"/tunebook/".concat(a.id,"/tunes"),className:t.button,component:r.b,variant:"contained",color:"primary"},"Open tunebook"))))))}))),qt=n(7),zt=n.n(qt),Mt=n(161),Qt=n.n(Mt),Ht=n(244),Kt=n.n(Ht),Jt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Yt(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Xt=Object(i.a)({palette:{primary:Object(a.a)({main:"#357a38"},Qt.a),secondary:Qt.a,error:Kt.a},typography:{h1:{fontFamily:"'Kaushan Script', 'cursive'",fontSize:"2.8125rem"}}}),$t=p.a.createElement(s.a,{theme:Xt},p.a.createElement(k.a,{store:ue},p.a.createElement(c.SnackbarProvider,null,p.a.createElement(r.a,null,p.a.createElement("div",null,p.a.createElement(o.a,{exact:!0,path:"/"},p.a.createElement(Vt,null)),p.a.createElement(o.a,{path:"/tunebook/:userId/:folder"},p.a.createElement(bt,null)))))));zt.a.render($t,document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");Jt?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Yt(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):Yt(e)}))}}()}},[[266,1,2]]]);
//# sourceMappingURL=main.3f25cd30.chunk.js.map