(this.webpackJsonptrad_tune_book=this.webpackJsonptrad_tune_book||[]).push([[0],{230:function(e,t,n){e.exports=n.p+"static/media/logo-small.0ff303d1.svg"},238:function(e,t,n){e.exports=n.p+"static/media/logo.6f584227.svg"},259:function(e,t,n){e.exports=n(470)},260:function(e,t,n){},282:function(e,t,n){},470:function(e,t,n){"use strict";n.r(t);var a=n(13),r=(n(260),n(19)),o=n(51),i=n(106),s=n(507),c=n(66),l=n(240),u=(n(282),n(215)),m=n(0),p=n.n(m),g=n(511),d=n(116),h="https://thesession.org/tunes/",f="https://thesession.org/members/",E=n(117),v=n.n(E),b=n(118),y=n.n(b),O=n(37),T=n.n(O);function j(e){return{type:"UPDATE_CURRENT_USER",currentUser:e}}var S=function(e){return T.a.get("".concat(f,"search?q=").concat(e,"&format=json")).catch((function(e){console.log(e)}))};var w=n(16),k=n(151),C=n(510),F=n(512),I=n(513),N=n(77),U=n(514),x=n(515),R=n(5),_=n(121),L=n.n(_),B=n(31),D=n(32),P=n(72),W=n(73),A=n(36),V=n.n(A),q={jig:{key:"3/4",tempo:"140"},reel:{key:"4/4",tempo:"180"},"slip jig":{key:"9/8",tempo:"260"},hornpipe:{key:"4/4",tempo:"180"},polka:{key:"2/4",tempo:"100"},slide:{key:"12/8",tempo:"250"},waltz:{key:"3/4",tempo:"160"},barndance:{key:"4/4",tempo:"140"},strathspey:{key:"4/4",tempo:"140"},"three-two":{key:"3/2",tempo:"140"},mazurka:{key:"3/4",tempo:"140"}},z=function(e,t,n){if(void 0===e.abc)return"";var a=t||e.type,r=e.abc.split("! ").join("\n"),o="T: ".concat(n),i="M: ".concat(q[a].key),s="K: ".concat(e.key),c="Q: ".concat(q[a].tempo);return V.a.decode(["X: 1",o,i,c,"L: 1/8",s,r].join("\n"))},G=n(219),M=n.n(G),Q=n(220),H=n.n(Q),K=n(221),J=n.n(K),Y=function(e){Object(W.a)(n,e);var t=Object(P.a)(n);function n(){return Object(B.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"renderAbc",value:function(){M.a.renderAbc(this.el,z(this.props.tune,this.props.type,this.title()),{},{paddingright:0,paddingleft:0,responsive:"resize",add_classes:!0})}},{key:"renderMidi",value:function(){H.a.renderMidi(this.midi,z(this.props.tune,this.props.type,this.title()),{},{inlineControls:{selectionToggle:!1,loopToggle:!1,standard:!0,tempo:!1,startPlaying:!1}},{})}},{key:"title",value:function(){return this.props.tune.name?"".concat(V.a.decode(this.props.tune.name)," (").concat(this.props.tune.key," - ").concat(this.props.tune.type,")"):"".concat(this.props.tune.key," - ").concat(this.props.type)}},{key:"componentWillReceiveProps",value:function(e){var t=e.containerWidth;this.props.containerWidth!==t&&(this.renderAbc(this.props.containerWidth),this.renderMidi(this.props.containerWidth))}},{key:"componentDidMount",value:function(){this.renderAbc(this.props.containerWidth),this.renderMidi(this.props.containerWidth)}},{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:this.props.classes.root},p.a.createElement("div",{ref:function(t){return e.el=t}}),p.a.createElement("div",{ref:function(t){return e.midi=t}}))}}]),n}(m.Component),X=Object(R.a)((function(){return{root:{marginBottom:100,marginTop:50}}}))(J()()(Y)),$=n(62),Z=n(222),ee=n.n(Z);var te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,tunes:[],meta:{},currentTune:{isFetching:!1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_TUNEBOOK":return Object.assign({},e,{isFetching:!0});case"RECEIVE_TUNEBOOK":return Object(a.a)({},e,{isFetching:!1,tunes:t.tunes,meta:t.meta});case"REQUEST_TUNE":return Object.assign({},e,{currentTune:{isFetching:!0}});case"RECEIVE_TUNE":var n=t.currentTune;return Object.assign({},e,{currentTune:Object(a.a)({},n,{isFetching:!1})});default:return e}},ne=n(159);var ae={ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showDrawer:!1,showFilters:!1,tuneFilters:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_DRAWER":return Object(a.a)({},e,{showDrawer:!t.forceClose&&!e.showDrawer});case"TOGGLE_FILTERS":return Object(a.a)({},e,{showFilters:!t.forceClose&&!e.showFilters});case"UPDATE_TUNE_FILTERS":return Object(a.a)({},e,{tuneFilters:t.filters});default:return e}},session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentUser:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_CURRENT_USER":return Object(a.a)({},e,{currentUser:t.currentUser});case"LOGOUT":return Object(a.a)({},e,{currentUser:{}});default:return e}},tunes:te,sets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,sets:[],meta:{},currentSet:{isFetching:!1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_SETS":return Object.assign({},e,{isFetching:!0});case"RECEIVE_SETS":var n=t.add?[].concat(Object(ne.a)(e.sets),Object(ne.a)(t.sets)):t.sets;return Object.assign({},e,{isFetching:!1,sets:n,meta:t.meta});case"REQUEST_SET":return Object.assign({},e,{currentSet:{isFetching:!0}});case"RECEIVE_SET":var r=t.currentSet;return Object.assign({},e,{currentSet:Object(a.a)({},r,{isFetching:!1})});default:return e}}},re=n(223),oe=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),ie=[re.a];ee.a.init("hh8o22/foinn");var se=$.d,ce=Object($.e)(Object($.c)(ae),oe,se($.a.apply(void 0,ie)));ce.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){return}}({session:ce.getState().session,tunes:ce.getState().tunes,sets:ce.getState().sets})}));var le=ce,ue=n(168),me=n(509),pe=Object(ue.a)((function(e){return{root:{height:"calc(100vh - 64px)",display:"flex",alignItems:"center",justifyContent:"center"}}}));var ge=function(){var e=pe();return p.a.createElement("div",{className:e.root},p.a.createElement(me.a,null))},de=p.a.forwardRef((function(e,t){return p.a.createElement(k.a,Object.assign({direction:"up",ref:t},e))}));var he=Object(o.e)(Object(w.b)((function(e,t){return{currentSet:e.sets.currentSet,isFetching:e.sets.currentSet.isFetching,setId:t.match.params.setId,userId:e.session.currentUser.id}}))(Object(R.a)((function(e){return{root:{marginTop:100},settings:e.mixins.gutters({paddingTop:e.spacing(),paddingBottom:e.spacing()}),title:{marginLeft:e.spacing(2),flex:1}}}))((function(e){var t;Object(m.useEffect)((function(){var t,n;e.setId&&le.dispatch((t=e.userId,n=e.setId,function(e){return e({type:"REQUEST_SET"}),T.a.get("".concat(f).concat(t,"/sets/").concat(n,"?format=json")).then((function(t){e({type:"RECEIVE_SET",currentSet:t.data})})).catch((function(e){console.log(e)}))}))}),[e.setId,e.userId]);var n=void 0!==(null===(t=e.currentSet)||void 0===t?void 0:t.name),a=function(){return e.history.push(e.referrer)};return p.a.createElement(C.a,{fullScreen:!0,open:!!e.setId,onClose:a,TransitionComponent:de},p.a.createElement(g.a,{className:e.classes.appBar},p.a.createElement(F.a,null,p.a.createElement(I.a,{edge:"start",onClick:a,"aria-label":"close",color:"inherit"},p.a.createElement(L.a,null)),p.a.createElement(N.a,{variant:"h6",className:e.classes.title},n&&V.a.decode(e.currentSet.name)))),!n&&p.a.createElement(ge,null),n&&p.a.createElement(U.a,{container:!0,justify:"center",className:e.classes.root},p.a.createElement(U.a,{item:!0,xs:12,md:6},e.currentSet.settings.map((function(t,n){return p.a.createElement("div",{key:"".concat(t.id,"-").concat(n)},p.a.createElement(N.a,{variant:"h5",gutterBottom:!0},"Setting #",t.id),p.a.createElement(N.a,{variant:"body2"},"by ",t.member.name," on ",t.date," \u2014"," ",p.a.createElement(x.a,{target:"_blank",rel:"noopener noreferrer",color:"primary",href:"".concat(h).concat(e.currentSet.id,"#setting").concat(t.id)},"View on The Session.org")),p.a.createElement(X,{tune:t,type:e.currentSet.type}))})))))})))),fe=n(122),Ee=n.n(fe),ve=n(516),be=n(474),ye=n(517),Oe=n(518),Te=n(519),je=Object(ue.a)({});var Se=Object(o.e)((function(e){var t=je(),n=e.items,a=e.match,o=function(e){return e&&(e.name.length>40?V.a.decode(e.name).substring(0,40)+"...":V.a.decode(e.name))};return p.a.createElement(ve.a,{className:t.root,id:"tunesList"},n.map((function(e,t){return p.a.createElement(m.Fragment,{key:"".concat(t,"-item.id")},p.a.createElement(be.a,{component:r.b,button:!0,to:a.params.tuneId||a.params.setId?"".concat(e.id):"".concat(a.url,"/").concat(e.id)},p.a.createElement(ye.a,null,p.a.createElement(Ee.a,null)),p.a.createElement(Oe.a,{primary:o(e),secondary:e.type})),p.a.createElement(Te.a,{variant:"inset",component:"li"}))})))})),we={includeScore:!1,threshold:.2,findAllMatches:!0,keys:["name"]};var ke=Object(w.b)((function(e,t){return{items:e.sets.sets,isFetching:e.sets.isFetching,userChanged:e.session.currentUser.id!==t.userId,filters:e.ui.tuneFilters}}),{fetchSets:function(e){return function(t){t({type:"REQUEST_SETS"}),t(j({id:e}));var n=[];return function t(n,a){return new Promise((function(r){T.a.get("".concat(f).concat(e,"/sets"),{params:{page:n,format:"json",perpage:50}}).then((function(e){a.push(e);var n=e.data,o=n.page,i=n.pages;o&&o<i?T.a.all([t(o+1,a)]).then((function(){return r()})):r()}))}))}(1,n).then((function(){var e=y()(v()(n,(function(e){return e.data.sets})),["name"]);t(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"RECEIVE_SETS",sets:e,meta:t,add:n}}(e,{total:e.length}))}))}}})(Object(c.withSnackbar)(Object(o.e)((function(e){var t=e.match.url,n=e.items,a=e.userId,r=e.isFetching,i=e.userChanged,s=e.fetchSets,c=e.filters,l=e.enqueueSnackbar,u=e.closeSnackbar;Object(m.useEffect)((function(){if(i||!n.length){var e=l("Syncing sets!",{variant:"success",persist:!0,action:p.a.createElement(me.a,null)});s(a,e).finally((function(){u(e)}))}}),[a,n.length,i,s,l,u]);var g=new d.a(n,we),h=(c.search?g.search(c.search||"").map((function(e){return e.item})):n).filter((function(e){return!c.tuneType||e.type===c.tuneType}));return p.a.createElement("div",null,r?p.a.createElement(ge,null):p.a.createElement(Se,{items:h}),p.a.createElement(o.a,{path:"".concat(t,"/:setId?")},p.a.createElement(he,{referrer:t})))}))));var Ce=p.a.forwardRef((function(e,t){return p.a.createElement(k.a,Object.assign({direction:"up",ref:t},e))}));var Fe=Object(o.e)(Object(w.b)((function(e,t){return{currentTune:e.tunes.currentTune,isFetching:e.tunes.currentTune.isFetching,tuneId:t.match.params.tuneId}}))(Object(R.a)((function(e){return{root:{marginTop:100},settings:e.mixins.gutters({paddingTop:e.spacing(),paddingBottom:e.spacing()}),title:{marginLeft:e.spacing(2),flex:1}}}))((function(e){var t;Object(m.useEffect)((function(){var t;e.tuneId&&le.dispatch((t=e.tuneId,function(e){return e({type:"REQUEST_TUNE"}),T.a.get("".concat(h).concat(t,"?format=json")).then((function(t){e({type:"RECEIVE_TUNE",currentTune:t.data})})).catch((function(e){console.log(e)}))}))}),[e.tuneId]);var n=void 0!==(null===(t=e.currentTune)||void 0===t?void 0:t.name),a=function(){return e.history.push(e.referrer)};return p.a.createElement(C.a,{fullScreen:!0,open:!!e.tuneId,onClose:a,TransitionComponent:Ce},p.a.createElement(g.a,{className:e.classes.appBar},p.a.createElement(F.a,null,p.a.createElement(I.a,{edge:"start",onClick:a,"aria-label":"close",color:"inherit"},p.a.createElement(L.a,null)),p.a.createElement(N.a,{variant:"h6",className:e.classes.title},n&&V.a.decode(e.currentTune.name)))),!n&&p.a.createElement(ge,null),n&&p.a.createElement(U.a,{container:!0,justify:"center",className:e.classes.root},p.a.createElement(U.a,{item:!0,xs:12,md:6},e.currentTune.settings.map((function(t,n){return p.a.createElement("div",{key:"".concat(t.id,"-").concat(n)},p.a.createElement(N.a,{variant:"h5",gutterBottom:!0},"Setting #",t.id),p.a.createElement(N.a,{variant:"body2"},"by ",t.member.name," on ",t.date," \u2014"," ",p.a.createElement(x.a,{target:"_blank",rel:"noopener noreferrer",color:"primary",href:"".concat(h).concat(e.currentTune.id,"#setting").concat(t.id)},"View on The Session.org")),p.a.createElement(X,{tune:t,type:e.currentTune.type}))})))))})))),Ie=n(529),Ne=n(520),Ue=n(107),xe=function(e){return Object(Ue.a)({root:{flexGrow:1,zIndex:1,overflowX:"hidden",overflowY:"auto",position:"relative",display:"flex",height:"100vh"},appBar:{position:"fixed",zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},title:{marginLeft:e.spacing(2)},flex:{flex:1,display:"flex",alignItems:"center"},menuButton:{marginLeft:12,marginRight:20},hide:{display:"none"},drawerPaper:{zIndex:e.zIndex.drawer-1,width:300,top:0,right:0,height:"100vh",position:"fixed",overflowY:"auto"},drawerHeader:Object(a.a)({display:"flex",alignItems:"center",justifyContent:"center",padding:"0 8px"},e.mixins.toolbar),logo:{position:"relative",transform:"translateY(-2px)"},greetings:{marginRight:e.spacing(),opacity:.5,display:"inline-block"},content:{width:"100%",padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),height:"calc(100% - 56px)",marginTop:56}},e.breakpoints.up("md"),{content:{marginTop:64},drawerPaper:{height:"calc(100vh - 64px)",top:64}})};function Re(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:"TOGGLE_FILTERS",forceClose:e}}var _e=function(e){Object(W.a)(n,e);var t=Object(P.a)(n);function n(){var e;Object(B.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleFiltersToggle=function(){e.props.toggleFilters()},e}return Object(D.a)(n,[{key:"render",value:function(){var e=this,t=this.props.classes;return p.a.createElement("div",{className:t.drawerPaper,ref:function(t){return e.divRef=t}},p.a.createElement(Ie.a,{mdUp:!0},p.a.createElement(Ne.a,{variant:"temporary",anchor:"right",open:this.props.open,classes:{paper:t.drawerPaper},onClose:this.handleFiltersToggle,ModalProps:{keepMounted:!0}},this.props.children)),p.a.createElement(Ie.a,{smDown:!0,implementation:"css"},p.a.createElement(Ne.a,{anchor:"right",variant:"persistent",open:!0,classes:{paper:t.drawerPaper}},this.props.children)))}}]),n}(m.Component),Le=Object(o.e)(Object(w.b)((function(e){return{open:e.ui.showFilters}}),{toggleFilters:Re})(Object(R.a)(xe)(_e))),Be=n(123),De=n.n(Be),Pe=n(526),We=n(521),Ae=n(522),Ve=n(530),qe=n(523),ze=n(528),Ge=n(226),Me=n.n(Ge),Qe=Object(ue.a)((function(e){return{root:{margin:e.spacing(2)},formControl:{margin:e.spacing(2,0)}}}));var He=Object(w.b)((function(e){return{currentFilters:e.ui.tuneFilters}}),{updateTuneFilters:function(e){return{type:"UPDATE_TUNE_FILTERS",filters:e}}})((function(e){var t=Qe(),n=e.currentFilters,r=Me()((function(t){e.updateTuneFilters(Object(a.a)({},n,{search:t}))}),200);return p.a.createElement("div",{className:t.root,id:"filtersForm"},p.a.createElement(Pe.a,{id:"filter-search",label:"Search",variant:"outlined",onChange:function(e){return r(e.target.value)},defaultValue:n.search,placeholder:"Search by name",InputLabelProps:{shrink:!0},fullWidth:!0,className:t.formControl}),p.a.createElement(We.a,{component:"fieldset",className:t.formControl},p.a.createElement(Ae.a,{component:"legend"},"Type"),p.a.createElement(Ve.a,{"aria-label":"Tune Type",id:"filter-tuneType",name:"tuneType",defaultValue:"all",onChange:function(t){var r="all"===t.target.value?void 0:t.target.value;e.updateTuneFilters(Object(a.a)({},n,{tuneType:r}))}},p.a.createElement(qe.a,{value:"all",control:p.a.createElement(ze.a,{color:"primary"}),label:"All"}),Object.keys(q).map((function(e){return p.a.createElement(qe.a,{key:e,value:e,control:p.a.createElement(ze.a,{color:"primary"}),label:De()(e)})})))))}));var Ke=Object(w.b)((function(e,t){return{items:e.tunes.tunes,isFetching:e.tunes.isFetching,userChanged:e.session.currentUser.id!==t.userId,filters:e.ui.tuneFilters}}),{fetchTuneBook:function(e){return function(t){t({type:"REQUEST_TUNEBOOK"}),t(j({id:e}));var n=[];return function t(n,a){return new Promise((function(r){T.a.get("".concat(f).concat(e,"/tunebook"),{params:{page:n,format:"json",perpage:50}}).then((function(e){a.push(e);var n=e.data,o=n.page,i=n.pages;o&&o<i?T.a.all([t(o+1,a)]).then((function(){return r()})):r()}))}))}(1,n).then((function(){var e=y()(v()(n,(function(e){return e.data.tunes})),["name"]);t(function(e,t){return{type:"RECEIVE_TUNEBOOK",tunes:e,meta:t}}(e,{total:e.length}))}))}}})(Object(c.withSnackbar)(Object(o.e)((function(e){var t=e.match.url,n=e.items,a=e.userId,r=e.isFetching,i=e.userChanged,s=e.fetchTuneBook,c=e.filters,l=e.enqueueSnackbar,u=e.closeSnackbar;Object(m.useEffect)((function(){if(i||!n.length){var e=l("Syncing tunebook!",{variant:"success",persist:!0,action:p.a.createElement(me.a,null)});s(a,e).finally((function(){u(e)}))}}),[a,n.length,i,s,l,u]);var g=new d.a(n,we),h=(c.search?g.search(c.search||"").map((function(e){return e.item})):n).filter((function(e){return!c.tuneType||e.type===c.tuneType}));return p.a.createElement("div",null,r?p.a.createElement(ge,null):p.a.createElement(Se,{items:h}),p.a.createElement(Le,null,p.a.createElement(He,null)),p.a.createElement(o.a,{path:"".concat(t,"/:tuneId?")},p.a.createElement(Fe,{referrer:t})))})))),Je=n(229),Ye=n.n(Je),Xe=n(227),$e=n.n(Xe),Ze=n(228),et=n.n(Ze),tt=Object(ue.a)({list:{width:250},fullList:{width:"auto"}});var nt=Object(w.b)((function(e){var t,n;return{tunesCount:null===(t=e.tunes.meta)||void 0===t?void 0:t.total,setsCount:null===(n=e.sets.meta)||void 0===n?void 0:n.total,currentUser:e.session.currentUser}}))(Object(o.e)((function(e){var t=tt(),n=[{label:"Change user",to:"/",icon:p.a.createElement($e.a,null)},{label:"Sets ".concat(e.setsCount?"("+e.setsCount+")":""),to:"/tunebook/".concat(e.currentUser.id,"/sets"),icon:p.a.createElement(et.a,null)},{label:"Tunes ".concat(e.tunesCount?"("+e.tunesCount+")":""),to:"/tunebook/".concat(e.currentUser.id,"/tunes"),icon:p.a.createElement(Ee.a,null)}];return p.a.createElement(Ne.a,{anchor:"left",open:e.open,onClose:e.onClose},p.a.createElement("div",{role:"presentation",className:t.list},p.a.createElement(ve.a,null,n.map((function(t){return p.a.createElement(be.a,{button:!0,key:t.label,onClick:function(){return function(t){e.onClose(),e.history.push(t.to)}(t)}},p.a.createElement(ye.a,null,t.icon),p.a.createElement(Oe.a,{primary:t.label}))})),p.a.createElement(Te.a,null),p.a.createElement(be.a,{button:!0,key:"nav-help",href:"mailto:accounts+foinn@rorsvort.com",component:"a"},p.a.createElement(ye.a,null,p.a.createElement(Ye.a,null)),p.a.createElement(Oe.a,{primary:"Help"})))))}))),at=[{placement:"center",target:"body",title:"Wecome to Foinn!",content:"You can now easily access you tunes and sets from thesession.org in a nicer way and use it to practice or in a session. Due to restrictions of thesession.org, we can only read what you have configured there. Therefore to add or remove tunes in your tunebook or sets, you\u2019ll need to login to thesession.org and make your changes there."},{target:"#tunesList",title:"Tunes list",placement:"auto",content:"Click on a tune to see all the settings and musicsheet"},{target:"#filtersForm",title:"Search & Filters",placement:"left",content:"Click on this button to access the app navigation"},{target:"#navToggle",title:"Navigation",placement:"bottom",content:"Access the app navigation for Sets, tunes, help or change user"}],rt={options:{primaryColor:"#357a38"},tooltipContainer:{textAlign:"left"},tooltipContent:{padding:"20px 0"}},ot=n(527),it=n(231),st=n.n(it),ct=n(230),lt=n.n(ct),ut=n(232),mt=n.n(ut);var pt=Object(R.a)(xe)((function(e){var t=e.classes,n=e.folder,a=e.onToggleFilters,r=e.onDrawerToggle;return p.a.createElement(F.a,null,p.a.createElement(I.a,{id:"navToggle",color:"inherit","aria-label":"open drawer",onClick:r,className:t.navIconHide},p.a.createElement(st.a,null)),p.a.createElement("div",{className:t.flex},p.a.createElement(Ie.a,{smDown:!0},p.a.createElement("img",{src:lt.a,alt:"Foinn",className:t.logo})),p.a.createElement(N.a,{className:t.title,variant:"h6"},"\u2014 ",De()(n))),p.a.createElement(Ie.a,{mdUp:!0},p.a.createElement(I.a,{color:"inherit","aria-label":"open drawer",onClick:a,className:t.navIconHide},p.a.createElement(mt.a,null))))}));var gt=Object(o.e)(Object(w.b)((function(e){return{showDrawer:e.ui.showDrawer}}),{logout:function(){return{type:"LOGOUT"}},toggleFilters:Re,toggleDrawer:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:"TOGGLE_DRAWER",forceClose:e}}})(Object(R.a)(xe)((function(e){var t=Object(ot.a)(),n=Object(l.a)(t,2),a=n[0],r=n[1],o=function(){e.toggleDrawer()};Object(m.useEffect)((function(){a.hadConfigTour||r("hadConfigTour",!0)}),[a,r]);var i=e.classes,s=e.showDrawer,c=e.match.params,d=c.folder,h=c.userId;return p.a.createElement("div",{className:i.root},p.a.createElement(u.a,{steps:at,continuous:!0,showProgress:!0,run:!a.hadConfigTour,disableScrolling:!0,styles:rt}),p.a.createElement(g.a,{className:i.appBar},p.a.createElement(pt,{folder:d,onToggleFilters:function(){e.toggleFilters()},onDrawerToggle:o})),p.a.createElement(nt,{onClose:o,open:s}),p.a.createElement("div",{className:i.content},"tunes"===d?p.a.createElement(Ke,{userId:h}):p.a.createElement(ke,{userId:h})))})))),dt=n(125),ht=n(525),ft=n(233),Et=n.n(ft),vt=n(241),bt=n(524),yt=n(234),Ot=n.n(yt),Tt=n(235),jt=n.n(Tt),St=n(236),wt=n.n(St);function kt(e){var t=e.classes,n=e.autoFocus,r=e.value,o=e.ref,i=Object(vt.a)(e,["classes","autoFocus","value","ref"]);return p.a.createElement(Pe.a,{className:t.textField,autoFocus:n,value:r,variant:"outlined",inputRef:o,styles:{width:"100%"},InputProps:Object(a.a)({className:t.input},i)})}function Ct(e,t){var n=t.query,a=t.isHighlighted,r=jt()(e.name,n),o=wt()(e.name,r);return p.a.createElement(bt.a,{selected:a,component:"div"},p.a.createElement("div",null,o.map((function(e,t){return e.highlight?p.a.createElement("span",{key:t,style:{fontWeight:300}},e.text):p.a.createElement("strong",{key:t,style:{fontWeight:500}},e.text)}))))}function Ft(e){var t=e.containerProps,n=e.children;return p.a.createElement(dt.a,Object.assign({},t,{square:!0}),n)}function It(e){return e.name}var Nt=function(e){Object(W.a)(n,e);var t=Object(P.a)(n);function n(){var e;Object(B.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={value:e.props.userName||"",selectedSuggestion:{},suggestions:[]},e.handleSuggestionsFetchRequested=function(t){var n=t.value;if(n.length<4)return!1;S(n).then((function(t){if(void 0===t)return[];e.setState({suggestions:t.data.members})}))},e.handleSuggestionsClearRequested=function(){e.setState({suggestions:[]})},e.handleChange=function(t,n){var a=n.newValue;e.setState({value:a})},e}return Object(D.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.history;return p.a.createElement(Ot.a,{theme:{container:t.suggestionsContainer,suggestionsContainerOpen:t.suggestionsContainerOpen,suggestionsList:t.suggestionsList,suggestion:t.suggestion},renderInputComponent:kt,suggestions:this.state.suggestions,onSuggestionsFetchRequested:this.handleSuggestionsFetchRequested,onSuggestionsClearRequested:this.handleSuggestionsClearRequested,onSuggestionSelected:function(e,t){return function(e,t){var n=e.suggestion;le.dispatch(j(n)),t.push("/tunebook/".concat(n.id,"/tunes"))}(t,n)},renderSuggestionsContainer:Ft,getSuggestionValue:It,renderSuggestion:Ct,inputProps:{autoFocus:!1,classes:t,placeholder:"Search by typing your user name",value:this.state.value,onChange:this.handleChange}})}}]),n}(m.Component),Ut=Object(R.a)((function(e){return{suggestionsContainer:{position:"relative",zIndex:999},suggestionsContainerOpen:{position:"absolute",marginBottom:e.spacing(3),left:0,right:0},suggestion:{display:"block"},suggestionsList:{margin:0,padding:0,listStyleType:"none"},textField:{width:"100%"}}}))(Object(o.e)(Nt)),xt=n(237),Rt=n.n(xt),_t=n(238),Lt=n.n(_t);var Bt=Object(w.b)((function(e){return{currentUser:e.session.currentUser,userName:Rt()(e.session.currentUser)?"":e.session.currentUser.name}}))(Object(R.a)((function(e){return{container:{height:"100vh"},paper:{margin:"0 auto",padding:"20px"},button:{color:"white",marginTop:e.spacing(2)},home:{background:e.palette.primary[500]},logo:{maxWidth:"100%",margin:"0 auto 40px",display:"block"},title:{fontSize:21,fontWeight:"normal",textAlign:"center",lineHeight:1.5,color:"white",opacity:.8},login:{alignSelf:"flex-start"}}}))((function(e){var t=e.classes,n=e.userName,a=e.currentUser;return p.a.createElement(Et.a,{className:t.home},p.a.createElement(U.a,{container:!0,alignItems:"center",justify:"center",direction:"row",className:t.container},p.a.createElement(U.a,{item:!0,xs:12,md:12},p.a.createElement("img",{src:Lt.a,alt:"Foinn app",className:t.logo}),p.a.createElement("h1",{className:t.title},"Browse your tunes and sets from Thessession.org ",p.a.createElement("br",null),p.a.createElement("small",null,"The ideal session companion"))),p.a.createElement(U.a,{item:!0,xs:12,md:4,className:t.login},p.a.createElement(dt.a,{className:t.paper,elevation:8},p.a.createElement(N.a,{variant:"subtitle1",gutterBottom:!0},"To start, select your"," ",p.a.createElement(x.a,{href:"https://thesession.org",color:"primary",target:"_blank",rel:"noopener noreferrer"},"TheSession.org")," ","user name."),p.a.createElement(Ut,{userName:n}),n&&p.a.createElement(ht.a,{to:"/tunebook/".concat(a.id,"/tunes"),className:t.button,component:r.b,variant:"contained",color:"primary"},"Open tunebook")))))}))),Dt=n(7),Pt=n.n(Dt),Wt=n(158),At=n.n(Wt),Vt=n(239),qt=n.n(Vt),zt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Gt(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Mt=Object(i.a)({palette:{primary:Object(a.a)({main:"#357a38"},At.a),secondary:At.a,error:qt.a},typography:{h1:{fontFamily:"'Kaushan Script', 'cursive'",fontSize:"2.8125rem"}}}),Qt=p.a.createElement(s.a,{theme:Mt},p.a.createElement(w.a,{store:le},p.a.createElement(c.SnackbarProvider,null,p.a.createElement(r.a,null,p.a.createElement("div",null,p.a.createElement(o.a,{exact:!0,path:"/"},p.a.createElement(Bt,null)),p.a.createElement(o.a,{path:"/tunebook/:userId/:folder"},p.a.createElement(gt,null)))))));Pt.a.render(Qt,document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");zt?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Gt(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):Gt(e)}))}}()}},[[259,1,2]]]);
//# sourceMappingURL=main.dea27f2c.chunk.js.map