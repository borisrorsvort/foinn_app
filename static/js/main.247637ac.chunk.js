(this.webpackJsonptrad_tune_book=this.webpackJsonptrad_tune_book||[]).push([[0],{262:function(e,t,n){},270:function(e,t,n){},460:function(e,t,n){"use strict";n.r(t);var r=n(8),a=(n(262),n(20)),s=n(15),c=n(235),i=n(515),o=n(75),u=n(236),l=(n(270),n(237)),d=n(0),j=n.n(d),h=n(500),p=n(213),g="REQUEST_TUNEBOOK",b="RECEIVE_TUNEBOOK",f="REQUEST_TUNE",O="RECEIVE_TUNE",m="REQUEST_SETS",v="RECEIVE_SETS",x="REQUEST_SET",y="RECEIVE_SET",w="TOGGLE_DRAWER",T="TOGGLE_FILTERS",S="UPDATE_TUNE_FILTERS",k="UPDATE_CURRENT_USER",C="LOGOUT",F="https://thesession.org/members/",N=n(116),I=n.n(N),E=n(117),U=n.n(E),R=n(41),_=n.n(R);function L(e){return{type:k,currentUser:e}}function D(){return{type:C}}var P=function(e){return _.a.get("".concat(F,"search?q=").concat(e,"&format=json")).catch((function(e){console.log(e)}))};var W=function(e){return function(t){t({type:g}),t(L({id:e}));var n=[];return function t(n,r){return new Promise((function(a){_.a.get("".concat(F).concat(e,"/tunebook"),{params:{page:n,format:"json",perpage:50}}).then((function(e){r.push(e);var n=e.data,s=n.page,c=n.pages;s&&s<c?_.a.all([t(s+1,r)]).then((function(){return a()})):a()}))}))}(1,n).then((function(){var e=U()(I()(n,(function(e){return e.data.tunes})),["name"]);t(function(e,t){return{type:b,tunes:e,meta:t}}(e,{total:e.length}))}))}},B=function(e){return function(t){return t({type:f}),_.a.get("".concat("https://thesession.org/tunes/").concat(e,"?format=json")).then((function(e){var n;t((n=e.data,{type:O,currentTune:n}))})).catch((function(e){console.log(e)}))}},A=n(14),q=n(22),z=n(461),M=n(499),V=n(501),G=n(502),H=n(80),Q=n(517),Y=n(503),J=n(6),K=n(119),X=n.n(K),$=n(17),Z=n(18),ee=n(25),te=n(24),ne=n(28),re=n.n(ne),ae={jig:{key:"3/4",tempo:"140"},reel:{key:"4/4",tempo:"180"},"slip jig":{key:"9/8",tempo:"260"},hornpipe:{key:"4/4",tempo:"180"},polka:{key:"2/4",tempo:"100"},slide:{key:"12/8",tempo:"250"},waltz:{key:"3/4",tempo:"160"},barndance:{key:"4/4",tempo:"140"},strathspey:{key:"4/4",tempo:"140"},"three-two":{key:"3/2",tempo:"140"},mazurka:{key:"3/4",tempo:"140"},march:{key:"4/4",tempo:"140"}},se=function(e,t,n){var r;if(void 0===e.abc)return"";var a=t||e.type,s=e.abc.split("! ").join("\n"),c="T: ".concat(n),i="M: ".concat(ae[a].key),o="K: ".concat(e.key),u="Q: ".concat(null===(r=ae[a])||void 0===r?void 0:r.tempo);return re.a.decode(["X: 1",c,i,u,"L: 1/8",o,s].join("\n"))},ce=n(216),ie=n.n(ce),oe=n(217),ue=n.n(oe),le=n(218),de=n.n(le),je=n(3),he=function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){return Object($.a)(this,n),t.apply(this,arguments)}return Object(Z.a)(n,[{key:"renderAbc",value:function(){ie.a.renderAbc(this.el,se(this.props.tune,this.props.type,this.title()),{},{paddingright:0,paddingleft:0,responsive:"resize",add_classes:!0})}},{key:"renderMidi",value:function(){ue.a.renderMidi(this.midi,se(this.props.tune,this.props.type,this.title()),{},{inlineControls:{selectionToggle:!1,loopToggle:!1,standard:!0,tempo:!1,startPlaying:!1}},{})}},{key:"title",value:function(){return this.props.tune.name?"".concat(re.a.decode(this.props.tune.name)," (").concat(this.props.tune.key," - ").concat(this.props.tune.type,")"):"".concat(this.props.tune.key," - ").concat(this.props.type)}},{key:"componentWillReceiveProps",value:function(e){var t=e.containerWidth;this.props.containerWidth!==t&&(this.renderAbc(this.props.containerWidth),this.renderMidi(this.props.containerWidth))}},{key:"componentDidMount",value:function(){this.renderAbc(this.props.containerWidth),this.renderMidi(this.props.containerWidth)}},{key:"render",value:function(){var e=this;return Object(je.jsxs)("div",{className:this.props.classes.root,children:[Object(je.jsx)("div",{ref:function(t){return e.el=t}}),Object(je.jsx)("div",{ref:function(t){return e.midi=t}})]})}}]),n}(d.Component),pe=Object(J.a)((function(){return{root:{marginBottom:100,marginTop:50}}}))(de()()(he)),ge=n(69),be=n(219),fe=n.n(be);var Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,tunes:[],meta:{},currentTune:{isFetching:!1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(r.a)(Object(r.a)({},e),{},{tunes:[]});case g:return Object.assign({},e,{isFetching:!0});case b:return Object(r.a)(Object(r.a)({},e),{},{isFetching:!1,tunes:t.tunes,meta:t.meta});case f:return Object.assign({},e,{currentTune:{isFetching:!0}});case O:var n=t.currentTune;return Object.assign({},e,{currentTune:Object(r.a)(Object(r.a)({},n),{},{isFetching:!1})});default:return e}},me=n(39);var ve={ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showDrawer:!1,showFilters:!1,tuneFilters:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(r.a)(Object(r.a)({},e),{},{showDrawer:!t.forceClose&&!e.showDrawer});case T:return Object(r.a)(Object(r.a)({},e),{},{showFilters:!t.forceClose&&!e.showFilters});case S:return Object(r.a)(Object(r.a)({},e),{},{tuneFilters:t.filters});default:return e}},session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentUser:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(r.a)(Object(r.a)({},e),{},{currentUser:t.currentUser});case C:return Object(r.a)(Object(r.a)({},e),{},{currentUser:{}});default:return e}},tunes:Oe,sets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,sets:[],meta:{},currentSet:{isFetching:!1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(r.a)(Object(r.a)({},e),{},{sets:[]});case m:return Object.assign({},e,{isFetching:!0});case v:var n=t.add?[].concat(Object(me.a)(e.sets),Object(me.a)(t.sets)):t.sets;return Object.assign({},e,{isFetching:!1,sets:n,meta:t.meta});case x:return Object.assign({},e,{currentSet:{isFetching:!0}});case y:var a=t.currentSet;return Object.assign({},e,{currentSet:Object(r.a)(Object(r.a)({},a),{},{isFetching:!1})});default:return e}}},xe=n(220),ye=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),we=[xe.a];fe.a.init("hh8o22/foinn");var Te=ge.d,Se=Object(ge.e)(Object(ge.c)(ve),ye,Te(ge.a.apply(void 0,we)));Se.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){return}}({session:Se.getState().session,tunes:Se.getState().tunes,sets:Se.getState().sets})}));var ke=Se,Ce=n(495),Fe=n(496),Ne=Object(Ce.a)((function(e){return{root:{height:"calc(100vh - 64px)",display:"flex",alignItems:"center",justifyContent:"center"}}}));var Ie=function(){var e=Ne();return Object(je.jsx)("div",{className:e.root,children:Object(je.jsx)(Fe.a,{})})},Ee=n(497),Ue=n(221),Re=n.n(Ue);var _e=Object(s.e)((function(e){var t,n,r=e.tuneId,s=e.folder,c=e.match.path,i=Object(A.d)((function(e){return e[s][s]})),o=Re()(i,{id:r}),u=null===(t=i[o-1])||void 0===t?void 0:t.id,l=null===(n=i[o+1])||void 0===n?void 0:n.id;return Object(je.jsxs)(Q.a,{style:{marginLeft:"auto"},children:[u&&Object(je.jsx)(Ee.a,{color:"inherit",component:a.b,to:c.replace(":tuneId?",u),children:"Previous"}),l&&Object(je.jsx)(Ee.a,{color:"inherit",component:a.b,to:c.replace(":tuneId?",l),children:"Next"})]})})),Le=n(464),De=n(498),Pe=Object(Le.a)((function(e){return{spacer:{margin:e.spacing(0,2,2,0)}}})),We=function(e){var t=e.setting,n=Pe();return Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(H.a,{variant:"h5",gutterBottom:!0,children:t.name?Object(ne.decode)(t.name):"Setting #".concat(t.id)}),Object(je.jsx)(Q.a,{mb:2,children:Object(je.jsxs)(H.a,{variant:"body2",children:["by ",t.member.name," on ",t.date]})}),Object(je.jsx)(Ee.a,{className:n.spacer,variant:"outlined",target:"_blank",rel:"noopener noreferrer",color:"primary",href:t.url,children:"View on the Session.org"}),t.name&&Object(je.jsx)(Ee.a,{className:n.spacer,variant:"outlined",target:"_blank",rel:"noopener noreferrer",color:"primary",contained:!0,startIcon:Object(je.jsx)(De.a,{}),href:"https://www.youtube.com/results?search_query=".concat(Object(ne.decode)(t.name)),children:"Search on Youtube"})]})},Be=j.a.forwardRef((function(e,t){return Object(je.jsx)(z.a,Object(r.a)({direction:"up",ref:t},e))}));var Ae=Object(s.e)(Object(A.b)((function(e,t){return{currentTune:e.tunes.currentTune,isFetching:e.tunes.currentTune.isFetching,tuneId:t.match.params.tuneId}}))(Object(J.a)((function(e){return{root:{marginTop:100,padding:e.spacing(0,3)},settings:e.mixins.gutters({paddingTop:e.spacing(),paddingBottom:e.spacing()}),title:{marginLeft:e.spacing(2),flex:1}}}))((function(e){var t,n;Object(d.useEffect)((function(){e.tuneId&&ke.dispatch(B(e.tuneId))}),[e.tuneId]);var r=void 0!==(null===(t=e.currentTune)||void 0===t?void 0:t.name),a=function(){return e.history.push(e.referrer)};return Object(je.jsxs)(M.a,{fullScreen:!0,open:!!e.tuneId,onClose:a,TransitionComponent:Be,children:[Object(je.jsx)(h.a,{className:e.classes.appBar,children:Object(je.jsxs)(V.a,{children:[Object(je.jsx)(G.a,{edge:"start",onClick:a,"aria-label":"close",color:"inherit",children:Object(je.jsx)(X.a,{})}),Object(je.jsx)(H.a,{variant:"h6",className:e.classes.title,children:r&&re.a.decode(e.currentTune.name)}),Object(je.jsx)(_e,{tuneId:e.currentTune.id,folder:"tunes"})]})}),!r&&Object(je.jsx)(Ie,{}),r&&Object(je.jsx)(Q.a,{p:2,children:Object(je.jsx)(Y.a,{container:!0,justify:"center",className:e.classes.root,children:Object(je.jsx)(Y.a,(n={item:!0,md:12},Object(q.a)(n,"md",10),Object(q.a)(n,"lg",9),Object(q.a)(n,"children",e.currentTune.settings.map((function(t,n){return Object(je.jsxs)("div",{children:[Object(je.jsx)(We,{setting:t}),Object(je.jsx)(pe,{tune:t,type:e.currentTune.type})]},"".concat(t.id,"-").concat(n))}))),n))})})]})})))),qe=n(120),ze=n.n(qe),Me=n(504),Ve=n(463),Ge=n(505),He=n(507),Qe=n(7),Ye=n(508),Je=n(506),Ke=Object(Ce.a)({});var Xe=Object(s.e)((function(e){var t=Ke(),n=e.items,r=e.match,s=r.url,c="tunes"===r.params.folder,i=function(e){return e&&(e.name.length>150?re.a.decode(e.name).substring(0,150)+"...":re.a.decode(e.name))};return Object(je.jsx)(Me.a,{className:t.root,id:"tunesList",children:n.map((function(e,t){return Object(je.jsxs)("li",{children:[Object(je.jsxs)(Ve.a,{component:a.b,button:!0,to:"".concat(s,"/").concat(e.id),children:[Object(je.jsx)(Ge.a,{children:c?Object(je.jsx)(ze.a,{}):Object(je.jsx)(Je.a,{})}),Object(je.jsx)(He.a,{primary:i(e),secondary:e.type||e.settings.map((function(e){return Object(Qe.a)(e.type)})).join(", ")})]}),Object(je.jsx)(Ye.a,{variant:"inset"})]},"".concat(t,"-item.id"))}))})})),$e=n(520),Ze=n(509),et=function(e){return Object(q.a)({root:{flexGrow:1,zIndex:1,overflowX:"hidden",overflowY:"auto",position:"relative",display:"flex",height:"100vh"},appBar:{position:"fixed",zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},title:{marginLeft:e.spacing(2)},flex:{flex:1,display:"flex",alignItems:"center"},menuButton:{marginLeft:12,marginRight:20},hide:{display:"none"},drawerPaper:{width:300,top:0,right:0,height:"100vh",overflowY:"auto"},drawerHeader:Object(r.a)({display:"flex",alignItems:"center",justifyContent:"center",padding:"0 8px"},e.mixins.toolbar),logo:{position:"relative",transform:"translateY(-2px)"},greetings:{marginRight:e.spacing(),opacity:.5,display:"inline-block"},content:{width:"100%",transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),height:"calc(100% - 56px)",marginTop:56}},e.breakpoints.up("md"),{content:{marginTop:64},drawerPaper:{height:"calc(100vh - 64px)",top:64}})};function tt(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:T,forceClose:e}}var nt=function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){var e;Object($.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).handleFiltersToggle=function(){e.props.toggleFilters()},e}return Object(Z.a)(n,[{key:"render",value:function(){var e=this,t=this.props.classes;return Object(je.jsxs)("div",{className:t.drawerPaper,ref:function(t){return e.divRef=t},children:[Object(je.jsx)($e.a,{mdUp:!0,children:Object(je.jsx)(Ze.a,{variant:"temporary",anchor:"right",open:this.props.open,classes:{paper:t.drawerPaper},onClose:this.handleFiltersToggle,ModalProps:{keepMounted:!0},children:this.props.children})}),Object(je.jsx)($e.a,{smDown:!0,implementation:"css",children:Object(je.jsx)(Ze.a,{anchor:"right",variant:"persistent",open:!0,classes:{paper:t.drawerPaper},children:this.props.children})})]})}}]),n}(d.Component),rt=Object(s.e)(Object(A.b)((function(e){return{open:e.ui.showFilters}}),{toggleFilters:tt})(Object(J.a)(et)(nt))),at=n(121),st=n.n(at),ct=n(516),it=n(510),ot=n(511),ut=n(521),lt=n(512),dt=n(519),jt=n(223),ht=n.n(jt),pt=Object(Ce.a)((function(e){return{root:{margin:e.spacing(2)},formControl:{margin:e.spacing(2,0)}}}));var gt=Object(A.b)((function(e){return{currentFilters:e.ui.tuneFilters}}),{updateTuneFilters:function(e){return{type:S,filters:e}}})((function(e){var t=pt(),n=e.currentFilters,a=(e.folder,ht()((function(t){e.updateTuneFilters(Object(r.a)(Object(r.a)({},n),{},{search:t}))}),200));return Object(je.jsxs)("div",{className:t.root,id:"filtersForm",children:[Object(je.jsx)(ct.a,{id:"filter-search",label:"Search",variant:"outlined",onChange:function(e){return a(e.target.value)},defaultValue:n.search,placeholder:"Search by name",InputLabelProps:{shrink:!0},fullWidth:!0,className:t.formControl}),Object(je.jsxs)(it.a,{component:"fieldset",className:t.formControl,children:[Object(je.jsx)(ot.a,{component:"legend",children:"Type"}),Object(je.jsxs)(ut.a,{"aria-label":"Tune Type",id:"filter-tuneType",name:"tuneType",defaultValue:"all",onChange:function(t){var a="all"===t.target.value?void 0:t.target.value;e.updateTuneFilters(Object(r.a)(Object(r.a)({},n),{},{tuneType:a}))},children:[Object(je.jsx)(lt.a,{value:"all",control:Object(je.jsx)(dt.a,{color:"primary"}),label:"All"}),Object.keys(ae).map((function(e){return Object(je.jsx)(lt.a,{value:e,control:Object(je.jsx)(dt.a,{color:"primary"}),label:st()(e)},e)}))]})]})]})})),bt={includeScore:!1,threshold:.2,findAllMatches:!0,keys:["name"]};var ft=function(e){return function(t){t({type:m}),t(L({id:e}));var n=[];return function t(n,r){return new Promise((function(a){_.a.get("".concat(F).concat(e,"/sets"),{params:{page:n,format:"json",perpage:50}}).then((function(e){r.push(e);var n=e.data,s=n.page,c=n.pages;s&&s<c?_.a.all([t(s+1,r)]).then((function(){return a()})):a()}))}))}(1,n).then((function(){var e=U()(I()(n,(function(e){return e.data.sets})),["date"]);t(function(e,t){return{type:v,sets:e,meta:t,add:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}}(e,{total:e.length}))}))}},Ot=function(e,t){return function(n){return n({type:x}),_.a.get("".concat(F).concat(e,"/sets/").concat(t,"?format=json")).then((function(e){var t;n((t=e.data,{type:y,currentSet:t}))})).catch((function(e){console.log(e)}))}},mt=j.a.forwardRef((function(e,t){return Object(je.jsx)(z.a,Object(r.a)({direction:"up",ref:t},e))}));var vt=Object(s.e)(Object(A.b)((function(e,t){return{currentSet:e.sets.currentSet,isFetching:e.sets.currentSet.isFetching,tuneId:t.match.params.tuneId,userId:e.session.currentUser.id}}))(Object(J.a)((function(e){return{root:{marginTop:100},settings:e.mixins.gutters({paddingTop:e.spacing(),paddingBottom:e.spacing()}),title:{marginLeft:e.spacing(2),flex:1}}}))((function(e){var t,n;Object(d.useEffect)((function(){e.tuneId&&ke.dispatch(Ot(e.userId,e.tuneId))}),[e.tuneId,e.userId]);var r=void 0!==(null===(t=e.currentSet)||void 0===t?void 0:t.name),a=function(){return e.history.push(e.referrer)};return Object(je.jsxs)(M.a,{fullScreen:!0,open:!!e.tuneId,onClose:a,TransitionComponent:mt,children:[Object(je.jsx)(h.a,{className:e.classes.appBar,children:Object(je.jsxs)(V.a,{children:[Object(je.jsx)(G.a,{edge:"start",onClick:a,"aria-label":"close",color:"inherit",children:Object(je.jsx)(X.a,{})}),Object(je.jsx)($e.a,{xsDown:!0,children:Object(je.jsx)(H.a,{variant:"h6",className:e.classes.title,children:r&&re.a.decode(e.currentSet.name)})}),Object(je.jsx)(_e,{tuneId:e.currentSet.id,folder:"sets"})]})}),!r&&Object(je.jsx)(Ie,{}),r&&Object(je.jsx)(Q.a,{p:2,children:Object(je.jsx)(Y.a,{container:!0,justify:"center",className:e.classes.root,children:Object(je.jsx)(Y.a,(n={item:!0,md:12},Object(q.a)(n,"md",10),Object(q.a)(n,"lg",9),Object(q.a)(n,"children",e.currentSet.settings.map((function(t,n){return Object(je.jsxs)("div",{children:[Object(je.jsx)(We,{setting:t}),Object(je.jsx)(pe,{tune:t,type:e.currentSet.type})]},"".concat(t.id,"-").concat(n))}))),n))})})]})}))));var xt=Object(A.b)((function(e,t){return{items:"tunes"===t.folder?e.tunes.tunes:e.sets.sets,isFetching:e.tunes.isFetching,userChanged:e.session.currentUser.id!==t.userId,filters:e.ui.tuneFilters}}),{fetchTuneBook:W,fetchSets:ft})(Object(o.b)(Object(s.e)((function(e){var t=e.match,n=t.url,r=t.params.folder,a=e.items,c=e.isFetching,i=e.filters,o="tunes"===r,u=new p.a(a,bt),l=(i.search?u.search(i.search||"").map((function(e){return e.item})):a).filter((function(e){return!i.tuneType||(e.type?function(e){return e.type===i.tuneType}(e):function(e){return e.settings.map((function(e){return e.type})).includes(i.tuneType)}(e))}));return Object(je.jsxs)("div",{children:[c?Object(je.jsx)(Ie,{}):Object(je.jsx)(Xe,{items:l}),Object(je.jsx)(rt,{children:Object(je.jsx)(gt,{folder:r})}),Object(je.jsx)(s.a,{path:"".concat(n,"/:tuneId?"),children:o?Object(je.jsx)(Ae,{referrer:n}):Object(je.jsx)(vt,{referrer:n})})]})})))),yt=n(226),wt=n.n(yt),Tt=n(225),St=n.n(Tt),kt=n(224),Ct=n.n(kt),Ft=Object(Ce.a)({list:{width:250},fullList:{width:"auto"}});var Nt=Object(A.b)((function(e){var t,n;return{tunesCount:null===(t=e.tunes.meta)||void 0===t?void 0:t.total,setsCount:null===(n=e.sets.meta)||void 0===n?void 0:n.total,currentUser:e.session.currentUser}}))(Object(s.e)((function(e){var t=Ft(),n=Object(A.c)(),r=[{label:"Sets ".concat(e.setsCount?"("+e.setsCount+")":""),to:"/tunebook/".concat(e.currentUser.id,"/sets"),icon:Object(je.jsx)(Ct.a,{})},{label:"Tunes ".concat(e.tunesCount?"("+e.tunesCount+")":""),to:"/tunebook/".concat(e.currentUser.id,"/tunes"),icon:Object(je.jsx)(ze.a,{})}],a=function(){e.onClose(),n(D()),e.history.push("/")};return Object(je.jsx)(Ze.a,{anchor:"left",open:e.open,onClose:e.onClose,children:Object(je.jsx)("div",{role:"presentation",className:t.list,children:Object(je.jsxs)(Me.a,{children:[Object(je.jsxs)(Ve.a,{button:!0,onClick:a,children:[Object(je.jsx)(Ge.a,{children:Object(je.jsx)(St.a,{})}),Object(je.jsx)(He.a,{primary:"Change user"})]},"Change user"),r.map((function(t){return Object(je.jsxs)(Ve.a,{button:!0,onClick:function(){return function(t){e.onClose(),e.history.push(t.to)}(t)},children:[Object(je.jsx)(Ge.a,{children:t.icon}),Object(je.jsx)(He.a,{primary:t.label})]},t.label)})),Object(je.jsx)(Ye.a,{}),Object(je.jsxs)(Ve.a,{button:!0,href:"mailto:accounts+foinn@rorsvort.com",component:"a",children:[Object(je.jsx)(Ge.a,{children:Object(je.jsx)(wt.a,{})}),Object(je.jsx)(He.a,{primary:"Help"})]},"nav-help")]})})})}))),It=[{placement:"center",target:"body",title:"Wecome to Foinn!",content:"You can now easily access you tunes and sets from thesession.org in a nicer way and use it to practice or in a session. Due to restrictions of thesession.org, we can only read what you have configured there. Therefore to add or remove tunes in your tunebook or sets, you\u2019ll need to login to thesession.org and make your changes there."},{target:"#tunesList",title:"Tunes list",placement:"auto",content:"Click on a tune to see all the settings and musicsheet"},{target:"#filtersForm",title:"Search & Filters",placement:"left",content:"Click on this button to access the app navigation"},{target:"#navToggle",title:"Navigation",placement:"bottom",content:"Access the app navigation for Sets, tunes, help or change user"}],Et={options:{primaryColor:"#357a38"},tooltipContainer:{textAlign:"left"},tooltipContent:{padding:"20px 0"}},Ut=n(518),Rt=n(227),_t=n.n(Rt),Lt=n.p+"static/media/logo-small.03c15606.svg",Dt=n(228),Pt=n.n(Dt);var Wt=Object(J.a)(et)((function(e){var t=e.classes,n=e.folder,r=e.onToggleFilters,a=e.onDrawerToggle;return Object(je.jsxs)(V.a,{children:[Object(je.jsx)(G.a,{id:"navToggle",color:"inherit","aria-label":"open drawer",onClick:a,className:t.navIconHide,children:Object(je.jsx)(_t.a,{})}),Object(je.jsxs)("div",{className:t.flex,children:[Object(je.jsx)($e.a,{smDown:!0,children:Object(je.jsx)("img",{src:Lt,alt:"Foinn",className:t.logo})}),Object(je.jsxs)(H.a,{className:t.title,variant:"h6",children:[Object(je.jsx)($e.a,{smDown:!0,children:" \u2014 "}),st()(n)]})]}),Object(je.jsx)($e.a,{mdUp:!0,children:Object(je.jsx)(G.a,{color:"inherit","aria-label":"open drawer",onClick:r,className:t.navIconHide,children:Object(je.jsx)(Pt.a,{})})})]})}));var Bt=Object(s.e)(Object(A.b)((function(e){return{showDrawer:e.ui.showDrawer}}),{logout:D,toggleFilters:tt,toggleDrawer:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:w,forceClose:e}}})(Object(o.b)(Object(J.a)(et)((function(e){var t=Object(Ut.a)(),n=Object(u.a)(t,2),r=n[0],a=n[1],s=Object(A.c)(),c=e.classes,i=e.showDrawer,o=e.enqueueSnackbar,j=e.closeSnackbar,p=e.match.params,g=p.folder,b=p.userId;Object(d.useEffect)((function(){r.hadConfigTour||a("hadConfigTour",!0);var e=o("Syncing tunebook!",{variant:"success",persist:!0,action:Object(je.jsx)(Fe.a,{size:20})});Promise.all([s(ft(b)),s(W(b))]).finally((function(){j(e)}))}),[r,a,b,j,o,s]);var f=function(){e.toggleDrawer()};return Object(je.jsxs)("div",{className:c.root,children:[Object(je.jsx)(l.a,{steps:It,continuous:!0,showProgress:!0,run:!r.hadConfigTour,disableScrolling:!0,styles:Et}),Object(je.jsx)(h.a,{className:c.appBar,children:Object(je.jsx)(Wt,{folder:g,onToggleFilters:function(){e.toggleFilters()},onDrawerToggle:f})}),Object(je.jsx)(Nt,{onClose:f,open:i}),Object(je.jsx)("div",{className:c.content,children:Object(je.jsx)(xt,{userId:b,folder:g})})]})}))))),At=n(156),qt=n(514),zt=n(229),Mt=n.n(zt),Vt=n(238),Gt=n(513),Ht=n(230),Qt=n.n(Ht),Yt=n(231),Jt=n.n(Yt),Kt=n(232),Xt=n.n(Kt);function $t(e){var t=e.classes,n=e.autoFocus,a=e.value,s=e.ref,c=Object(Vt.a)(e,["classes","autoFocus","value","ref"]);return Object(je.jsx)(ct.a,{className:t.textField,autoFocus:n,value:a,variant:"outlined",inputRef:s,styles:{width:"100%"},InputProps:Object(r.a)({className:t.input},c)})}function Zt(e,t){var n=t.query,r=t.isHighlighted,a=Jt()(e.name,n),s=Xt()(e.name,a);return Object(je.jsx)(Gt.a,{selected:r,component:"div",children:Object(je.jsx)("div",{children:s.map((function(e,t){return e.highlight?Object(je.jsx)("span",{style:{fontWeight:300},children:e.text},t):Object(je.jsx)("strong",{style:{fontWeight:500},children:e.text},t)}))})})}function en(e){var t=e.containerProps,n=e.children;return Object(je.jsx)(At.a,Object(r.a)(Object(r.a)({},t),{},{square:!0,children:n}))}function tn(e){return e.name}var nn=function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){var e;Object($.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={value:e.props.userName||"",selectedSuggestion:{},suggestions:[]},e.handleSuggestionsFetchRequested=function(t){var n=t.value;if(n.length<4)return!1;P(n).then((function(t){if(void 0===t)return[];e.setState({suggestions:t.data.members})}))},e.handleSuggestionsClearRequested=function(){e.setState({suggestions:[]})},e.handleChange=function(t,n){var r=n.newValue;e.setState({value:r})},e}return Object(Z.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.history;return Object(je.jsx)(Qt.a,{theme:{container:t.suggestionsContainer,suggestionsContainerOpen:t.suggestionsContainerOpen,suggestionsList:t.suggestionsList,suggestion:t.suggestion},renderInputComponent:$t,suggestions:this.state.suggestions,onSuggestionsFetchRequested:this.handleSuggestionsFetchRequested,onSuggestionsClearRequested:this.handleSuggestionsClearRequested,onSuggestionSelected:function(e,t){return function(e,t){var n=e.suggestion;ke.dispatch(L(n)),t.push("/tunebook/".concat(n.id,"/tunes"))}(t,n)},renderSuggestionsContainer:en,getSuggestionValue:tn,renderSuggestion:Zt,inputProps:{autoFocus:!0,classes:t,placeholder:"Search by typing your user name",value:this.state.value,onChange:this.handleChange}})}}]),n}(d.Component),rn=Object(J.a)((function(e){return{suggestionsContainer:{position:"relative",zIndex:999},suggestionsContainerOpen:{position:"absolute",marginBottom:e.spacing(3),left:0,right:0},suggestion:{display:"block"},suggestionsList:{margin:0,padding:0,listStyleType:"none"},textField:{width:"100%"}}}))(Object(s.e)(nn)),an=n(233),sn=n.n(an),cn=n.p+"static/media/logo.bdf350d0.svg";var on=Object(A.b)((function(e){return{currentUser:e.session.currentUser,userName:sn()(e.session.currentUser)?"":e.session.currentUser.name}}))(Object(J.a)((function(e){return{container:{height:"100vh"},paper:{margin:"0 auto",padding:"20px"},button:{color:"white",marginTop:e.spacing(2)},home:{background:e.palette.primary[500]},logo:{maxWidth:"100%",margin:"0 auto 40px",display:"block"},title:{fontSize:21,fontWeight:"normal",textAlign:"center",lineHeight:1.5,color:"white",opacity:.8},login:{alignSelf:"flex-start"}}}))((function(e){var t=e.classes,n=e.userName,r=e.currentUser;return Object(je.jsx)(Mt.a,{className:t.home,children:Object(je.jsxs)(Y.a,{container:!0,alignItems:"center",justify:"center",direction:"row",className:t.container,children:[Object(je.jsxs)(Y.a,{item:!0,xs:12,md:12,children:[Object(je.jsx)("img",{src:cn,alt:"Foinn app",className:t.logo}),Object(je.jsxs)("h1",{className:t.title,children:["Browse your tunes and sets from Thessession.org ",Object(je.jsx)("br",{}),Object(je.jsx)("small",{children:"The ideal session companion"})]})]}),Object(je.jsx)(Y.a,{item:!0,xs:12,md:4,className:t.login,children:Object(je.jsx)(Q.a,{p:2,children:Object(je.jsxs)(At.a,{className:t.paper,elevation:8,children:[Object(je.jsxs)(H.a,{variant:"subtitle1",gutterBottom:!0,children:["Find your"," ",Object(je.jsx)(qt.a,{href:"https://thesession.org",color:"primary",target:"_blank",rel:"noopener noreferrer",children:"TheSession.org"})," ","profile:"]}),Object(je.jsx)(rn,{userName:n}),n&&Object(je.jsx)(Ee.a,{to:"/tunebook/".concat(r.id,"/tunes"),className:t.button,component:a.b,variant:"contained",color:"primary",children:"Open tunebook"})]})})})]})})}))),un=n(9),ln=n.n(un),dn=n(154),jn=n.n(dn),hn=n(234),pn=n.n(hn),gn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function bn(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var fn=Object(c.a)({palette:{primary:Object(r.a)({main:"#357a38"},jn.a),secondary:jn.a,error:pn.a},typography:{h1:{fontFamily:"'Kaushan Script', 'cursive'",fontSize:"2.8125rem"}}}),On=Object(je.jsx)(i.a,{theme:fn,children:Object(je.jsx)(A.a,{store:ke,children:Object(je.jsx)(o.a,{children:Object(je.jsx)(a.a,{children:Object(je.jsxs)("div",{children:[Object(je.jsx)(s.a,{exact:!0,path:"/",children:Object(je.jsx)(on,{})}),Object(je.jsx)(s.a,{path:"/tunebook/:userId/:folder",children:Object(je.jsx)(Bt,{})})]})})})})});ln.a.render(On,document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");gn?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):bn(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):bn(e)}))}}()}},[[460,1,2]]]);
//# sourceMappingURL=main.247637ac.chunk.js.map