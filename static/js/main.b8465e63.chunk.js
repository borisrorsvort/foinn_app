(this.webpackJsonptrad_tune_book=this.webpackJsonptrad_tune_book||[]).push([[0],{230:function(e,t,n){e.exports=n.p+"static/media/logo-small.0ff303d1.svg"},238:function(e,t,n){e.exports=n.p+"static/media/logo.6f584227.svg"},259:function(e,t,n){e.exports=n(470)},260:function(e,t,n){},282:function(e,t,n){},470:function(e,t,n){"use strict";n.r(t);var a=n(12),r=(n(260),n(19)),o=n(51),i=n(107),s=n(508),c=n(66),l=n(240),u=(n(282),n(214)),m=n(0),p=n.n(m),d=n(512),g=n(217),h="https://thesession.org/tunes/",f="https://thesession.org/members/",E=n(117),v=n.n(E),b=n(118),y=n.n(b),O=n(37),T=n.n(O);function j(e){return{type:"UPDATE_CURRENT_USER",currentUser:e}}function w(){return{type:"LOGOUT"}}var S=function(e){return T.a.get("".concat(f,"search?q=").concat(e,"&format=json")).catch((function(e){console.log(e)}))};var k=function(e){return function(t){t({type:"REQUEST_TUNEBOOK"}),t(j({id:e}));var n=[];return function t(n,a){return new Promise((function(r){T.a.get("".concat(f).concat(e,"/tunebook"),{params:{page:n,format:"json",perpage:50}}).then((function(e){a.push(e);var n=e.data,o=n.page,i=n.pages;o&&o<i?T.a.all([t(o+1,a)]).then((function(){return r()})):r()}))}))}(1,n).then((function(){var e=y()(v()(n,(function(e){return e.data.tunes})),["name"]);t(function(e,t){return{type:"RECEIVE_TUNEBOOK",tunes:e,meta:t}}(e,{total:e.length}))}))}},C=n(16),F=n(150),N=n(511),I=n(513),U=n(514),x=n(77),R=n(515),_=n(516),L=n(5),D=n(121),P=n.n(D),B=n(31),W=n(32),A=n(72),G=n(73),V=n(30),z=n.n(V),q={jig:{key:"3/4",tempo:"140"},reel:{key:"4/4",tempo:"180"},"slip jig":{key:"9/8",tempo:"260"},hornpipe:{key:"4/4",tempo:"180"},polka:{key:"2/4",tempo:"100"},slide:{key:"12/8",tempo:"250"},waltz:{key:"3/4",tempo:"160"},barndance:{key:"4/4",tempo:"140"},strathspey:{key:"4/4",tempo:"140"},"three-two":{key:"3/2",tempo:"140"},mazurka:{key:"3/4",tempo:"140"}},M=function(e,t,n){var a;if(void 0===e.abc)return"";var r=t||e.type,o=e.abc.split("! ").join("\n"),i="T: ".concat(n),s="M: ".concat(q[r].key),c="K: ".concat(e.key),l="Q: ".concat(null===(a=q[r])||void 0===a?void 0:a.tempo);return z.a.decode(["X: 1",i,s,l,"L: 1/8",c,o].join("\n"))},Q=n(219),H=n.n(Q),K=n(220),J=n.n(K),Y=n(221),X=n.n(Y),$=function(e){Object(G.a)(n,e);var t=Object(A.a)(n);function n(){return Object(B.a)(this,n),t.apply(this,arguments)}return Object(W.a)(n,[{key:"renderAbc",value:function(){H.a.renderAbc(this.el,M(this.props.tune,this.props.type,this.title()),{},{paddingright:0,paddingleft:0,responsive:"resize",add_classes:!0})}},{key:"renderMidi",value:function(){J.a.renderMidi(this.midi,M(this.props.tune,this.props.type,this.title()),{},{inlineControls:{selectionToggle:!1,loopToggle:!1,standard:!0,tempo:!1,startPlaying:!1}},{})}},{key:"title",value:function(){return this.props.tune.name?"".concat(z.a.decode(this.props.tune.name)," (").concat(this.props.tune.key," - ").concat(this.props.tune.type,")"):"".concat(this.props.tune.key," - ").concat(this.props.type)}},{key:"componentWillReceiveProps",value:function(e){var t=e.containerWidth;this.props.containerWidth!==t&&(this.renderAbc(this.props.containerWidth),this.renderMidi(this.props.containerWidth))}},{key:"componentDidMount",value:function(){this.renderAbc(this.props.containerWidth),this.renderMidi(this.props.containerWidth)}},{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:this.props.classes.root},p.a.createElement("div",{ref:function(t){return e.el=t}}),p.a.createElement("div",{ref:function(t){return e.midi=t}}))}}]),n}(m.Component),Z=Object(L.a)((function(){return{root:{marginBottom:100,marginTop:50}}}))(X()()($)),ee=n(62),te=n(222),ne=n.n(te);var ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,tunes:[],meta:{},currentTune:{isFetching:!1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGOUT":return Object(a.a)({},e,{tunes:[]});case"REQUEST_TUNEBOOK":return Object.assign({},e,{isFetching:!0});case"RECEIVE_TUNEBOOK":return Object(a.a)({},e,{isFetching:!1,tunes:t.tunes,meta:t.meta});case"REQUEST_TUNE":return Object.assign({},e,{currentTune:{isFetching:!0}});case"RECEIVE_TUNE":var n=t.currentTune;return Object.assign({},e,{currentTune:Object(a.a)({},n,{isFetching:!1})});default:return e}},re=n(158);var oe={ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showDrawer:!1,showFilters:!1,tuneFilters:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_DRAWER":return Object(a.a)({},e,{showDrawer:!t.forceClose&&!e.showDrawer});case"TOGGLE_FILTERS":return Object(a.a)({},e,{showFilters:!t.forceClose&&!e.showFilters});case"UPDATE_TUNE_FILTERS":return Object(a.a)({},e,{tuneFilters:t.filters});default:return e}},session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentUser:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_CURRENT_USER":return Object(a.a)({},e,{currentUser:t.currentUser});case"LOGOUT":return Object(a.a)({},e,{currentUser:{}});default:return e}},tunes:ae,sets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,sets:[],meta:{},currentSet:{isFetching:!1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGOUT":return Object(a.a)({},e,{sets:[]});case"REQUEST_SETS":return Object.assign({},e,{isFetching:!0});case"RECEIVE_SETS":var n=t.add?[].concat(Object(re.a)(e.sets),Object(re.a)(t.sets)):t.sets;return Object.assign({},e,{isFetching:!1,sets:n,meta:t.meta});case"REQUEST_SET":return Object.assign({},e,{currentSet:{isFetching:!0}});case"RECEIVE_SET":var r=t.currentSet;return Object.assign({},e,{currentSet:Object(a.a)({},r,{isFetching:!1})});default:return e}}},ie=n(223),se=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),ce=[ie.a];ne.a.init("hh8o22/foinn");var le=ee.d,ue=Object(ee.e)(Object(ee.c)(oe),se,le(ee.a.apply(void 0,ce)));ue.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){return}}({session:ue.getState().session,tunes:ue.getState().tunes,sets:ue.getState().sets})}));var me=ue,pe=n(167),de=n(510),ge=Object(pe.a)((function(e){return{root:{height:"calc(100vh - 64px)",display:"flex",alignItems:"center",justifyContent:"center"}}}));var he=function(){var e=ge();return p.a.createElement("div",{className:e.root},p.a.createElement(de.a,null))},fe=p.a.forwardRef((function(e,t){return p.a.createElement(F.a,Object.assign({direction:"up",ref:t},e))}));var Ee=Object(o.e)(Object(C.b)((function(e,t){return{currentTune:e.tunes.currentTune,isFetching:e.tunes.currentTune.isFetching,tuneId:t.match.params.tuneId}}))(Object(L.a)((function(e){return{root:{marginTop:100,padding:e.spacing(0,3)},settings:e.mixins.gutters({paddingTop:e.spacing(),paddingBottom:e.spacing()}),title:{marginLeft:e.spacing(2),flex:1}}}))((function(e){var t;Object(m.useEffect)((function(){var t;e.tuneId&&me.dispatch((t=e.tuneId,function(e){return e({type:"REQUEST_TUNE"}),T.a.get("".concat(h).concat(t,"?format=json")).then((function(t){e({type:"RECEIVE_TUNE",currentTune:t.data})})).catch((function(e){console.log(e)}))}))}),[e.tuneId]);var n=void 0!==(null===(t=e.currentTune)||void 0===t?void 0:t.name),a=function(){return e.history.push(e.referrer)};return p.a.createElement(N.a,{fullScreen:!0,open:!!e.tuneId,onClose:a,TransitionComponent:fe},p.a.createElement(d.a,{className:e.classes.appBar},p.a.createElement(I.a,null,p.a.createElement(U.a,{edge:"start",onClick:a,"aria-label":"close",color:"inherit"},p.a.createElement(P.a,null)),p.a.createElement(x.a,{variant:"h6",className:e.classes.title},n&&z.a.decode(e.currentTune.name)))),!n&&p.a.createElement(he,null),n&&p.a.createElement(R.a,{container:!0,justify:"center",className:e.classes.root},p.a.createElement(R.a,{item:!0,xs:12,md:6},e.currentTune.settings.map((function(t,n){return p.a.createElement("div",{key:"".concat(t.id,"-").concat(n)},p.a.createElement(x.a,{variant:"h5",gutterBottom:!0},"Setting #",t.id),p.a.createElement(x.a,{variant:"body2"},"by ",t.member.name," on ",t.date," \u2014"," ",p.a.createElement(_.a,{target:"_blank",rel:"noopener noreferrer",color:"primary",href:"".concat(h).concat(e.currentTune.id,"#setting").concat(t.id)},"View on The Session.org")),p.a.createElement(Z,{tune:t,type:e.currentTune.type}))})))))})))),ve=n(122),be=n.n(ve),ye=n(517),Oe=n(474),Te=n(518),je=n(519),we=n(520),Se=n(532),ke=Object(pe.a)({});var Ce=Object(o.e)((function(e){var t=ke(),n=e.items,a=e.match,o=a.url,i="tunes"===a.params.folder,s=function(e){return e&&(e.name.length>150?z.a.decode(e.name).substring(0,150)+"...":z.a.decode(e.name))};return p.a.createElement(ye.a,{className:t.root,id:"tunesList"},n.map((function(e,t){return p.a.createElement(m.Fragment,{key:"".concat(t,"-item.id")},p.a.createElement(Oe.a,{component:r.b,button:!0,to:"".concat(o,"/").concat(e.id)},p.a.createElement(Te.a,null,i?p.a.createElement(be.a,null):p.a.createElement(Se.a,null)),p.a.createElement(je.a,{primary:s(e),secondary:e.type})),p.a.createElement(we.a,{variant:"inset",component:"li"}))})))})),Fe=n(530),Ne=n(521),Ie=n(108),Ue=function(e){return Object(Ie.a)({root:{flexGrow:1,zIndex:1,overflowX:"hidden",overflowY:"auto",position:"relative",display:"flex",height:"100vh"},appBar:{position:"fixed",zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},title:{marginLeft:e.spacing(2)},flex:{flex:1,display:"flex",alignItems:"center"},menuButton:{marginLeft:12,marginRight:20},hide:{display:"none"},drawerPaper:{zIndex:e.zIndex.drawer-1,width:300,top:0,right:0,height:"100vh",position:"fixed",overflowY:"auto"},drawerHeader:Object(a.a)({display:"flex",alignItems:"center",justifyContent:"center",padding:"0 8px"},e.mixins.toolbar),logo:{position:"relative",transform:"translateY(-2px)"},greetings:{marginRight:e.spacing(),opacity:.5,display:"inline-block"},content:{width:"100%",transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),height:"calc(100% - 56px)",marginTop:56}},e.breakpoints.up("md"),{content:{marginTop:64},drawerPaper:{height:"calc(100vh - 64px)",top:64}})};function xe(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:"TOGGLE_FILTERS",forceClose:e}}var Re=function(e){Object(G.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(B.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleFiltersToggle=function(){e.props.toggleFilters()},e}return Object(W.a)(n,[{key:"render",value:function(){var e=this,t=this.props.classes;return p.a.createElement("div",{className:t.drawerPaper,ref:function(t){return e.divRef=t}},p.a.createElement(Fe.a,{mdUp:!0},p.a.createElement(Ne.a,{variant:"temporary",anchor:"right",open:this.props.open,classes:{paper:t.drawerPaper},onClose:this.handleFiltersToggle,ModalProps:{keepMounted:!0}},this.props.children)),p.a.createElement(Fe.a,{smDown:!0,implementation:"css"},p.a.createElement(Ne.a,{anchor:"right",variant:"persistent",open:!0,classes:{paper:t.drawerPaper}},this.props.children)))}}]),n}(m.Component),_e=Object(o.e)(Object(C.b)((function(e){return{open:e.ui.showFilters}}),{toggleFilters:xe})(Object(L.a)(Ue)(Re))),Le=n(123),De=n.n(Le),Pe=n(527),Be=n(522),We=n(523),Ae=n(531),Ge=n(524),Ve=n(529),ze=n(226),qe=n.n(ze),Me=Object(pe.a)((function(e){return{root:{margin:e.spacing(2)},formControl:{margin:e.spacing(2,0)}}}));var Qe=Object(C.b)((function(e){return{currentFilters:e.ui.tuneFilters}}),{updateTuneFilters:function(e){return{type:"UPDATE_TUNE_FILTERS",filters:e}}})((function(e){var t=Me(),n=e.currentFilters,r=e.folder,o=qe()((function(t){e.updateTuneFilters(Object(a.a)({},n,{search:t}))}),200);return p.a.createElement("div",{className:t.root,id:"filtersForm"},p.a.createElement(Pe.a,{id:"filter-search",label:"Search",variant:"outlined",onChange:function(e){return o(e.target.value)},defaultValue:n.search,placeholder:"Search by name",InputLabelProps:{shrink:!0},fullWidth:!0,className:t.formControl}),"tunes"==r&&p.a.createElement(Be.a,{component:"fieldset",className:t.formControl},p.a.createElement(We.a,{component:"legend"},"Type"),p.a.createElement(Ae.a,{"aria-label":"Tune Type",id:"filter-tuneType",name:"tuneType",defaultValue:"all",onChange:function(t){var r="all"===t.target.value?void 0:t.target.value;e.updateTuneFilters(Object(a.a)({},n,{tuneType:r}))}},p.a.createElement(Ge.a,{value:"all",control:p.a.createElement(Ve.a,{color:"primary"}),label:"All"}),Object.keys(q).map((function(e){return p.a.createElement(Ge.a,{key:e,value:e,control:p.a.createElement(Ve.a,{color:"primary"}),label:De()(e)})})))))})),He={includeScore:!1,threshold:.2,findAllMatches:!0,keys:["name"]};var Ke=function(e){return function(t){t({type:"REQUEST_SETS"}),t(j({id:e}));var n=[];return function t(n,a){return new Promise((function(r){T.a.get("".concat(f).concat(e,"/sets"),{params:{page:n,format:"json",perpage:50}}).then((function(e){a.push(e);var n=e.data,o=n.page,i=n.pages;o&&o<i?T.a.all([t(o+1,a)]).then((function(){return r()})):r()}))}))}(1,n).then((function(){var e=y()(v()(n,(function(e){return e.data.sets})),["name"]);t(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"RECEIVE_SETS",sets:e,meta:t,add:n}}(e,{total:e.length}))}))}},Je=p.a.forwardRef((function(e,t){return p.a.createElement(F.a,Object.assign({direction:"up",ref:t},e))}));var Ye=Object(o.e)(Object(C.b)((function(e,t){return{currentSet:e.sets.currentSet,isFetching:e.sets.currentSet.isFetching,tuneId:t.match.params.tuneId,userId:e.session.currentUser.id}}))(Object(L.a)((function(e){return{root:{marginTop:100},settings:e.mixins.gutters({paddingTop:e.spacing(),paddingBottom:e.spacing()}),title:{marginLeft:e.spacing(2),flex:1}}}))((function(e){var t;Object(m.useEffect)((function(){var t,n;e.tuneId&&me.dispatch((t=e.userId,n=e.tuneId,function(e){return e({type:"REQUEST_SET"}),T.a.get("".concat(f).concat(t,"/sets/").concat(n,"?format=json")).then((function(t){e({type:"RECEIVE_SET",currentSet:t.data})})).catch((function(e){console.log(e)}))}))}),[e.tuneId,e.userId]);var n=void 0!==(null===(t=e.currentSet)||void 0===t?void 0:t.name),a=function(){return e.history.push(e.referrer)};return p.a.createElement(N.a,{fullScreen:!0,open:!!e.tuneId,onClose:a,TransitionComponent:Je},p.a.createElement(d.a,{className:e.classes.appBar},p.a.createElement(I.a,null,p.a.createElement(U.a,{edge:"start",onClick:a,"aria-label":"close",color:"inherit"},p.a.createElement(P.a,null)),p.a.createElement(x.a,{variant:"h6",className:e.classes.title},n&&z.a.decode(e.currentSet.name)))),!n&&p.a.createElement(he,null),n&&p.a.createElement(R.a,{container:!0,justify:"center",className:e.classes.root},p.a.createElement(R.a,{item:!0,xs:12,md:6},e.currentSet.settings.map((function(t,n){return p.a.createElement("div",{key:"".concat(t.id,"-").concat(n)},p.a.createElement(x.a,{variant:"h5",gutterBottom:!0},Object(V.decode)(t.name)),p.a.createElement(x.a,{variant:"body2"},"by ",t.member.name," on ",t.date," \u2014"," ",p.a.createElement(_.a,{target:"_blank",rel:"noopener noreferrer",color:"primary",href:"".concat(h).concat(e.currentSet.id,"#setting").concat(t.id)},"View on The Session.org")),p.a.createElement(Z,{tune:t,type:e.currentSet.type}))})))))}))));var Xe=Object(C.b)((function(e,t){return{items:"tunes"===t.folder?e.tunes.tunes:e.sets.sets,isFetching:e.tunes.isFetching,userChanged:e.session.currentUser.id!==t.userId,filters:e.ui.tuneFilters}}),{fetchTuneBook:k,fetchSets:Ke})(Object(c.withSnackbar)(Object(o.e)((function(e){var t=e.match,n=t.url,a=t.params.folder,r=e.items,i=e.isFetching,s=e.filters,c="tunes"===a,l=new g.a(r,He),u=(s.search?l.search(s.search||"").map((function(e){return e.item})):r).filter((function(e){return!s.tuneType||!e.type||e.type===s.tuneType}));return p.a.createElement("div",null,i?p.a.createElement(he,null):p.a.createElement(Ce,{items:u}),p.a.createElement(_e,null,p.a.createElement(Qe,{folder:a})),p.a.createElement(o.a,{path:"".concat(n,"/:tuneId?")},c?p.a.createElement(Ee,{referrer:n}):p.a.createElement(Ye,{referrer:n})))})))),$e=n(229),Ze=n.n($e),et=n(228),tt=n.n(et),nt=n(227),at=n.n(nt),rt=Object(pe.a)({list:{width:250},fullList:{width:"auto"}});var ot=Object(C.b)((function(e){var t,n;return{tunesCount:null===(t=e.tunes.meta)||void 0===t?void 0:t.total,setsCount:null===(n=e.sets.meta)||void 0===n?void 0:n.total,currentUser:e.session.currentUser}}))(Object(o.e)((function(e){var t=rt(),n=Object(C.c)(),a=[{label:"Sets ".concat(e.setsCount?"("+e.setsCount+")":""),to:"/tunebook/".concat(e.currentUser.id,"/sets"),icon:p.a.createElement(at.a,null)},{label:"Tunes ".concat(e.tunesCount?"("+e.tunesCount+")":""),to:"/tunebook/".concat(e.currentUser.id,"/tunes"),icon:p.a.createElement(be.a,null)}],r=function(){e.onClose(),n({type:"LOGOUT"}),e.history.push("/")};return p.a.createElement(Ne.a,{anchor:"left",open:e.open,onClose:e.onClose},p.a.createElement("div",{role:"presentation",className:t.list},p.a.createElement(ye.a,null,p.a.createElement(Oe.a,{button:!0,key:"Change user",onClick:r},p.a.createElement(Te.a,null,p.a.createElement(tt.a,null)),p.a.createElement(je.a,{primary:"Change user"})),a.map((function(t){return p.a.createElement(Oe.a,{button:!0,key:t.label,onClick:function(){return function(t){e.onClose(),e.history.push(t.to)}(t)}},p.a.createElement(Te.a,null,t.icon),p.a.createElement(je.a,{primary:t.label}))})),p.a.createElement(we.a,null),p.a.createElement(Oe.a,{button:!0,key:"nav-help",href:"mailto:accounts+foinn@rorsvort.com",component:"a"},p.a.createElement(Te.a,null,p.a.createElement(Ze.a,null)),p.a.createElement(je.a,{primary:"Help"})))))}))),it=[{placement:"center",target:"body",title:"Wecome to Foinn!",content:"You can now easily access you tunes and sets from thesession.org in a nicer way and use it to practice or in a session. Due to restrictions of thesession.org, we can only read what you have configured there. Therefore to add or remove tunes in your tunebook or sets, you\u2019ll need to login to thesession.org and make your changes there."},{target:"#tunesList",title:"Tunes list",placement:"auto",content:"Click on a tune to see all the settings and musicsheet"},{target:"#filtersForm",title:"Search & Filters",placement:"left",content:"Click on this button to access the app navigation"},{target:"#navToggle",title:"Navigation",placement:"bottom",content:"Access the app navigation for Sets, tunes, help or change user"}],st={options:{primaryColor:"#357a38"},tooltipContainer:{textAlign:"left"},tooltipContent:{padding:"20px 0"}},ct=n(528),lt=n(231),ut=n.n(lt),mt=n(230),pt=n.n(mt),dt=n(232),gt=n.n(dt);var ht=Object(L.a)(Ue)((function(e){var t=e.classes,n=e.folder,a=e.onToggleFilters,r=e.onDrawerToggle;return p.a.createElement(I.a,null,p.a.createElement(U.a,{id:"navToggle",color:"inherit","aria-label":"open drawer",onClick:r,className:t.navIconHide},p.a.createElement(ut.a,null)),p.a.createElement("div",{className:t.flex},p.a.createElement(Fe.a,{smDown:!0},p.a.createElement("img",{src:pt.a,alt:"Foinn",className:t.logo})),p.a.createElement(x.a,{className:t.title,variant:"h6"},p.a.createElement(Fe.a,{smDown:!0}," \u2014 "),De()(n))),p.a.createElement(Fe.a,{mdUp:!0},p.a.createElement(U.a,{color:"inherit","aria-label":"open drawer",onClick:a,className:t.navIconHide},p.a.createElement(gt.a,null))))}));var ft=Object(o.e)(Object(C.b)((function(e){return{showDrawer:e.ui.showDrawer}}),{logout:w,toggleFilters:xe,toggleDrawer:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:"TOGGLE_DRAWER",forceClose:e}}})(Object(c.withSnackbar)(Object(L.a)(Ue)((function(e){var t=Object(ct.a)(),n=Object(l.a)(t,2),a=n[0],r=n[1],o=Object(C.c)(),i=e.classes,s=e.showDrawer,c=e.enqueueSnackbar,g=e.closeSnackbar,h=e.match.params,f=h.folder,E=h.userId;Object(m.useEffect)((function(){a.hadConfigTour||r("hadConfigTour",!0);var e=c("Syncing tunebook!",{variant:"success",persist:!0,action:p.a.createElement(de.a,{size:20})});Promise.all([o(Ke(E)),o(k(E))]).finally((function(){g(e)}))}),[a,r,E,Ke,k]);var v=function(){e.toggleDrawer()};return p.a.createElement("div",{className:i.root},p.a.createElement(u.a,{steps:it,continuous:!0,showProgress:!0,run:!a.hadConfigTour,disableScrolling:!0,styles:st}),p.a.createElement(d.a,{className:i.appBar},p.a.createElement(ht,{folder:f,onToggleFilters:function(){e.toggleFilters()},onDrawerToggle:v})),p.a.createElement(ot,{onClose:v,open:s}),p.a.createElement("div",{className:i.content},p.a.createElement(Xe,{userId:E,folder:f})))}))))),Et=n(125),vt=n(526),bt=n(233),yt=n.n(bt),Ot=n(241),Tt=n(525),jt=n(234),wt=n.n(jt),St=n(235),kt=n.n(St),Ct=n(236),Ft=n.n(Ct);function Nt(e){var t=e.classes,n=e.autoFocus,r=e.value,o=e.ref,i=Object(Ot.a)(e,["classes","autoFocus","value","ref"]);return p.a.createElement(Pe.a,{className:t.textField,autoFocus:n,value:r,variant:"outlined",inputRef:o,styles:{width:"100%"},InputProps:Object(a.a)({className:t.input},i)})}function It(e,t){var n=t.query,a=t.isHighlighted,r=kt()(e.name,n),o=Ft()(e.name,r);return p.a.createElement(Tt.a,{selected:a,component:"div"},p.a.createElement("div",null,o.map((function(e,t){return e.highlight?p.a.createElement("span",{key:t,style:{fontWeight:300}},e.text):p.a.createElement("strong",{key:t,style:{fontWeight:500}},e.text)}))))}function Ut(e){var t=e.containerProps,n=e.children;return p.a.createElement(Et.a,Object.assign({},t,{square:!0}),n)}function xt(e){return e.name}var Rt=function(e){Object(G.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(B.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={value:e.props.userName||"",selectedSuggestion:{},suggestions:[]},e.handleSuggestionsFetchRequested=function(t){var n=t.value;if(n.length<4)return!1;S(n).then((function(t){if(void 0===t)return[];e.setState({suggestions:t.data.members})}))},e.handleSuggestionsClearRequested=function(){e.setState({suggestions:[]})},e.handleChange=function(t,n){var a=n.newValue;e.setState({value:a})},e}return Object(W.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.history;return p.a.createElement(wt.a,{theme:{container:t.suggestionsContainer,suggestionsContainerOpen:t.suggestionsContainerOpen,suggestionsList:t.suggestionsList,suggestion:t.suggestion},renderInputComponent:Nt,suggestions:this.state.suggestions,onSuggestionsFetchRequested:this.handleSuggestionsFetchRequested,onSuggestionsClearRequested:this.handleSuggestionsClearRequested,onSuggestionSelected:function(e,t){return function(e,t){var n=e.suggestion;me.dispatch(j(n)),t.push("/tunebook/".concat(n.id,"/tunes"))}(t,n)},renderSuggestionsContainer:Ut,getSuggestionValue:xt,renderSuggestion:It,inputProps:{autoFocus:!0,classes:t,placeholder:"Search by typing your user name",value:this.state.value,onChange:this.handleChange}})}}]),n}(m.Component),_t=Object(L.a)((function(e){return{suggestionsContainer:{position:"relative",zIndex:999},suggestionsContainerOpen:{position:"absolute",marginBottom:e.spacing(3),left:0,right:0},suggestion:{display:"block"},suggestionsList:{margin:0,padding:0,listStyleType:"none"},textField:{width:"100%"}}}))(Object(o.e)(Rt)),Lt=n(237),Dt=n.n(Lt),Pt=n(238),Bt=n.n(Pt);var Wt=Object(C.b)((function(e){return{currentUser:e.session.currentUser,userName:Dt()(e.session.currentUser)?"":e.session.currentUser.name}}))(Object(L.a)((function(e){return{container:{height:"100vh"},paper:{margin:"0 auto",padding:"20px"},button:{color:"white",marginTop:e.spacing(2)},home:{background:e.palette.primary[500]},logo:{maxWidth:"100%",margin:"0 auto 40px",display:"block"},title:{fontSize:21,fontWeight:"normal",textAlign:"center",lineHeight:1.5,color:"white",opacity:.8},login:{alignSelf:"flex-start"}}}))((function(e){var t=e.classes,n=e.userName,a=e.currentUser;return p.a.createElement(yt.a,{className:t.home},p.a.createElement(R.a,{container:!0,alignItems:"center",justify:"center",direction:"row",className:t.container},p.a.createElement(R.a,{item:!0,xs:12,md:12},p.a.createElement("img",{src:Bt.a,alt:"Foinn app",className:t.logo}),p.a.createElement("h1",{className:t.title},"Browse your tunes and sets from Thessession.org ",p.a.createElement("br",null),p.a.createElement("small",null,"The ideal session companion"))),p.a.createElement(R.a,{item:!0,xs:12,md:4,className:t.login},p.a.createElement(Et.a,{className:t.paper,elevation:8},p.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0},"To start, select your"," ",p.a.createElement(_.a,{href:"https://thesession.org",color:"primary",target:"_blank",rel:"noopener noreferrer"},"TheSession.org")," ","user name."),p.a.createElement(_t,{userName:n}),n&&p.a.createElement(vt.a,{to:"/tunebook/".concat(a.id,"/tunes"),className:t.button,component:r.b,variant:"contained",color:"primary"},"Open tunebook")))))}))),At=n(7),Gt=n.n(At),Vt=n(157),zt=n.n(Vt),qt=n(239),Mt=n.n(qt),Qt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ht(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Kt=Object(i.a)({palette:{primary:Object(a.a)({main:"#357a38"},zt.a),secondary:zt.a,error:Mt.a},typography:{h1:{fontFamily:"'Kaushan Script', 'cursive'",fontSize:"2.8125rem"}}}),Jt=p.a.createElement(s.a,{theme:Kt},p.a.createElement(C.a,{store:me},p.a.createElement(c.SnackbarProvider,null,p.a.createElement(r.a,null,p.a.createElement("div",null,p.a.createElement(o.a,{exact:!0,path:"/"},p.a.createElement(Wt,null)),p.a.createElement(o.a,{path:"/tunebook/:userId/:folder"},p.a.createElement(ft,null)))))));Gt.a.render(Jt,document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");Qt?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ht(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):Ht(e)}))}}()}},[[259,1,2]]]);
//# sourceMappingURL=main.b8465e63.chunk.js.map