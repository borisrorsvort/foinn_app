{"version":3,"sources":["constants/actionTypes.js","actions/session.js","actions/tuneBook.js","helpers/abcHelper.js","components/SheetMusic.js","reducers/tunes.js","reducers/session.js","reducers/index.js","reducers/ui.js","reducers/sets.js","store.js","helpers/localStorage.js","components/PageLoading/index.js","components/TuneDialogNav/index.js","components/TuneSettingHeader/index.js","components/Tune.js","components/TuneList.js","styles/layout.js","constants/layout.js","actions/ui.js","components/FiltersDrawer.js","components/FiltersForm/TuneFiltersForm.js","helpers/searchHelper.js","actions/sets.js","components/Set.js","components/Tunebook.js","components/NavDrawer/index.js","helpers/welcomeTour.js","images/logo-small.svg","components/AppBarContent/index.js","App.js","components/NameAutoComplete.js","images/logo.svg","components/Home.js","registerServiceWorker.js","index.js"],"names":["REQUEST_TUNEBOOK","RECEIVE_TUNEBOOK","REQUEST_TUNE","RECEIVE_TUNE","REQUEST_SETS","RECEIVE_SETS","REQUEST_SET","RECEIVE_SET","TOGGLE_DRAWER","TOGGLE_FILTERS","UPDATE_TUNE_FILTERS","UPDATE_CURRENT_USER","LOGOUT","MEMBER_URL","updateCurrentUser","currentUser","type","logout","fetchUserId","query","axios","get","catch","error","console","log","fetchTuneBook","memberId","dispatch","types","id","responses","fetch","page","rsps","Promise","resolve","params","format","perpage","then","response","push","data","pages","all","tunes","sortBy","flatMap","meta","receiveTuneBook","total","length","fetchTune","tuneId","tune","currentTune","tuneTypes","jig","key","tempo","reel","hornpipe","polka","slide","waltz","barndance","strathspey","mazurka","march","abcReformatter","name","undefined","abc","tuneType","split","join","tuneName","timeSignature","tuneKey","he","decode","SheetMusic","abcjs","renderAbc","this","el","props","title","paddingright","paddingleft","responsive","add_classes","abcjsMidi","renderMidi","midi","inlineControls","selectionToggle","loopToggle","standard","startPlaying","nextProps","newWidth","containerWidth","className","classes","root","ref","Component","withStyles","marginBottom","marginTop","reactDimensions","state","isFetching","action","Object","assign","session","index","ui","showDrawer","showFilters","tuneFilters","forceClose","filters","sets","currentSet","add","persistedState","serializedState","localStorage","getItem","JSON","parse","e","loadState","middlewares","thunk","LogRocket","init","composeEnhancers","compose","store","createStore","combineReducers","rootReducer","applyMiddleware","subscribe","stringify","setItem","saveState","getState","useStyles","makeStyles","theme","height","display","alignItems","justifyContent","PageLoading","CircularProgress","withRouter","folder","path","match","items","useSelector","currentIndex","findIndex","previousId","nextId","Box","style","marginLeft","Button","color","component","Link","to","replace","spacer","margin","spacing","TuneSettingHeader","setting","Typography","variant","gutterBottom","mb","member","date","target","rel","href","url","contained","startIcon","YouTube","Transition","React","forwardRef","Slide","direction","connect","padding","settings","mixins","gutters","paddingTop","paddingBottom","flex","useEffect","tuneLoaded","handleClose","history","referrer","Dialog","fullScreen","open","onClose","TransitionComponent","AppBar","appBar","Toolbar","IconButton","edge","onClick","aria-label","p","Grid","container","justify","item","md","map","i","isTune","itemName","substring","List","ListItem","button","ListItemIcon","LibraryMusic","ListItemText","primary","secondary","set","capitalize","Divider","layoutStyles","flexGrow","zIndex","overflowX","overflowY","position","drawer","transition","transitions","create","easing","easeOut","duration","enteringScreen","menuButton","marginRight","hide","drawerPaper","width","top","right","drawerHeader","toolbar","logo","transform","greetings","opacity","content","sharp","leavingScreen","breakpoints","up","toggleFilters","FiltersDrawer","handleFiltersToggle","element","divRef","Hidden","mdUp","Drawer","anchor","paper","ModalProps","keepMounted","children","smDown","implementation","formControl","currentFilters","updateTuneFilters","handleSearchChange","debounce","value","search","TextField","label","onChange","defaultValue","placeholder","InputLabelProps","shrink","fullWidth","FormControl","FormLabel","RadioGroup","FormControlLabel","control","Radio","keys","startCase","fuseoptions","includeScore","threshold","findAllMatches","fetchSets","receiveSets","fetchSet","setId","userId","setLoaded","xsDown","userChanged","withSnackbar","fuse","Fuse","withType","filter","searchTuneType","includes","searchSetsSettingsType","list","fullList","tunesCount","setsCount","useDispatch","icon","handleLogout","role","handleClick","steps","placement","stepsStyles","options","primaryColor","tooltipContainer","textAlign","tooltipContent","onToggleFilters","onDrawerToggle","navIconHide","src","smallLogoUrl","alt","toggleDrawer","useCookies","cookies","setCookie","enqueueSnackbar","closeSnackbar","hadConfigTour","snack","persist","size","finally","handleDrawerToggle","continuous","showProgress","run","disableScrolling","styles","renderInput","inputProps","autoFocus","other","textField","inputRef","InputProps","input","renderSuggestion","suggestion","isHighlighted","matches","parts","MenuItem","selected","part","highlight","fontWeight","text","renderSuggestionsContainer","containerProps","Paper","square","getSuggestionValue","NameAutoComplete","userName","selectedSuggestion","suggestions","handleSuggestionsFetchRequested","setState","members","handleSuggestionsClearRequested","handleChange","event","newValue","suggestionsContainer","suggestionsContainerOpen","suggestionsList","renderInputComponent","onSuggestionsFetchRequested","onSuggestionsClearRequested","onSuggestionSelected","_e","left","listStyleType","isEmpty","home","background","palette","maxWidth","fontSize","lineHeight","login","alignSelf","xs","logoUrl","elevation","isLocalhost","Boolean","window","location","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","createMuiTheme","main","green","red","typography","h1","fontFamily","app","exact","ReactDOM","render","document","getElementById","URL","process","origin","addEventListener","status","headers","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.4ff5bb7a.chunk.js","sourcesContent":["export const REQUEST_TUNEBOOK = \"REQUEST_TUNEBOOK\";\nexport const RECEIVE_TUNEBOOK = \"RECEIVE_TUNEBOOK\";\nexport const REQUEST_TUNE = \"REQUEST_TUNE\";\nexport const RECEIVE_TUNE = \"RECEIVE_TUNE\";\n\nexport const REQUEST_SETS = \"REQUEST_SETS\";\nexport const RECEIVE_SETS = \"RECEIVE_SETS\";\nexport const REQUEST_SET = \"REQUEST_SET\";\nexport const RECEIVE_SET = \"RECEIVE_SET\";\n\nexport const TOGGLE_DRAWER = \"TOGGLE_DRAWER\";\nexport const TOGGLE_FILTERS = \"TOGGLE_FILTERS\";\nexport const UPDATE_TUNE_FILTERS = \"UPDATE_TUNE_FILTERS\";\nexport const UPDATE_CURRENT_USER = \"UPDATE_CURRENT_USER\";\nexport const REQUEST_USER_ID = \"UPDATE_USER_ID\";\nexport const LOGOUT = \"LOGOUT\";\n\nexport const TUNE_URL = \"https://thesession.org/tunes/\";\n\nexport const MEMBER_URL = \"https://thesession.org/members/\";\n","import {\n  LOGOUT,\n  MEMBER_URL,\n  REQUEST_USER_ID,\n  UPDATE_CURRENT_USER\n} from \"../constants/actionTypes\";\n\nimport axios from \"axios\";\n\nexport function updateCurrentUser(currentUser) {\n  return {\n    type: UPDATE_CURRENT_USER,\n    currentUser: currentUser\n  };\n}\n\nexport function logout() {\n  return {\n    type: LOGOUT\n  };\n}\n\nexport function requestUserId() {\n  return {\n    type: REQUEST_USER_ID\n  };\n}\n\nexport const fetchUserId = (query) => {\n  return axios\n    .get(`${MEMBER_URL}search?q=${query}&format=json`)\n    .catch(function (error) {\n      console.log(error);\n    });\n};\n\nexport const fetchUser = (userId) => {\n  return axios\n    .get(`${MEMBER_URL}/${userId}&format=json`)\n    .catch(function (error) {\n      console.log(error);\n    });\n};\n","import * as types from \"../constants/actionTypes\";\nimport flatMap from \"lodash/flatMap\";\nimport sortBy from \"lodash/sortBy\";\nimport axios from \"axios\";\nimport { updateCurrentUser } from \"./session\";\n\nfunction requestTuneBook() {\n  return {\n    type: types.REQUEST_TUNEBOOK\n  };\n}\n\nfunction receiveTuneBook(tunes, meta) {\n  return {\n    type: types.RECEIVE_TUNEBOOK,\n    tunes,\n    meta\n  };\n}\n\nfunction requestTune() {\n  return {\n    type: types.REQUEST_TUNE\n  };\n}\n\nfunction receiveTune(tune) {\n  return {\n    type: types.RECEIVE_TUNE,\n    currentTune: tune\n  };\n}\n\nexport const fetchTuneBook = (memberId) => (dispatch) => {\n  dispatch(requestTuneBook());\n  dispatch(updateCurrentUser({ id: memberId }));\n\n  let responses = [];\n\n  function fetch(page, rsps) {\n    return new Promise((resolve) => {\n      axios\n        .get(`${types.MEMBER_URL}${memberId}/tunebook`, {\n          params: { page: page, format: \"json\", perpage: 50 }\n        })\n        .then((response) => {\n          rsps.push(response);\n          const {\n            data: { page, pages }\n          } = response;\n          if (!!page && page < pages) {\n            axios.all([fetch(page + 1, rsps)]).then(() => resolve());\n          } else {\n            resolve();\n          }\n        });\n    });\n  }\n\n  return fetch(1, responses).then(() => {\n    const tunes = sortBy(\n      flatMap(responses, (response) => response.data.tunes),\n      [\"name\"]\n    );\n    dispatch(receiveTuneBook(tunes, { total: tunes.length }));\n  });\n};\n\nexport const fetchTune = (tuneId) => (dispatch) => {\n  dispatch(requestTune());\n  return axios\n    .get(`${types.TUNE_URL}${tuneId}?format=json`)\n    .then(function (response) {\n      dispatch(receiveTune(response.data));\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n};\n","import he from \"he\";\n\nexport const tuneTypes = {\n  jig: {\n    key: \"3/4\",\n    tempo: \"140\"\n  },\n  reel: {\n    key: \"4/4\",\n    tempo: \"180\"\n  },\n  \"slip jig\": {\n    key: \"9/8\",\n    tempo: \"260\"\n  },\n  hornpipe: {\n    key: \"4/4\",\n    tempo: \"180\"\n  },\n  polka: {\n    key: \"2/4\",\n    tempo: \"100\"\n  },\n  slide: {\n    key: \"12/8\",\n    tempo: \"250\"\n  },\n  waltz: {\n    key: \"3/4\",\n    tempo: \"160\"\n  },\n  barndance: {\n    key: \"4/4\",\n    tempo: \"140\"\n  },\n  strathspey: {\n    key: \"4/4\",\n    tempo: \"140\"\n  },\n  \"three-two\": {\n    key: \"3/2\",\n    tempo: \"140\"\n  },\n  mazurka: {\n    key: \"3/4\",\n    tempo: \"140\"\n  },\n  march: {\n    key: \"4/4\",\n    tempo: \"140\"\n  }\n};\n\nexport const abcReformatter = (tune, type, name) => {\n  if (tune.abc === undefined) {\n    return \"\";\n  }\n\n  const tuneType = !!type ? type : tune.type;\n  const abc = tune.abc.split(\"! \").join(\"\\n\");\n  const start = `X: 1`;\n  const tuneName = `T: ${name}`;\n  const timeSignature = `M: ${tuneTypes[tuneType].key}`;\n  const tuneKey = `K: ${tune.key}`;\n  const noteLength = `L: 1/8`;\n  const tempo = `Q: ${tuneTypes[tuneType]?.tempo}`;\n\n  return he.decode(\n    [start, tuneName, timeSignature, tempo, noteLength, tuneKey, abc].join(\"\\n\")\n  );\n};\n","import React, { Component } from \"react\";\n\nimport { abcReformatter } from \"../helpers/abcHelper\";\nimport abcjs from \"abcjs\";\nimport abcjsMidi from \"abcjs/midi\";\nimport he from \"he\";\nimport reactDimensions from \"react-dimensions\";\nimport { withStyles } from \"@material-ui/core\";\n\nconst styles = () => ({\n  root: {\n    marginBottom: 100,\n    marginTop: 50\n  }\n});\n\nclass SheetMusic extends Component {\n  renderAbc() {\n    const engraverParams = {\n      paddingright: 0,\n      paddingleft: 0,\n      responsive: \"resize\",\n      add_classes: true\n    };\n\n    abcjs.renderAbc(\n      this.el,\n      abcReformatter(this.props.tune, this.props.type, this.title()),\n      {},\n      engraverParams\n    );\n  }\n\n  renderMidi() {\n    abcjsMidi.renderMidi(\n      this.midi,\n      abcReformatter(this.props.tune, this.props.type, this.title()),\n      {},\n      {\n        inlineControls: {\n          selectionToggle: false,\n          loopToggle: false,\n          standard: true,\n          tempo: false,\n          startPlaying: false\n        }\n      },\n      {}\n    );\n  }\n\n  title() {\n    return this.props.tune.name\n      ? `${he.decode(this.props.tune.name)} (${this.props.tune.key} - ${\n          this.props.tune.type\n        })`\n      : `${this.props.tune.key} - ${this.props.type}`;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const newWidth = nextProps.containerWidth;\n    if (this.props.containerWidth !== newWidth) {\n      this.renderAbc(this.props.containerWidth);\n      this.renderMidi(this.props.containerWidth);\n    }\n  }\n\n  componentDidMount() {\n    this.renderAbc(this.props.containerWidth);\n    this.renderMidi(this.props.containerWidth);\n  }\n\n  render() {\n    return (\n      <div className={this.props.classes.root}>\n        <div ref={(el) => (this.el = el)} />\n        <div ref={(el) => (this.midi = el)} />\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(reactDimensions()(SheetMusic));\n","import {\n  LOGOUT,\n  RECEIVE_TUNE,\n  RECEIVE_TUNEBOOK,\n  REQUEST_TUNE,\n  REQUEST_TUNEBOOK\n} from \"../constants/actionTypes\";\n\nfunction tunes(\n  state = {\n    isFetching: false,\n    tunes: [],\n    meta: {},\n    currentTune: {\n      isFetching: false\n    }\n  },\n  action\n) {\n  switch (action.type) {\n    case LOGOUT:\n      return {\n        ...state,\n        tunes: []\n      };\n    case REQUEST_TUNEBOOK:\n      return Object.assign({}, state, {\n        isFetching: true\n      });\n    case RECEIVE_TUNEBOOK:\n      return {\n        ...state,\n        isFetching: false,\n        tunes: action.tunes,\n        meta: action.meta\n      };\n    case REQUEST_TUNE:\n      return Object.assign({}, state, {\n        currentTune: {\n          isFetching: true\n        }\n      });\n    case RECEIVE_TUNE:\n      const currentTune = action.currentTune;\n      return Object.assign({}, state, {\n        currentTune: {\n          ...currentTune,\n          isFetching: false\n        }\n      });\n    default:\n      return state;\n  }\n}\n\nexport default tunes;\n","import { LOGOUT, UPDATE_CURRENT_USER } from \"../constants/actionTypes\";\n\nfunction session(\n  state = {\n    currentUser: {}\n  },\n  action\n) {\n  switch (action.type) {\n    case UPDATE_CURRENT_USER:\n      return {\n        ...state,\n        currentUser: action.currentUser\n      };\n    case LOGOUT:\n      return {\n        ...state,\n        currentUser: {}\n      };\n    default:\n      return state;\n  }\n}\n\nexport default session;\n","import tunes from \"./tunes\";\nimport sets from \"./sets\";\nimport ui from \"./ui\";\nimport session from \"./session\";\n\nconst index = {\n  ui,\n  session,\n  tunes,\n  sets\n};\n\nexport default index;\n","import {\n  TOGGLE_DRAWER,\n  TOGGLE_FILTERS,\n  UPDATE_TUNE_FILTERS\n} from \"../constants/actionTypes\";\n\nfunction ui(\n  state = {\n    showDrawer: false,\n    showFilters: false,\n    tuneFilters: {}\n  },\n  action\n) {\n  switch (action.type) {\n    case TOGGLE_DRAWER:\n      return {\n        ...state,\n        showDrawer: action.forceClose ? false : !state.showDrawer\n      };\n    case TOGGLE_FILTERS:\n      return {\n        ...state,\n        showFilters: action.forceClose ? false : !state.showFilters\n      };\n    case UPDATE_TUNE_FILTERS:\n      return {\n        ...state,\n        tuneFilters: action.filters\n      };\n    default:\n      return state;\n  }\n}\n\nexport default ui;\n","import {\n  LOGOUT,\n  RECEIVE_SET,\n  RECEIVE_SETS,\n  REQUEST_SET,\n  REQUEST_SETS\n} from \"../constants/actionTypes\";\nfunction sets(\n  state = {\n    isFetching: false,\n    sets: [],\n    meta: {},\n    currentSet: {\n      isFetching: false\n    }\n  },\n  action\n) {\n  switch (action.type) {\n    case LOGOUT:\n      return {\n        ...state,\n        sets: []\n      };\n    case REQUEST_SETS:\n      return Object.assign({}, state, {\n        isFetching: true\n      });\n    case RECEIVE_SETS:\n      const sets = action.add ? [...state.sets, ...action.sets] : action.sets;\n      return Object.assign({}, state, {\n        isFetching: false,\n        sets: sets,\n        meta: action.meta\n      });\n    case REQUEST_SET:\n      return Object.assign({}, state, {\n        currentSet: {\n          isFetching: true\n        }\n      });\n    case RECEIVE_SET:\n      const currentSet = action.currentSet;\n      return Object.assign({}, state, {\n        currentSet: {\n          ...currentSet,\n          isFetching: false\n        }\n      });\n    default:\n      return state;\n  }\n}\n\nexport default sets;\n","import { applyMiddleware, compose, createStore, combineReducers } from \"redux\";\nimport { loadState, saveState } from \"./helpers/localStorage\";\n\nimport LogRocket from \"logrocket\";\nimport rootReducer from \"./reducers/index\";\nimport thunk from \"redux-thunk\";\n\nconst persistedState = loadState();\n\nconst middlewares = [thunk];\n\nif (process.env.NODE_ENV !== \"development\") {\n  LogRocket.init(\"hh8o22/foinn\");\n}\n\nconst composeEnhancers =\n  process.env.NODE_ENV === \"development\" &&\n  typeof window === \"object\" &&\n  window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\n        // Specify extensionâ€™s options like name, actionsBlacklist, actionsCreators, serialize...\n      })\n    : compose;\n\nconst store = createStore(\n  combineReducers(rootReducer),\n  persistedState,\n  composeEnhancers(applyMiddleware(...middlewares))\n);\n\nstore.subscribe(() => {\n  saveState({\n    session: store.getState().session,\n    tunes: store.getState().tunes,\n    sets: store.getState().sets\n  });\n});\n\nexport default store;\n","export const loadState = () => {\n  try {\n    const serializedState = localStorage.getItem(\"state\");\n    if (serializedState === null) {\n      return undefined;\n    }\n\n    return JSON.parse(serializedState);\n  } catch (e) {\n    return undefined;\n  }\n};\n\nexport const saveState = state => {\n  try {\n    const serializedState = JSON.stringify(state);\n    localStorage.setItem(\"state\", serializedState);\n  } catch (e) {\n    return undefined;\n  }\n};\n","import React from \"react\";\nimport { CircularProgress, makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: `calc(100vh - 64px)`,\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n}));\n\nfunction PageLoading() {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <CircularProgress />\n    </div>\n  );\n}\n\nexport default PageLoading;\n","import { Box, Button } from \"@material-ui/core\";\nimport React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport findIndex from \"lodash/findIndex\";\nimport { Link, withRouter } from \"react-router-dom\";\n\nfunction TuneDialogNav(props) {\n  const {\n    tuneId,\n    folder,\n    match: { path }\n  } = props;\n  const items = useSelector((state) => state[folder][folder]);\n  const currentIndex = findIndex(items, { id: tuneId });\n  const previousId = items[currentIndex - 1]?.id;\n  const nextId = items[currentIndex + 1]?.id;\n\n  return (\n    <Box style={{ marginLeft: \"auto\" }}>\n      {previousId && (\n        <Button\n          color=\"inherit\"\n          component={Link}\n          to={path.replace(\":tuneId?\", previousId)}\n        >\n          Previous\n        </Button>\n      )}\n      {nextId && (\n        <Button\n          color=\"inherit\"\n          component={Link}\n          to={path.replace(\":tuneId?\", nextId)}\n        >\n          Next\n        </Button>\n      )}\n    </Box>\n  );\n}\n\nexport default withRouter(TuneDialogNav);\n","import { Box, Button, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { YouTube } from \"@material-ui/icons\";\nimport { decode } from \"he\";\nimport React from \"react\";\n\nconst useStyles = makeStyles((theme) => ({\n  spacer: {\n    margin: theme.spacing(0, 2, 2, 0)\n  }\n}));\n\nconst TuneSettingHeader = ({ setting }) => {\n  const classes = useStyles();\n  return (\n    <>\n      <Typography variant=\"h5\" gutterBottom>\n        {setting.name ? decode(setting.name) : `Setting #${setting.id}`}\n      </Typography>\n      <Box mb={2}>\n        <Typography variant=\"body2\">\n          by {setting.member.name} on {setting.date}\n        </Typography>\n      </Box>\n      <Button\n        className={classes.spacer}\n        variant=\"outlined\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        color=\"primary\"\n        href={setting.url}\n      >\n        View on the Session.org\n      </Button>\n      {setting.name && (\n        <Button\n          className={classes.spacer}\n          variant=\"outlined\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          color=\"primary\"\n          contained\n          startIcon={<YouTube />}\n          href={`https://www.youtube.com/results?search_query=${decode(\n            setting.name\n          )}`}\n        >\n          Search on Youtube\n        </Button>\n      )}\n    </>\n  );\n};\n\nexport default TuneSettingHeader;\n","import {\n  Grid,\n  Typography,\n  withStyles,\n  Dialog,\n  Slide,\n  AppBar,\n  IconButton,\n  Toolbar,\n  Link,\n  Box\n} from \"@material-ui/core\";\nimport React, { useEffect } from \"react\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport { withRouter } from \"react-router-dom\";\nimport SheetMusic from \"./SheetMusic\";\nimport { connect } from \"react-redux\";\nimport { fetchTune } from \"../actions/tuneBook\";\nimport he from \"he\";\nimport store from \"../store\";\nimport PageLoading from \"./PageLoading\";\nimport TuneDialogNav from \"./TuneDialogNav\";\nimport TuneSettingHeader from \"./TuneSettingHeader\";\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nconst styles = (theme) => ({\n  root: {\n    marginTop: 100,\n    padding: theme.spacing(0, 3)\n  },\n  settings: theme.mixins.gutters({\n    paddingTop: theme.spacing(),\n    paddingBottom: theme.spacing()\n  }),\n  title: {\n    marginLeft: theme.spacing(2),\n    flex: 1\n  }\n});\n\nfunction Tune(props) {\n  useEffect(() => {\n    props.tuneId && store.dispatch(fetchTune(props.tuneId));\n  }, [props.tuneId]);\n\n  const tuneLoaded = props.currentTune?.name !== undefined;\n\n  const handleClose = () => props.history.push(props.referrer);\n\n  return (\n    <Dialog\n      fullScreen\n      open={!!props.tuneId}\n      onClose={handleClose}\n      TransitionComponent={Transition}\n    >\n      <AppBar className={props.classes.appBar}>\n        <Toolbar>\n          <IconButton\n            edge=\"start\"\n            onClick={handleClose}\n            aria-label=\"close\"\n            color=\"inherit\"\n          >\n            <CloseIcon />\n          </IconButton>\n          <Typography variant=\"h6\" className={props.classes.title}>\n            {tuneLoaded && he.decode(props.currentTune.name)}\n          </Typography>\n          <TuneDialogNav tuneId={props.currentTune.id} folder=\"tunes\" />\n        </Toolbar>\n      </AppBar>\n      {!tuneLoaded && <PageLoading />}\n      {tuneLoaded && (\n        <Box p={2}>\n          <Grid container justify=\"center\" className={props.classes.root}>\n            <Grid item md={12} md={10} lg={9}>\n              {props.currentTune.settings.map((setting, i) => {\n                return (\n                  <div key={`${setting.id}-${i}`}>\n                    <TuneSettingHeader setting={setting} />\n                    <SheetMusic tune={setting} type={props.currentTune.type} />\n                  </div>\n                );\n              })}\n            </Grid>\n          </Grid>\n        </Box>\n      )}\n    </Dialog>\n  );\n}\n\nconst mapStateToProps = (state, props) => ({\n  currentTune: state.tunes.currentTune,\n  isFetching: state.tunes.currentTune.isFetching,\n  tuneId: props.match.params.tuneId\n});\n\nexport default withRouter(connect(mapStateToProps)(withStyles(styles)(Tune)));\n","import React, { Fragment } from \"react\";\nimport MusicNote from \"@material-ui/icons/MusicNote\";\nimport { withRouter } from \"react-router-dom\";\nimport he from \"he\";\nimport {\n  ListItem,\n  ListItemIcon,\n  makeStyles,\n  List,\n  ListItemText,\n  Divider,\n  capitalize\n} from \"@material-ui/core\";\nimport { Link } from \"react-router-dom\";\nimport { LibraryMusic } from \"@material-ui/icons\";\n\nconst useStyles = makeStyles({});\n\nfunction TuneList(props) {\n  const classes = useStyles();\n  const {\n    items,\n    match: {\n      url,\n      params: { folder }\n    }\n  } = props;\n  const isTune = folder === \"tunes\";\n  const itemName = (item) =>\n    item &&\n    (item.name.length > 150\n      ? he.decode(item.name).substring(0, 150) + \"...\"\n      : he.decode(item.name));\n  return (\n    <List className={classes.root} id=\"tunesList\">\n      {items.map((item, index) => (\n        <li key={`${index}-item.id`}>\n          <ListItem component={Link} button to={`${url}/${item.id}`}>\n            <ListItemIcon>\n              {isTune ? <MusicNote /> : <LibraryMusic />}\n            </ListItemIcon>\n            <ListItemText\n              primary={itemName(item)}\n              secondary={\n                item.type ||\n                item.settings.map((set) => capitalize(set.type)).join(\", \")\n              }\n            />\n          </ListItem>\n          <Divider variant=\"inset\" />\n        </li>\n      ))}\n    </List>\n  );\n}\n\nexport default withRouter(TuneList);\n","import { SIDEBAR_WIDTH } from \"../constants/layout\";\n\nexport const layoutStyles = (theme) => ({\n  root: {\n    flexGrow: 1,\n    zIndex: 1,\n    overflowX: \"hidden\",\n    overflowY: \"auto\",\n    position: \"relative\",\n    display: \"flex\",\n    height: \"100vh\"\n  },\n  appBar: {\n    position: \"fixed\",\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create([\"margin\", \"width\"], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    })\n  },\n  title: {\n    marginLeft: theme.spacing(2)\n  },\n  flex: {\n    flex: 1,\n    display: \"flex\",\n    alignItems: \"center\"\n  },\n  menuButton: {\n    marginLeft: 12,\n    marginRight: 20\n  },\n  hide: {\n    display: \"none\"\n  },\n  drawerPaper: {\n    width: SIDEBAR_WIDTH,\n    top: 0,\n    right: 0,\n    height: \"100vh\",\n    overflowY: \"auto\"\n  },\n  drawerHeader: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    padding: \"0 8px\",\n    ...theme.mixins.toolbar\n  },\n  logo: {\n    position: \"relative\",\n    transform: \"translateY(-2px)\"\n  },\n  greetings: {\n    marginRight: theme.spacing(),\n    opacity: 0.5,\n    display: \"inline-block\"\n  },\n  content: {\n    width: \"100%\",\n    transition: theme.transitions.create(\"margin\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    }),\n    height: \"calc(100% - 56px)\",\n    marginTop: 56\n  },\n  [theme.breakpoints.up(\"md\")]: {\n    content: {\n      marginTop: 64\n    },\n    drawerPaper: {\n      height: \"calc(100vh - 64px)\",\n      top: 64\n    }\n  }\n});\n","export const SIDEBAR_WIDTH = 300;\n","import {\n  TOGGLE_DRAWER,\n  TOGGLE_FILTERS,\n  UPDATE_TUNE_FILTERS\n} from \"../constants/actionTypes\";\n\nexport function toggleDrawer(forceClose = false) {\n  return {\n    type: TOGGLE_DRAWER,\n    forceClose\n  };\n}\n\nexport function toggleFilters(forceClose = false) {\n  return {\n    type: TOGGLE_FILTERS,\n    forceClose\n  };\n}\n\nexport function updateTuneFilters(filters) {\n  return {\n    type: UPDATE_TUNE_FILTERS,\n    filters\n  };\n}\n","import { Drawer, Hidden, withStyles } from \"@material-ui/core\";\nimport React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { layoutStyles } from \"../styles/layout\";\nimport { toggleFilters } from \"../actions/ui\";\n\nclass FiltersDrawer extends Component {\n  handleFiltersToggle = () => {\n    this.props.toggleFilters();\n  };\n\n  render() {\n    const { classes } = this.props;\n\n    return (\n      <div\n        className={classes.drawerPaper}\n        ref={element => (this.divRef = element)}\n      >\n        <Hidden mdUp>\n          <Drawer\n            variant=\"temporary\"\n            anchor={\"right\"}\n            open={this.props.open}\n            classes={{\n              paper: classes.drawerPaper\n            }}\n            onClose={this.handleFiltersToggle}\n            ModalProps={{\n              keepMounted: true // Better open performance on mobile.\n            }}\n          >\n            {this.props.children}\n          </Drawer>\n        </Hidden>\n        <Hidden smDown implementation=\"css\">\n          <Drawer\n            anchor=\"right\"\n            variant=\"persistent\"\n            open\n            classes={{\n              paper: classes.drawerPaper\n            }}\n          >\n            {this.props.children}\n          </Drawer>\n        </Hidden>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  open: state.ui.showFilters\n});\n\nexport default withRouter(\n  connect(mapStateToProps, { toggleFilters })(\n    withStyles(layoutStyles)(FiltersDrawer)\n  )\n);\n","import React from \"react\";\nimport { tuneTypes } from \"../../helpers/abcHelper\";\nimport startCase from \"lodash/startCase\";\nimport {\n  TextField,\n  makeStyles,\n  FormControl,\n  FormLabel,\n  RadioGroup,\n  FormControlLabel,\n  Radio\n} from \"@material-ui/core\";\nimport debounce from \"lodash/debounce\";\nimport { updateTuneFilters } from \"../../actions/ui\";\nimport { connect } from \"react-redux\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: theme.spacing(2)\n  },\n  formControl: {\n    margin: theme.spacing(2, 0)\n  }\n}));\n\nfunction TuneFiltersForm(props) {\n  const classes = useStyles();\n  const { currentFilters, folder } = props;\n\n  const handleSearchChange = debounce((value) => {\n    props.updateTuneFilters({ ...currentFilters, search: value });\n  }, 200);\n\n  const handleTuneTypeChange = (e) => {\n    const value = e.target.value === \"all\" ? undefined : e.target.value;\n    props.updateTuneFilters({ ...currentFilters, tuneType: value });\n  };\n\n  return (\n    <div className={classes.root} id=\"filtersForm\">\n      <TextField\n        id=\"filter-search\"\n        label=\"Search\"\n        variant=\"outlined\"\n        onChange={(e) => handleSearchChange(e.target.value)}\n        defaultValue={currentFilters.search}\n        placeholder=\"Search by name\"\n        InputLabelProps={{\n          shrink: true\n        }}\n        fullWidth\n        className={classes.formControl}\n      />\n      <FormControl component=\"fieldset\" className={classes.formControl}>\n        <FormLabel component=\"legend\">Type</FormLabel>\n        <RadioGroup\n          aria-label=\"Tune Type\"\n          id=\"filter-tuneType\"\n          name=\"tuneType\"\n          defaultValue=\"all\"\n          onChange={handleTuneTypeChange}\n        >\n          <FormControlLabel\n            value=\"all\"\n            control={<Radio color=\"primary\" />}\n            label=\"All\"\n          />\n          {Object.keys(tuneTypes).map((tuneType) => (\n            <FormControlLabel\n              key={tuneType}\n              value={tuneType}\n              control={<Radio color=\"primary\" />}\n              label={startCase(tuneType)}\n            />\n          ))}\n        </RadioGroup>\n      </FormControl>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  currentFilters: state.ui.tuneFilters\n});\n\nexport default connect(mapStateToProps, { updateTuneFilters })(TuneFiltersForm);\n","export const fuseoptions = {\n  includeScore: false,\n  threshold: 0.2,\n  findAllMatches: true,\n  keys: [\"name\"]\n};\n","import * as types from \"../constants/actionTypes\";\nimport flatMap from \"lodash/flatMap\";\nimport sortBy from \"lodash/sortBy\";\n\nimport axios from \"axios\";\nimport { updateCurrentUser } from \"./session\";\n\nfunction requestSets() {\n  return {\n    type: types.REQUEST_SETS\n  };\n}\n\nfunction receiveSets(sets, meta, add = false) {\n  return {\n    type: types.RECEIVE_SETS,\n    sets: sets,\n    meta: meta,\n    add: add\n  };\n}\n\nfunction requestSet() {\n  return {\n    type: types.REQUEST_SET\n  };\n}\n\nfunction receiveSet(set) {\n  return {\n    type: types.RECEIVE_SET,\n    currentSet: set\n  };\n}\n\nexport const fetchSets = (memberId) => (dispatch) => {\n  dispatch(requestSets());\n  dispatch(updateCurrentUser({ id: memberId }));\n\n  let responses = [];\n\n  function fetch(page, rsps) {\n    return new Promise((resolve) => {\n      axios\n        .get(`${types.MEMBER_URL}${memberId}/sets`, {\n          params: { page: page, format: \"json\", perpage: 50 }\n        })\n        .then((response) => {\n          rsps.push(response);\n          const {\n            data: { page, pages }\n          } = response;\n          if (!!page && page < pages) {\n            axios.all([fetch(page + 1, rsps)]).then(() => resolve());\n          } else {\n            resolve();\n          }\n        });\n    });\n  }\n\n  return fetch(1, responses).then(() => {\n    const sets = sortBy(\n      flatMap(responses, (response) => response.data.sets),\n      [\"name\"]\n    );\n    dispatch(receiveSets(sets, { total: sets.length }));\n  });\n};\n\nexport const fetchSet = (memberId, setId) => (dispatch) => {\n  dispatch(requestSet());\n  return axios\n    .get(`${types.MEMBER_URL}${memberId}/sets/${setId}?format=json`)\n    .then(function (response) {\n      dispatch(receiveSet(response.data));\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n};\n","import {\n  Grid,\n  Typography,\n  withStyles,\n  Dialog,\n  Slide,\n  AppBar,\n  IconButton,\n  Toolbar,\n  Box,\n  Hidden\n} from \"@material-ui/core\";\nimport React, { useEffect } from \"react\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport { withRouter } from \"react-router-dom\";\nimport SheetMusic from \"./SheetMusic\";\nimport { connect } from \"react-redux\";\nimport { fetchSet } from \"../actions/sets\";\nimport he from \"he\";\nimport store from \"../store\";\nimport PageLoading from \"./PageLoading\";\nimport TuneDialogNav from \"./TuneDialogNav\";\nimport TuneSettingHeader from \"./TuneSettingHeader\";\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nconst styles = (theme) => ({\n  root: {\n    marginTop: 100\n  },\n  settings: theme.mixins.gutters({\n    paddingTop: theme.spacing(),\n    paddingBottom: theme.spacing()\n  }),\n  title: {\n    marginLeft: theme.spacing(2),\n    flex: 1\n  }\n});\n\nfunction Set(props) {\n  useEffect(() => {\n    !!props.tuneId && store.dispatch(fetchSet(props.userId, props.tuneId));\n  }, [props.tuneId, props.userId]);\n\n  const setLoaded = props.currentSet?.name !== undefined;\n\n  const handleClose = () => props.history.push(props.referrer);\n  return (\n    <Dialog\n      fullScreen\n      open={!!props.tuneId}\n      onClose={handleClose}\n      TransitionComponent={Transition}\n    >\n      <AppBar className={props.classes.appBar}>\n        <Toolbar>\n          <IconButton\n            edge=\"start\"\n            onClick={handleClose}\n            aria-label=\"close\"\n            color=\"inherit\"\n          >\n            <CloseIcon />\n          </IconButton>\n          <Hidden xsDown>\n            <Typography variant=\"h6\" className={props.classes.title}>\n              {setLoaded && he.decode(props.currentSet.name)}\n            </Typography>\n          </Hidden>\n          <TuneDialogNav tuneId={props.currentSet.id} folder=\"sets\" />\n        </Toolbar>\n      </AppBar>\n      {!setLoaded && <PageLoading />}\n      {setLoaded && (\n        <Box p={2}>\n          <Grid container justify=\"center\" className={props.classes.root}>\n            <Grid item md={12} md={10} lg={9}>\n              {props.currentSet.settings.map((setting, i) => {\n                return (\n                  <div key={`${setting.id}-${i}`}>\n                    <TuneSettingHeader setting={setting} />\n                    <SheetMusic tune={setting} type={props.currentSet.type} />\n                  </div>\n                );\n              })}\n            </Grid>\n          </Grid>\n        </Box>\n      )}\n    </Dialog>\n  );\n}\n\nconst mapStateToProps = (state, props) => ({\n  currentSet: state.sets.currentSet,\n  isFetching: state.sets.currentSet.isFetching,\n  tuneId: props.match.params.tuneId,\n  userId: state.session.currentUser.id\n});\n\nexport default withRouter(connect(mapStateToProps)(withStyles(styles)(Set)));\n","import { Route } from \"react-router-dom\";\nimport Fuse from \"fuse.js\";\nimport React from \"react\";\nimport { fetchTuneBook } from \"../actions/tuneBook\";\nimport { connect } from \"react-redux\";\nimport Tune from \"./Tune\";\nimport { withRouter } from \"react-router-dom\";\nimport TuneList from \"./TuneList\";\nimport PageLoading from \"./PageLoading\";\nimport FiltersDrawer from \"./FiltersDrawer\";\nimport TuneFiltersForm from \"./FiltersForm/TuneFiltersForm\";\nimport { withSnackbar } from \"notistack\";\nimport { fuseoptions } from \"../helpers/searchHelper\";\nimport { fetchSets } from \"../actions/sets\";\nimport Set from \"./Set\";\n\nfunction Tunebook(props) {\n  const {\n    match: {\n      url,\n      params: { folder }\n    },\n    items,\n    isFetching,\n    filters\n  } = props;\n  const isTune = folder === \"tunes\";\n  const fuse = new Fuse(items, fuseoptions);\n  let filteredTunes = filters.search\n    ? fuse.search(filters.search || \"\").map((item) => item.item)\n    : items;\n\n  // Excluding items without type so Sets are not filtered in case filter active in the tune section\n  const searchTuneType = (item) => item.type === filters.tuneType;\n  const searchSetsSettingsType = (item) =>\n    item.settings.map((setting) => setting.type).includes(filters.tuneType);\n\n  const withType = filteredTunes.filter((item) => {\n    if (!filters.tuneType) {\n      return true;\n    }\n    return item.type ? searchTuneType(item) : searchSetsSettingsType(item);\n  });\n\n  return (\n    <div>\n      {isFetching ? <PageLoading /> : <TuneList items={withType} />}\n      <FiltersDrawer>\n        <TuneFiltersForm folder={folder} />\n      </FiltersDrawer>\n      <Route path={`${url}/:tuneId?`}>\n        {isTune ? <Tune referrer={url} /> : <Set referrer={url} />}\n      </Route>\n    </div>\n  );\n}\nconst mapStateToProps = (state, props) => {\n  return {\n    items: props.folder === \"tunes\" ? state.tunes.tunes : state.sets.sets,\n    isFetching: state.tunes.isFetching,\n    userChanged: state.session.currentUser.id !== props.userId,\n    filters: state.ui.tuneFilters\n  };\n};\n\nexport default connect(mapStateToProps, { fetchTuneBook, fetchSets })(\n  withSnackbar(withRouter(Tunebook))\n);\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Help from \"@material-ui/icons/Help\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport Home from \"@material-ui/icons/Home\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport LibraryMusic from \"@material-ui/icons/LibraryMusic\";\nimport MusicNote from \"@material-ui/icons/MusicNote\";\nimport { connect, useDispatch } from \"react-redux\";\nimport { Divider } from \"@material-ui/core\";\nimport { withRouter } from \"react-router-dom\";\nimport { logout } from \"../../actions/session\";\n\nconst useStyles = makeStyles({\n  list: {\n    width: 250\n  },\n  fullList: {\n    width: \"auto\"\n  }\n});\n\nfunction NavDrawer(props) {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n\n  const items = [\n    {\n      label: `Sets ${!!props.setsCount ? \"(\" + props.setsCount + \")\" : \"\"}`,\n      to: `/tunebook/${props.currentUser.id}/sets`,\n      icon: <LibraryMusic />\n    },\n    {\n      label: `Tunes ${!!props.tunesCount ? \"(\" + props.tunesCount + \")\" : \"\"}`,\n      to: `/tunebook/${props.currentUser.id}/tunes`,\n      icon: <MusicNote />\n    }\n  ];\n\n  const handleClick = (item) => {\n    props.onClose();\n    props.history.push(item.to);\n  };\n\n  const handleLogout = () => {\n    props.onClose();\n    dispatch(logout());\n    props.history.push(\"/\");\n  };\n\n  const list = () => (\n    <div role=\"presentation\" className={classes.list}>\n      <List>\n        <ListItem button key=\"Change user\" onClick={handleLogout}>\n          <ListItemIcon>\n            <Home />\n          </ListItemIcon>\n          <ListItemText primary=\"Change user\" />\n        </ListItem>\n        {items.map((item) => (\n          <ListItem button key={item.label} onClick={() => handleClick(item)}>\n            <ListItemIcon>{item.icon}</ListItemIcon>\n            <ListItemText primary={item.label} />\n          </ListItem>\n        ))}\n        <Divider />\n        <ListItem\n          button\n          key={\"nav-help\"}\n          href=\"mailto:accounts+foinn@rorsvort.com\"\n          component=\"a\"\n        >\n          <ListItemIcon>\n            <Help />\n          </ListItemIcon>\n          <ListItemText primary=\"Help\" />\n        </ListItem>\n      </List>\n    </div>\n  );\n\n  return (\n    <Drawer anchor={\"left\"} open={props.open} onClose={props.onClose}>\n      {list()}\n    </Drawer>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  tunesCount: state.tunes.meta?.total,\n  setsCount: state.sets.meta?.total,\n  currentUser: state.session.currentUser\n});\n\nexport default connect(mapStateToProps)(withRouter(NavDrawer));\n","export const steps = [\n  {\n    placement: \"center\",\n    target: \"body\",\n    title: \"Wecome to Foinn!\",\n    content:\n      \"You can now easily access you tunes and sets from thesession.org in a nicer way and use it to practice or in a session. Due to restrictions of thesession.org, we can only read what you have configured there. Therefore to add or remove tunes in your tunebook or sets, youâ€™ll need to login to thesession.org and make your changes there.\"\n  },\n\n  {\n    target: \"#tunesList\",\n    title: \"Tunes list\",\n    placement: \"auto\",\n    content: \"Click on a tune to see all the settings and musicsheet\"\n  },\n\n  {\n    target: \"#filtersForm\",\n    title: \"Search & Filters\",\n    placement: \"left\",\n    content: \"Click on this button to access the app navigation\"\n  },\n  {\n    target: \"#navToggle\",\n    title: \"Navigation\",\n    placement: \"bottom\",\n    content: \"Access the app navigation for Sets, tunes, help or change user\"\n  }\n];\n\nexport const stepsStyles = {\n  options: {\n    primaryColor: \"#357a38\"\n  },\n  tooltipContainer: {\n    textAlign: \"left\"\n  },\n  tooltipContent: {\n    padding: \"20px 0\"\n  }\n};\n","export default __webpack_public_path__ + \"static/media/logo-small.03c15606.svg\";","import React from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport smallLogoUrl from \"../../images/logo-small.svg\";\nimport { Hidden, Typography, withStyles } from \"@material-ui/core\";\nimport Filters from \"@material-ui/icons/Search\";\nimport startCase from \"lodash/startCase\";\nimport { layoutStyles } from \"../../styles/layout\";\n\nfunction AppBarContent(props) {\n  const { classes, folder, onToggleFilters, onDrawerToggle } = props;\n  return (\n    <Toolbar>\n      <IconButton\n        id=\"navToggle\"\n        color=\"inherit\"\n        aria-label=\"open drawer\"\n        onClick={onDrawerToggle}\n        className={classes.navIconHide}\n      >\n        <MenuIcon />\n      </IconButton>\n      <div className={classes.flex}>\n        <Hidden smDown>\n          <img src={smallLogoUrl} alt=\"Foinn\" className={classes.logo} />\n        </Hidden>\n        <Typography className={classes.title} variant=\"h6\">\n          <Hidden smDown> â€” </Hidden>\n          {startCase(folder)}\n        </Typography>\n      </div>\n      <Hidden mdUp>\n        <IconButton\n          color=\"inherit\"\n          aria-label=\"open drawer\"\n          onClick={onToggleFilters}\n          className={classes.navIconHide}\n        >\n          <Filters />\n        </IconButton>\n      </Hidden>\n    </Toolbar>\n  );\n}\n\nexport default withStyles(layoutStyles)(AppBarContent);\n","import \"./App.css\";\nimport Joyride from \"react-joyride\";\n\nimport React, { useEffect } from \"react\";\nimport AppBar from \"@material-ui/core/AppBar\";\n\nimport Tunebook from \"./components/Tunebook\";\nimport { connect, useDispatch } from \"react-redux\";\nimport { layoutStyles } from \"./styles/layout\";\nimport { logout } from \"./actions/session\";\n\nimport { toggleDrawer, toggleFilters } from \"./actions/ui\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { withRouter } from \"react-router-dom\";\nimport NavDrawer from \"./components/NavDrawer\";\nimport { steps, stepsStyles } from \"./helpers/welcomeTour\";\nimport { useCookies } from \"react-cookie\";\nimport AppBarContent from \"./components/AppBarContent\";\nimport { fetchSets } from \"./actions/sets\";\nimport { fetchTuneBook } from \"./actions/tuneBook\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport { withSnackbar } from \"notistack\";\n\nfunction App(props) {\n  const [cookies, setCookie] = useCookies();\n  const dispatch = useDispatch();\n\n  const {\n    classes,\n    showDrawer,\n    enqueueSnackbar,\n    closeSnackbar,\n    match: {\n      params: { folder, userId }\n    }\n  } = props;\n\n  useEffect(() => {\n    if (!cookies.hadConfigTour) {\n      setCookie(\"hadConfigTour\", true);\n    }\n    const snack = enqueueSnackbar(\"Syncing tunebook!\", {\n      variant: \"success\",\n      persist: true,\n      action: <CircularProgress size={20} />\n    });\n\n    Promise.all([\n      dispatch(fetchSets(userId)),\n      dispatch(fetchTuneBook(userId))\n    ]).finally(() => {\n      closeSnackbar(snack);\n    });\n  }, [cookies, setCookie, userId, closeSnackbar, enqueueSnackbar, dispatch]);\n\n  const handleDrawerToggle = () => {\n    props.toggleDrawer();\n  };\n  const handleToggleFilters = () => {\n    props.toggleFilters();\n  };\n\n  return (\n    <div className={classes.root}>\n      <Joyride\n        steps={steps}\n        continuous={true}\n        showProgress={true}\n        run={!cookies.hadConfigTour}\n        disableScrolling={true}\n        styles={stepsStyles}\n      />\n      <AppBar className={classes.appBar}>\n        <AppBarContent\n          folder={folder}\n          onToggleFilters={handleToggleFilters}\n          onDrawerToggle={handleDrawerToggle}\n        />\n      </AppBar>\n      <NavDrawer onClose={handleDrawerToggle} open={showDrawer} />\n      <div className={classes.content}>\n        <Tunebook userId={userId} folder={folder} />\n      </div>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  showDrawer: state.ui.showDrawer\n});\n\nexport default withRouter(\n  connect(mapStateToProps, { logout, toggleFilters, toggleDrawer })(\n    withSnackbar(withStyles(layoutStyles)(App))\n  )\n);\n","import { MenuItem, Paper, TextField, withStyles } from \"@material-ui/core\";\nimport React, { Component } from \"react\";\nimport { fetchUserId, updateCurrentUser } from \"../actions/session\";\n\nimport Autosuggest from \"react-autosuggest\";\nimport match from \"autosuggest-highlight/match\";\nimport parse from \"autosuggest-highlight/parse\";\nimport store from \"../store\";\nimport { withRouter } from \"react-router-dom\";\n\nconst styles = (theme) => ({\n  suggestionsContainer: {\n    position: \"relative\",\n    zIndex: 999\n  },\n  suggestionsContainerOpen: {\n    position: \"absolute\",\n    marginBottom: theme.spacing(3),\n    left: 0,\n    right: 0\n  },\n  suggestion: {\n    display: \"block\"\n  },\n  suggestionsList: {\n    margin: 0,\n    padding: 0,\n    listStyleType: \"none\"\n  },\n  textField: {\n    width: \"100%\"\n  }\n});\n\nfunction renderInput(inputProps) {\n  const { classes, autoFocus, value, ref, ...other } = inputProps;\n\n  return (\n    <TextField\n      className={classes.textField}\n      autoFocus={autoFocus}\n      value={value}\n      variant=\"outlined\"\n      inputRef={ref}\n      styles={{\n        width: \"100%\"\n      }}\n      InputProps={{\n        className: classes.input,\n        ...other\n      }}\n    />\n  );\n}\n\nfunction renderSuggestion(suggestion, { query, isHighlighted }) {\n  const matches = match(suggestion.name, query);\n  const parts = parse(suggestion.name, matches);\n\n  return (\n    <MenuItem selected={isHighlighted} component=\"div\">\n      <div>\n        {parts.map((part, index) => {\n          return part.highlight ? (\n            <span key={index} style={{ fontWeight: 300 }}>\n              {part.text}\n            </span>\n          ) : (\n            <strong key={index} style={{ fontWeight: 500 }}>\n              {part.text}\n            </strong>\n          );\n        })}\n      </div>\n    </MenuItem>\n  );\n}\n\nfunction renderSuggestionsContainer(options) {\n  const { containerProps, children } = options;\n  return (\n    <Paper {...containerProps} square>\n      {children}\n    </Paper>\n  );\n}\n\nconst onSuggestionSelected = ({ suggestion }, history) => {\n  store.dispatch(updateCurrentUser(suggestion));\n  history.push(`/tunebook/${suggestion.id}/tunes`);\n};\n\nfunction getSuggestionValue(suggestion) {\n  return suggestion.name;\n}\n\nclass NameAutoComplete extends Component {\n  state = {\n    value: this.props.userName || \"\",\n    selectedSuggestion: {},\n    suggestions: []\n  };\n\n  handleSuggestionsFetchRequested = ({ value }) => {\n    if (value.length < 4) {\n      return false;\n    } else {\n      fetchUserId(value).then((data) => {\n        if (data !== undefined) {\n          this.setState({ suggestions: data.data.members });\n        } else {\n          return [];\n        }\n      });\n    }\n  };\n\n  handleSuggestionsClearRequested = () => {\n    this.setState({\n      suggestions: []\n    });\n  };\n\n  handleChange = (event, { newValue }) => {\n    this.setState({ value: newValue });\n  };\n\n  render() {\n    const { classes, history } = this.props;\n    return (\n      <Autosuggest\n        theme={{\n          container: classes.suggestionsContainer,\n          suggestionsContainerOpen: classes.suggestionsContainerOpen,\n          suggestionsList: classes.suggestionsList,\n          suggestion: classes.suggestion\n        }}\n        renderInputComponent={renderInput}\n        suggestions={this.state.suggestions}\n        onSuggestionsFetchRequested={this.handleSuggestionsFetchRequested}\n        onSuggestionsClearRequested={this.handleSuggestionsClearRequested}\n        onSuggestionSelected={(_e, suggestion) =>\n          onSuggestionSelected(suggestion, history)\n        }\n        renderSuggestionsContainer={renderSuggestionsContainer}\n        getSuggestionValue={getSuggestionValue}\n        renderSuggestion={renderSuggestion}\n        inputProps={{\n          autoFocus: true,\n          classes,\n          placeholder: \"Search by typing your user name\",\n          value: this.state.value,\n          onChange: this.handleChange\n        }}\n      />\n    );\n  }\n}\n\nexport default withStyles(styles)(withRouter(NameAutoComplete));\n","export default __webpack_public_path__ + \"static/media/logo.bdf350d0.svg\";","import {\n  Button,\n  Grid,\n  Paper,\n  Typography,\n  withStyles,\n  Link as AnchorLink,\n  Box\n} from \"@material-ui/core\";\n\nimport BodyClassName from \"react-body-classname\";\nimport { Link } from \"react-router-dom\";\nimport NameAutoComplete from \"./NameAutoComplete\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport isEmpty from \"lodash/isEmpty\";\nimport logoUrl from \"../images/logo.svg\";\n\nconst styles = (theme) => ({\n  container: {\n    height: \"100vh\"\n  },\n  paper: {\n    margin: \"0 auto\",\n    padding: \"20px\"\n  },\n  button: {\n    color: \"white\",\n    marginTop: theme.spacing(2)\n  },\n  home: {\n    background: theme.palette.primary[500]\n  },\n  logo: {\n    maxWidth: \"100%\",\n    margin: \"0 auto 40px\",\n    display: \"block\"\n  },\n  title: {\n    fontSize: 21,\n    fontWeight: \"normal\",\n    textAlign: \"center\",\n    lineHeight: 1.5,\n    color: \"white\",\n    opacity: 0.8\n  },\n  login: {\n    alignSelf: \"flex-start\"\n  }\n});\n\nfunction Home(props) {\n  const { classes, userName, currentUser } = props;\n  return (\n    <BodyClassName className={classes.home}>\n      <Grid\n        container\n        alignItems=\"center\"\n        justify=\"center\"\n        direction=\"row\"\n        className={classes.container}\n      >\n        <Grid item xs={12} md={12}>\n          <img src={logoUrl} alt=\"Foinn app\" className={classes.logo} />\n          <h1 className={classes.title}>\n            Browse your tunes and sets from Thessession.org <br />\n            <small>The ideal session companion</small>\n          </h1>\n        </Grid>\n        <Grid item xs={12} md={4} className={classes.login}>\n          <Box p={2}>\n            <Paper className={classes.paper} elevation={8}>\n              <Typography variant=\"subtitle1\" gutterBottom>\n                Find your{\" \"}\n                <AnchorLink\n                  href=\"https://thesession.org\"\n                  color=\"primary\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  TheSession.org\n                </AnchorLink>{\" \"}\n                profile:\n              </Typography>\n              <NameAutoComplete userName={userName} />\n              {userName && (\n                <Button\n                  to={`/tunebook/${currentUser.id}/tunes`}\n                  className={classes.button}\n                  component={Link}\n                  variant=\"contained\"\n                  color=\"primary\"\n                >\n                  Open tunebook\n                </Button>\n              )}\n            </Paper>\n          </Box>\n        </Grid>\n      </Grid>\n    </BodyClassName>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  currentUser: state.session.currentUser,\n  userName: !isEmpty(state.session.currentUser)\n    ? state.session.currentUser.name\n    : \"\"\n});\n\nexport default connect(mapStateToProps)(withStyles(styles)(Home));\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (!isLocalhost) {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      } else {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import \"./index.css\";\nimport { HashRouter, Route } from \"react-router-dom\";\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\nimport { SnackbarProvider } from \"notistack\";\n\nimport App from \"./App\";\nimport Home from \"./components/Home\";\nimport { Provider } from \"react-redux\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport green from \"@material-ui/core/colors/green\";\nimport red from \"@material-ui/core/colors/red\";\nimport registerServiceWorker from \"./registerServiceWorker\";\nimport store from \"./store\";\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: \"#357a38\",\n      ...green\n    },\n    secondary: green,\n    error: red\n  },\n  typography: {\n    h1: {\n      fontFamily: \"'Kaushan Script', 'cursive'\",\n      fontSize: \"2.8125rem\"\n    }\n  }\n});\n\nconst app = (\n  <MuiThemeProvider theme={theme}>\n    <Provider store={store}>\n      <SnackbarProvider>\n        <HashRouter>\n          <div>\n            <Route exact path=\"/\">\n              <Home />\n            </Route>\n            <Route path=\"/tunebook/:userId/:folder\">\n              <App />\n            </Route>\n          </div>\n        </HashRouter>\n      </SnackbarProvider>\n    </Provider>\n  </MuiThemeProvider>\n);\n\nReactDOM.render(app, document.getElementById(\"root\"));\nregisterServiceWorker();\n"],"sourceRoot":""}