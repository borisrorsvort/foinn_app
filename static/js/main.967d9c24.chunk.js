(this.webpackJsonptrad_tune_book=this.webpackJsonptrad_tune_book||[]).push([[0],{263:function(e,t,n){},271:function(e,t,n){},468:function(e,t,n){"use strict";n.r(t);var r=n(8),a=(n(263),n(20)),s=n(15),i=n(238),c=n(524),o=n(76),u=n(239),l=(n(271),n(240)),d=n(0),h=n.n(d),j=n(509),p=n(216),g="REQUEST_TUNEBOOK",b="RECEIVE_TUNEBOOK",f="REQUEST_TUNE",m="RECEIVE_TUNE",O="REQUEST_SETS",v="RECEIVE_SETS",x="REQUEST_SET",y="RECEIVE_SET",w="TOGGLE_DRAWER",T="TOGGLE_FILTERS",S="UPDATE_TUNE_FILTERS",k="UPDATE_CURRENT_USER",C="LOGOUT",F="https://thesession.org/members/",I=n(119),N=n.n(I),E=n(120),U=n.n(E),R=n(41),_=n.n(R);function L(e){return{type:k,currentUser:e}}function D(){return{type:C}}var P=function(e){return _.a.get("".concat(F,"search?q=").concat(e,"&format=json")).catch((function(e){console.log(e)}))};var B=function(e){return function(t){t({type:g}),t(L({id:e}));var n=[];return function t(n,r){return new Promise((function(a){_.a.get("".concat(F).concat(e,"/tunebook"),{params:{page:n,format:"json",perpage:50}}).then((function(e){r.push(e);var n=e.data,s=n.page,i=n.pages;s&&s<i?_.a.all([t(s+1,r)]).then((function(){return a()})):a()}))}))}(1,n).then((function(){var e=U()(N()(n,(function(e){return e.data.tunes})),["name"]);t(function(e,t){return{type:b,tunes:e,meta:t}}(e,{total:e.length}))}))}},W=function(e){return function(t){return t({type:f}),_.a.get("".concat("https://thesession.org/tunes/").concat(e,"?format=json")).then((function(e){var n;t((n=e.data,{type:m,currentTune:n}))})).catch((function(e){console.log(e)}))}},A=n(14),q=n(469),z=n(508),V=n(510),M=n(511),G=n(81),H=n(512),Q=n(513),J=n(6),K=n(122),Y=n.n(K),X=n(17),$=n(18),Z=n(24),ee=n(23),te=n(35),ne=n.n(te),re={jig:{key:"3/4",tempo:"140"},reel:{key:"4/4",tempo:"180"},"slip jig":{key:"9/8",tempo:"260"},hornpipe:{key:"4/4",tempo:"180"},polka:{key:"2/4",tempo:"100"},slide:{key:"12/8",tempo:"250"},waltz:{key:"3/4",tempo:"160"},barndance:{key:"4/4",tempo:"140"},strathspey:{key:"4/4",tempo:"140"},"three-two":{key:"3/2",tempo:"140"},mazurka:{key:"3/4",tempo:"140"},march:{key:"4/4",tempo:"140"}},ae=function(e,t,n){var r;if(void 0===e.abc)return"";var a=t||e.type,s=e.abc.split("! ").join("\n"),i="T: ".concat(n),c="M: ".concat(re[a].key),o="K: ".concat(e.key),u="Q: ".concat(null===(r=re[a])||void 0===r?void 0:r.tempo);return ne.a.decode(["X: 1",i,c,u,"L: 1/8",o,s].join("\n"))},se=n(219),ie=n.n(se),ce=n(220),oe=n.n(ce),ue=n(221),le=n.n(ue),de=n(3),he=function(e){Object(Z.a)(n,e);var t=Object(ee.a)(n);function n(){return Object(X.a)(this,n),t.apply(this,arguments)}return Object($.a)(n,[{key:"renderAbc",value:function(){ie.a.renderAbc(this.el,ae(this.props.tune,this.props.type,this.title()),{},{paddingright:0,paddingleft:0,responsive:"resize",add_classes:!0})}},{key:"renderMidi",value:function(){oe.a.renderMidi(this.midi,ae(this.props.tune,this.props.type,this.title()),{},{inlineControls:{selectionToggle:!1,loopToggle:!1,standard:!0,tempo:!1,startPlaying:!1}},{})}},{key:"title",value:function(){return this.props.tune.name?"".concat(ne.a.decode(this.props.tune.name)," (").concat(this.props.tune.key," - ").concat(this.props.tune.type,")"):"".concat(this.props.tune.key," - ").concat(this.props.type)}},{key:"componentWillReceiveProps",value:function(e){var t=e.containerWidth;this.props.containerWidth!==t&&(this.renderAbc(this.props.containerWidth),this.renderMidi(this.props.containerWidth))}},{key:"componentDidMount",value:function(){this.renderAbc(this.props.containerWidth),this.renderMidi(this.props.containerWidth)}},{key:"render",value:function(){var e=this;return Object(de.jsxs)("div",{className:this.props.classes.root,children:[Object(de.jsx)("div",{ref:function(t){return e.el=t}}),Object(de.jsx)("div",{ref:function(t){return e.midi=t}})]})}}]),n}(d.Component),je=Object(J.a)((function(){return{root:{marginBottom:100,marginTop:50}}}))(le()()(he)),pe=n(71),ge=n(222),be=n.n(ge);var fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,tunes:[],meta:{},currentTune:{isFetching:!1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(r.a)(Object(r.a)({},e),{},{tunes:[]});case g:return Object.assign({},e,{isFetching:!0});case b:return Object(r.a)(Object(r.a)({},e),{},{isFetching:!1,tunes:t.tunes,meta:t.meta});case f:return Object.assign({},e,{currentTune:{isFetching:!0}});case m:var n=t.currentTune;return Object.assign({},e,{currentTune:Object(r.a)(Object(r.a)({},n),{},{isFetching:!1})});default:return e}},me=n(38);var Oe={ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showDrawer:!1,showFilters:!1,tuneFilters:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(r.a)(Object(r.a)({},e),{},{showDrawer:!t.forceClose&&!e.showDrawer});case T:return Object(r.a)(Object(r.a)({},e),{},{showFilters:!t.forceClose&&!e.showFilters});case S:return Object(r.a)(Object(r.a)({},e),{},{tuneFilters:t.filters});default:return e}},session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentUser:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(r.a)(Object(r.a)({},e),{},{currentUser:t.currentUser});case C:return Object(r.a)(Object(r.a)({},e),{},{currentUser:{}});default:return e}},tunes:fe,sets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,sets:[],meta:{},currentSet:{isFetching:!1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(r.a)(Object(r.a)({},e),{},{sets:[]});case O:return Object.assign({},e,{isFetching:!0});case v:var n=t.add?[].concat(Object(me.a)(e.sets),Object(me.a)(t.sets)):t.sets;return Object.assign({},e,{isFetching:!1,sets:n,meta:t.meta});case x:return Object.assign({},e,{currentSet:{isFetching:!0}});case y:var a=t.currentSet;return Object.assign({},e,{currentSet:Object(r.a)(Object(r.a)({},a),{},{isFetching:!1})});default:return e}}},ve=n(223),xe=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),ye=[ve.a];be.a.init("hh8o22/foinn");var we=pe.d,Te=Object(pe.e)(Object(pe.c)(Oe),xe,we(pe.a.apply(void 0,ye)));Te.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){return}}({session:Te.getState().session,tunes:Te.getState().tunes,sets:Te.getState().sets})}));var Se=Te,ke=n(505),Ce=n(506),Fe=Object(ke.a)((function(e){return{root:{height:"calc(100vh - 64px)",display:"flex",alignItems:"center",justifyContent:"center"}}}));var Ie=function(){var e=Fe();return Object(de.jsx)("div",{className:e.root,children:Object(de.jsx)(Ce.a,{})})},Ne=n(526),Ee=n(507),Ue=n(224),Re=n.n(Ue);var _e=Object(s.e)((function(e){var t,n,r=e.tuneId,s=e.folder,i=e.match.path,c=Object(A.d)((function(e){return e[s][s]})),o=Re()(c,{id:r}),u=null===(t=c[o-1])||void 0===t?void 0:t.id,l=null===(n=c[o+1])||void 0===n?void 0:n.id;return Object(de.jsxs)(Ne.a,{style:{marginLeft:"auto"},children:[u&&Object(de.jsx)(Ee.a,{color:"inherit",component:a.b,to:i.replace(":tuneId?",u),children:"Previous"}),l&&Object(de.jsx)(Ee.a,{color:"inherit",component:a.b,to:i.replace(":tuneId?",l),children:"Next"})]})})),Le=h.a.forwardRef((function(e,t){return Object(de.jsx)(q.a,Object(r.a)({direction:"up",ref:t},e))}));var De=Object(s.e)(Object(A.b)((function(e,t){return{currentTune:e.tunes.currentTune,isFetching:e.tunes.currentTune.isFetching,tuneId:t.match.params.tuneId}}))(Object(J.a)((function(e){return{root:{marginTop:100,padding:e.spacing(0,3)},settings:e.mixins.gutters({paddingTop:e.spacing(),paddingBottom:e.spacing()}),title:{marginLeft:e.spacing(2),flex:1}}}))((function(e){var t;Object(d.useEffect)((function(){e.tuneId&&Se.dispatch(W(e.tuneId))}),[e.tuneId]);var n=void 0!==(null===(t=e.currentTune)||void 0===t?void 0:t.name),r=function(){return e.history.push(e.referrer)};return Object(de.jsxs)(z.a,{fullScreen:!0,open:!!e.tuneId,onClose:r,TransitionComponent:Le,children:[Object(de.jsx)(j.a,{className:e.classes.appBar,children:Object(de.jsxs)(V.a,{children:[Object(de.jsx)(M.a,{edge:"start",onClick:r,"aria-label":"close",color:"inherit",children:Object(de.jsx)(Y.a,{})}),Object(de.jsx)(G.a,{variant:"h6",className:e.classes.title,children:n&&ne.a.decode(e.currentTune.name)}),Object(de.jsx)(_e,{tuneId:e.currentTune.id,folder:"tunes"})]})}),!n&&Object(de.jsx)(Ie,{}),n&&Object(de.jsx)(H.a,{container:!0,justify:"center",className:e.classes.root,children:Object(de.jsx)(H.a,{item:!0,xs:12,md:8,lg:6,children:e.currentTune.settings.map((function(t,n){return Object(de.jsxs)("div",{children:[Object(de.jsxs)(G.a,{variant:"h5",gutterBottom:!0,children:["Setting #",t.id]}),Object(de.jsxs)(G.a,{variant:"body2",children:["by ",t.member.name," on ",t.date," \u2014"," ",Object(de.jsx)(Q.a,{target:"_blank",rel:"noopener noreferrer",color:"primary",href:t.url,children:"View on The Session.org"})]}),Object(de.jsx)(je,{tune:t,type:e.currentTune.type})]},"".concat(t.id,"-").concat(n))}))})})]})})))),Pe=n(123),Be=n.n(Pe),We=n(514),Ae=n(471),qe=n(515),ze=n(517),Ve=n(7),Me=n(518),Ge=n(516),He=Object(ke.a)({});var Qe=Object(s.e)((function(e){var t=He(),n=e.items,r=e.match,s=r.url,i="tunes"===r.params.folder,c=function(e){return e&&(e.name.length>150?ne.a.decode(e.name).substring(0,150)+"...":ne.a.decode(e.name))};return Object(de.jsx)(We.a,{className:t.root,id:"tunesList",children:n.map((function(e,t){return Object(de.jsxs)("li",{children:[Object(de.jsxs)(Ae.a,{component:a.b,button:!0,to:"".concat(s,"/").concat(e.id),children:[Object(de.jsx)(qe.a,{children:i?Object(de.jsx)(Be.a,{}):Object(de.jsx)(Ge.a,{})}),Object(de.jsx)(ze.a,{primary:c(e),secondary:e.type||e.settings.map((function(e){return Object(Ve.a)(e.type)})).join(", ")})]}),Object(de.jsx)(Me.a,{variant:"inset"})]},"".concat(t,"-item.id"))}))})})),Je=n(529),Ke=n(519),Ye=n(40),Xe=function(e){return Object(Ye.a)({root:{flexGrow:1,zIndex:1,overflowX:"hidden",overflowY:"auto",position:"relative",display:"flex",height:"100vh"},appBar:{position:"fixed",zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},title:{marginLeft:e.spacing(2)},flex:{flex:1,display:"flex",alignItems:"center"},menuButton:{marginLeft:12,marginRight:20},hide:{display:"none"},drawerPaper:{width:300,top:0,right:0,height:"100vh",overflowY:"auto"},drawerHeader:Object(r.a)({display:"flex",alignItems:"center",justifyContent:"center",padding:"0 8px"},e.mixins.toolbar),logo:{position:"relative",transform:"translateY(-2px)"},greetings:{marginRight:e.spacing(),opacity:.5,display:"inline-block"},content:{width:"100%",transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),height:"calc(100% - 56px)",marginTop:56}},e.breakpoints.up("md"),{content:{marginTop:64},drawerPaper:{height:"calc(100vh - 64px)",top:64}})};function $e(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:T,forceClose:e}}var Ze=function(e){Object(Z.a)(n,e);var t=Object(ee.a)(n);function n(){var e;Object(X.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).handleFiltersToggle=function(){e.props.toggleFilters()},e}return Object($.a)(n,[{key:"render",value:function(){var e=this,t=this.props.classes;return Object(de.jsxs)("div",{className:t.drawerPaper,ref:function(t){return e.divRef=t},children:[Object(de.jsx)(Je.a,{mdUp:!0,children:Object(de.jsx)(Ke.a,{variant:"temporary",anchor:"right",open:this.props.open,classes:{paper:t.drawerPaper},onClose:this.handleFiltersToggle,ModalProps:{keepMounted:!0},children:this.props.children})}),Object(de.jsx)(Je.a,{smDown:!0,implementation:"css",children:Object(de.jsx)(Ke.a,{anchor:"right",variant:"persistent",open:!0,classes:{paper:t.drawerPaper},children:this.props.children})})]})}}]),n}(d.Component),et=Object(s.e)(Object(A.b)((function(e){return{open:e.ui.showFilters}}),{toggleFilters:$e})(Object(J.a)(Xe)(Ze))),tt=n(124),nt=n.n(tt),rt=n(525),at=n(520),st=n(521),it=n(530),ct=n(522),ot=n(528),ut=n(226),lt=n.n(ut),dt=Object(ke.a)((function(e){return{root:{margin:e.spacing(2)},formControl:{margin:e.spacing(2,0)}}}));var ht=Object(A.b)((function(e){return{currentFilters:e.ui.tuneFilters}}),{updateTuneFilters:function(e){return{type:S,filters:e}}})((function(e){var t=dt(),n=e.currentFilters,a=(e.folder,lt()((function(t){e.updateTuneFilters(Object(r.a)(Object(r.a)({},n),{},{search:t}))}),200));return Object(de.jsxs)("div",{className:t.root,id:"filtersForm",children:[Object(de.jsx)(rt.a,{id:"filter-search",label:"Search",variant:"outlined",onChange:function(e){return a(e.target.value)},defaultValue:n.search,placeholder:"Search by name",InputLabelProps:{shrink:!0},fullWidth:!0,className:t.formControl}),Object(de.jsxs)(at.a,{component:"fieldset",className:t.formControl,children:[Object(de.jsx)(st.a,{component:"legend",children:"Type"}),Object(de.jsxs)(it.a,{"aria-label":"Tune Type",id:"filter-tuneType",name:"tuneType",defaultValue:"all",onChange:function(t){var a="all"===t.target.value?void 0:t.target.value;e.updateTuneFilters(Object(r.a)(Object(r.a)({},n),{},{tuneType:a}))},children:[Object(de.jsx)(ct.a,{value:"all",control:Object(de.jsx)(ot.a,{color:"primary"}),label:"All"}),Object.keys(re).map((function(e){return Object(de.jsx)(ct.a,{value:e,control:Object(de.jsx)(ot.a,{color:"primary"}),label:nt()(e)},e)}))]})]})]})})),jt={includeScore:!1,threshold:.2,findAllMatches:!0,keys:["name"]};var pt=function(e){return function(t){t({type:O}),t(L({id:e}));var n=[];return function t(n,r){return new Promise((function(a){_.a.get("".concat(F).concat(e,"/sets"),{params:{page:n,format:"json",perpage:50}}).then((function(e){r.push(e);var n=e.data,s=n.page,i=n.pages;s&&s<i?_.a.all([t(s+1,r)]).then((function(){return a()})):a()}))}))}(1,n).then((function(){var e=U()(N()(n,(function(e){return e.data.sets})),["name"]);t(function(e,t){return{type:v,sets:e,meta:t,add:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}}(e,{total:e.length}))}))}},gt=function(e,t){return function(n){return n({type:x}),_.a.get("".concat(F).concat(e,"/sets/").concat(t,"?format=json")).then((function(e){var t;n((t=e.data,{type:y,currentSet:t}))})).catch((function(e){console.log(e)}))}},bt=h.a.forwardRef((function(e,t){return Object(de.jsx)(q.a,Object(r.a)({direction:"up",ref:t},e))}));var ft=Object(s.e)(Object(A.b)((function(e,t){return{currentSet:e.sets.currentSet,isFetching:e.sets.currentSet.isFetching,tuneId:t.match.params.tuneId,userId:e.session.currentUser.id}}))(Object(J.a)((function(e){return{root:{marginTop:100},settings:e.mixins.gutters({paddingTop:e.spacing(),paddingBottom:e.spacing()}),title:{marginLeft:e.spacing(2),flex:1}}}))((function(e){var t,n;Object(d.useEffect)((function(){e.tuneId&&Se.dispatch(gt(e.userId,e.tuneId))}),[e.tuneId,e.userId]);var r=void 0!==(null===(t=e.currentSet)||void 0===t?void 0:t.name),a=function(){return e.history.push(e.referrer)};return Object(de.jsxs)(z.a,{fullScreen:!0,open:!!e.tuneId,onClose:a,TransitionComponent:bt,children:[Object(de.jsx)(j.a,{className:e.classes.appBar,children:Object(de.jsxs)(V.a,{children:[Object(de.jsx)(M.a,{edge:"start",onClick:a,"aria-label":"close",color:"inherit",children:Object(de.jsx)(Y.a,{})}),Object(de.jsx)(Je.a,{xsDown:!0,children:Object(de.jsx)(G.a,{variant:"h6",className:e.classes.title,children:r&&ne.a.decode(e.currentSet.name)})}),Object(de.jsx)(_e,{tuneId:e.currentSet.id,folder:"sets"})]})}),!r&&Object(de.jsx)(Ie,{}),r&&Object(de.jsx)(Ne.a,{p:2,children:Object(de.jsx)(H.a,{container:!0,justify:"center",className:e.classes.root,children:Object(de.jsx)(H.a,(n={item:!0,md:12},Object(Ye.a)(n,"md",10),Object(Ye.a)(n,"lg",9),Object(Ye.a)(n,"children",e.currentSet.settings.map((function(t,n){return Object(de.jsxs)("div",{children:[Object(de.jsx)(G.a,{variant:"h5",gutterBottom:!0,children:Object(te.decode)(t.name)}),Object(de.jsxs)(G.a,{variant:"body2",children:["by ",t.member.name," on ",t.date," \u2014"," ",Object(de.jsx)(Q.a,{target:"_blank",rel:"noopener noreferrer",color:"primary",href:t.url,children:"View on The Session.org"})]}),Object(de.jsx)(je,{tune:t,type:e.currentSet.type})]},"".concat(t.id,"-").concat(n))}))),n))})})]})}))));n(448);var mt=Object(A.b)((function(e,t){return{items:"tunes"===t.folder?e.tunes.tunes:e.sets.sets,isFetching:e.tunes.isFetching,userChanged:e.session.currentUser.id!==t.userId,filters:e.ui.tuneFilters}}),{fetchTuneBook:B,fetchSets:pt})(Object(o.b)(Object(s.e)((function(e){var t=e.match,n=t.url,r=t.params.folder,a=e.items,i=e.isFetching,c=e.filters,o="tunes"===r,u=new p.a(a,jt),l=(c.search?u.search(c.search||"").map((function(e){return e.item})):a).filter((function(e){return!c.tuneType||(e.type?function(e){return e.type===c.tuneType}(e):function(e){return e.settings.map((function(e){return e.type})).includes(c.tuneType)}(e))}));return Object(de.jsxs)("div",{children:[i?Object(de.jsx)(Ie,{}):Object(de.jsx)(Qe,{items:l}),Object(de.jsx)(et,{children:Object(de.jsx)(ht,{folder:r})}),Object(de.jsx)(s.a,{path:"".concat(n,"/:tuneId?"),children:o?Object(de.jsx)(De,{referrer:n}):Object(de.jsx)(ft,{referrer:n})})]})})))),Ot=n(229),vt=n.n(Ot),xt=n(228),yt=n.n(xt),wt=n(227),Tt=n.n(wt),St=Object(ke.a)({list:{width:250},fullList:{width:"auto"}});var kt=Object(A.b)((function(e){var t,n;return{tunesCount:null===(t=e.tunes.meta)||void 0===t?void 0:t.total,setsCount:null===(n=e.sets.meta)||void 0===n?void 0:n.total,currentUser:e.session.currentUser}}))(Object(s.e)((function(e){var t=St(),n=Object(A.c)(),r=[{label:"Sets ".concat(e.setsCount?"("+e.setsCount+")":""),to:"/tunebook/".concat(e.currentUser.id,"/sets"),icon:Object(de.jsx)(Tt.a,{})},{label:"Tunes ".concat(e.tunesCount?"("+e.tunesCount+")":""),to:"/tunebook/".concat(e.currentUser.id,"/tunes"),icon:Object(de.jsx)(Be.a,{})}],a=function(){e.onClose(),n(D()),e.history.push("/")};return Object(de.jsx)(Ke.a,{anchor:"left",open:e.open,onClose:e.onClose,children:Object(de.jsx)("div",{role:"presentation",className:t.list,children:Object(de.jsxs)(We.a,{children:[Object(de.jsxs)(Ae.a,{button:!0,onClick:a,children:[Object(de.jsx)(qe.a,{children:Object(de.jsx)(yt.a,{})}),Object(de.jsx)(ze.a,{primary:"Change user"})]},"Change user"),r.map((function(t){return Object(de.jsxs)(Ae.a,{button:!0,onClick:function(){return function(t){e.onClose(),e.history.push(t.to)}(t)},children:[Object(de.jsx)(qe.a,{children:t.icon}),Object(de.jsx)(ze.a,{primary:t.label})]},t.label)})),Object(de.jsx)(Me.a,{}),Object(de.jsxs)(Ae.a,{button:!0,href:"mailto:accounts+foinn@rorsvort.com",component:"a",children:[Object(de.jsx)(qe.a,{children:Object(de.jsx)(vt.a,{})}),Object(de.jsx)(ze.a,{primary:"Help"})]},"nav-help")]})})})}))),Ct=[{placement:"center",target:"body",title:"Wecome to Foinn!",content:"You can now easily access you tunes and sets from thesession.org in a nicer way and use it to practice or in a session. Due to restrictions of thesession.org, we can only read what you have configured there. Therefore to add or remove tunes in your tunebook or sets, you\u2019ll need to login to thesession.org and make your changes there."},{target:"#tunesList",title:"Tunes list",placement:"auto",content:"Click on a tune to see all the settings and musicsheet"},{target:"#filtersForm",title:"Search & Filters",placement:"left",content:"Click on this button to access the app navigation"},{target:"#navToggle",title:"Navigation",placement:"bottom",content:"Access the app navigation for Sets, tunes, help or change user"}],Ft={options:{primaryColor:"#357a38"},tooltipContainer:{textAlign:"left"},tooltipContent:{padding:"20px 0"}},It=n(527),Nt=n(230),Et=n.n(Nt),Ut=n.p+"static/media/logo-small.03c15606.svg",Rt=n(231),_t=n.n(Rt);var Lt=Object(J.a)(Xe)((function(e){var t=e.classes,n=e.folder,r=e.onToggleFilters,a=e.onDrawerToggle;return Object(de.jsxs)(V.a,{children:[Object(de.jsx)(M.a,{id:"navToggle",color:"inherit","aria-label":"open drawer",onClick:a,className:t.navIconHide,children:Object(de.jsx)(Et.a,{})}),Object(de.jsxs)("div",{className:t.flex,children:[Object(de.jsx)(Je.a,{smDown:!0,children:Object(de.jsx)("img",{src:Ut,alt:"Foinn",className:t.logo})}),Object(de.jsxs)(G.a,{className:t.title,variant:"h6",children:[Object(de.jsx)(Je.a,{smDown:!0,children:" \u2014 "}),nt()(n)]})]}),Object(de.jsx)(Je.a,{mdUp:!0,children:Object(de.jsx)(M.a,{color:"inherit","aria-label":"open drawer",onClick:r,className:t.navIconHide,children:Object(de.jsx)(_t.a,{})})})]})}));var Dt=Object(s.e)(Object(A.b)((function(e){return{showDrawer:e.ui.showDrawer}}),{logout:D,toggleFilters:$e,toggleDrawer:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:w,forceClose:e}}})(Object(o.b)(Object(J.a)(Xe)((function(e){var t=Object(It.a)(),n=Object(u.a)(t,2),r=n[0],a=n[1],s=Object(A.c)(),i=e.classes,c=e.showDrawer,o=e.enqueueSnackbar,h=e.closeSnackbar,p=e.match.params,g=p.folder,b=p.userId;Object(d.useEffect)((function(){r.hadConfigTour||a("hadConfigTour",!0);var e=o("Syncing tunebook!",{variant:"success",persist:!0,action:Object(de.jsx)(Ce.a,{size:20})});Promise.all([s(pt(b)),s(B(b))]).finally((function(){h(e)}))}),[r,a,b,h,o,s]);var f=function(){e.toggleDrawer()};return Object(de.jsxs)("div",{className:i.root,children:[Object(de.jsx)(l.a,{steps:Ct,continuous:!0,showProgress:!0,run:!r.hadConfigTour,disableScrolling:!0,styles:Ft}),Object(de.jsx)(j.a,{className:i.appBar,children:Object(de.jsx)(Lt,{folder:g,onToggleFilters:function(){e.toggleFilters()},onDrawerToggle:f})}),Object(de.jsx)(kt,{onClose:f,open:c}),Object(de.jsx)("div",{className:i.content,children:Object(de.jsx)(mt,{userId:b,folder:g})})]})}))))),Pt=n(159),Bt=n(232),Wt=n.n(Bt),At=n(241),qt=n(523),zt=n(233),Vt=n.n(zt),Mt=n(234),Gt=n.n(Mt),Ht=n(235),Qt=n.n(Ht);function Jt(e){var t=e.classes,n=e.autoFocus,a=e.value,s=e.ref,i=Object(At.a)(e,["classes","autoFocus","value","ref"]);return Object(de.jsx)(rt.a,{className:t.textField,autoFocus:n,value:a,variant:"outlined",inputRef:s,styles:{width:"100%"},InputProps:Object(r.a)({className:t.input},i)})}function Kt(e,t){var n=t.query,r=t.isHighlighted,a=Gt()(e.name,n),s=Qt()(e.name,a);return Object(de.jsx)(qt.a,{selected:r,component:"div",children:Object(de.jsx)("div",{children:s.map((function(e,t){return e.highlight?Object(de.jsx)("span",{style:{fontWeight:300},children:e.text},t):Object(de.jsx)("strong",{style:{fontWeight:500},children:e.text},t)}))})})}function Yt(e){var t=e.containerProps,n=e.children;return Object(de.jsx)(Pt.a,Object(r.a)(Object(r.a)({},t),{},{square:!0,children:n}))}function Xt(e){return e.name}var $t=function(e){Object(Z.a)(n,e);var t=Object(ee.a)(n);function n(){var e;Object(X.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={value:e.props.userName||"",selectedSuggestion:{},suggestions:[]},e.handleSuggestionsFetchRequested=function(t){var n=t.value;if(n.length<4)return!1;P(n).then((function(t){if(void 0===t)return[];e.setState({suggestions:t.data.members})}))},e.handleSuggestionsClearRequested=function(){e.setState({suggestions:[]})},e.handleChange=function(t,n){var r=n.newValue;e.setState({value:r})},e}return Object($.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.history;return Object(de.jsx)(Vt.a,{theme:{container:t.suggestionsContainer,suggestionsContainerOpen:t.suggestionsContainerOpen,suggestionsList:t.suggestionsList,suggestion:t.suggestion},renderInputComponent:Jt,suggestions:this.state.suggestions,onSuggestionsFetchRequested:this.handleSuggestionsFetchRequested,onSuggestionsClearRequested:this.handleSuggestionsClearRequested,onSuggestionSelected:function(e,t){return function(e,t){var n=e.suggestion;Se.dispatch(L(n)),t.push("/tunebook/".concat(n.id,"/tunes"))}(t,n)},renderSuggestionsContainer:Yt,getSuggestionValue:Xt,renderSuggestion:Kt,inputProps:{autoFocus:!0,classes:t,placeholder:"Search by typing your user name",value:this.state.value,onChange:this.handleChange}})}}]),n}(d.Component),Zt=Object(J.a)((function(e){return{suggestionsContainer:{position:"relative",zIndex:999},suggestionsContainerOpen:{position:"absolute",marginBottom:e.spacing(3),left:0,right:0},suggestion:{display:"block"},suggestionsList:{margin:0,padding:0,listStyleType:"none"},textField:{width:"100%"}}}))(Object(s.e)($t)),en=n(236),tn=n.n(en),nn=n.p+"static/media/logo.bdf350d0.svg";var rn=Object(A.b)((function(e){return{currentUser:e.session.currentUser,userName:tn()(e.session.currentUser)?"":e.session.currentUser.name}}))(Object(J.a)((function(e){return{container:{height:"100vh"},paper:{margin:"0 auto",padding:"20px"},button:{color:"white",marginTop:e.spacing(2)},home:{background:e.palette.primary[500]},logo:{maxWidth:"100%",margin:"0 auto 40px",display:"block"},title:{fontSize:21,fontWeight:"normal",textAlign:"center",lineHeight:1.5,color:"white",opacity:.8},login:{alignSelf:"flex-start"}}}))((function(e){var t=e.classes,n=e.userName,r=e.currentUser;return Object(de.jsx)(Wt.a,{className:t.home,children:Object(de.jsxs)(H.a,{container:!0,alignItems:"center",justify:"center",direction:"row",className:t.container,children:[Object(de.jsxs)(H.a,{item:!0,xs:12,md:12,children:[Object(de.jsx)("img",{src:nn,alt:"Foinn app",className:t.logo}),Object(de.jsxs)("h1",{className:t.title,children:["Browse your tunes and sets from Thessession.org ",Object(de.jsx)("br",{}),Object(de.jsx)("small",{children:"The ideal session companion"})]})]}),Object(de.jsx)(H.a,{item:!0,xs:12,md:4,className:t.login,children:Object(de.jsx)(Ne.a,{p:2,children:Object(de.jsxs)(Pt.a,{className:t.paper,elevation:8,children:[Object(de.jsxs)(G.a,{variant:"subtitle1",gutterBottom:!0,children:["Find your"," ",Object(de.jsx)(Q.a,{href:"https://thesession.org",color:"primary",target:"_blank",rel:"noopener noreferrer",children:"TheSession.org"})," ","profile:"]}),Object(de.jsx)(Zt,{userName:n}),n&&Object(de.jsx)(Ee.a,{to:"/tunebook/".concat(r.id,"/tunes"),className:t.button,component:a.b,variant:"contained",color:"primary",children:"Open tunebook"})]})})})]})})}))),an=n(9),sn=n.n(an),cn=n(157),on=n.n(cn),un=n(237),ln=n.n(un),dn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function hn(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var jn=Object(i.a)({palette:{primary:Object(r.a)({main:"#357a38"},on.a),secondary:on.a,error:ln.a},typography:{h1:{fontFamily:"'Kaushan Script', 'cursive'",fontSize:"2.8125rem"}}}),pn=Object(de.jsx)(c.a,{theme:jn,children:Object(de.jsx)(A.a,{store:Se,children:Object(de.jsx)(o.a,{children:Object(de.jsx)(a.a,{children:Object(de.jsxs)("div",{children:[Object(de.jsx)(s.a,{exact:!0,path:"/",children:Object(de.jsx)(rn,{})}),Object(de.jsx)(s.a,{path:"/tunebook/:userId/:folder",children:Object(de.jsx)(Dt,{})})]})})})})});sn.a.render(pn,document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");dn?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):hn(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):hn(e)}))}}()}},[[468,1,2]]]);
//# sourceMappingURL=main.967d9c24.chunk.js.map