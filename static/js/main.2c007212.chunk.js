(this.webpackJsonptrad_tune_book=this.webpackJsonptrad_tune_book||[]).push([[0],{288:function(e,t,n){e.exports=n.p+"static/media/logo-small.0ff303d1.svg"},295:function(e,t,n){e.exports=n.p+"static/media/logo.6f584227.svg"},361:function(e,t,n){e.exports=n(649)},362:function(e,t,n){},363:function(e,t,n){},649:function(e,t,n){"use strict";n.r(t);var a=n(33),r=(n(362),n(26)),s=n(59),o=n(25),i=n(27),c=n(28),l=n(31),u=n(29),p=n(32),m=(n(363),n(3)),h=n(290),d=n.n(h),g=n(0),f=n.n(g),E=n(121),v=n.n(E),b=n(47),y=n(128),O=n(282),w=n.n(O),j=n(79),k=n.n(j),S=n(9),T=n.n(S),x=n(30),I="https://thesession.org/tunes/",C="https://thesession.org/members/",R=n(58),U=n.n(R);function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"RECEIVE_SETS",sets:e,meta:t,add:n}}var _=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(a){return a({type:"REQUEST_SETS"}),U.a.get("".concat(C).concat(e,"/sets?format=json&page=").concat(t,"&perpage=50")).then((function(e){var t=e.data,r=t.page,s=t.pages,o=t.total,i=t.sets,c=t.perpage;a(N(i,{page:r,pages:s,perpage:c,total:o},n))})).catch((function(e){console.log(e)}))}},F=function(e,t){return function(n){return n({type:"REQUEST_SET"}),U.a.get("".concat(C).concat(e,"/sets/").concat(t,"?format=json")).then((function(e){n({type:"RECEIVE_SET",currentSet:e.data})})).catch((function(e){console.log(e)}))}};function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"RECEIVE_TUNEBOOK",tunes:e,meta:t,add:n}}var D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(a){return a({type:"REQUEST_TUNEBOOK"}),U.a.get("".concat(C).concat(e,"/tunebook?format=json&page=").concat(t,"&perpage=50")).then((function(e){var t=e.data,r=t.page,s=t.pages,o=t.perpage,i=t.total,c=t.tunes;a(L(c,{page:r,pages:s,perpage:o,total:i},n))})).catch((function(e){alert("something went wrong, try again late")}))}},B=function(e){return function(t){return t({type:"REQUEST_TUNE"}),U.a.get("".concat(I).concat(e,"?format=json")).then((function(e){t({type:"RECEIVE_TUNE",currentTune:e.data})})).catch((function(e){console.log(e)}))}},A=n(48),W=n.n(A),P=n(68),q=n(279),z=n.n(q),M=n(80);var V={ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showDrawer:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_DRAWER":return Object.assign({},e,{showDrawer:!t.forceClose&&!e.showDrawer});default:return e}},session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentUser:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_CURRENT_USER":return Object(a.a)({},e,{currentUser:t.currentUser});case"LOGOUT":return Object(a.a)({},e,{currentUser:{}});default:return e}},tunes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,tunes:[],meta:{},currentTune:{isFetching:!1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_TUNEBOOK":return Object.assign({},e,{isFetching:!0});case"RECEIVE_TUNEBOOK":var n=t.add?[].concat(Object(M.a)(e.tunes),Object(M.a)(t.tunes)):t.tunes;return Object.assign({},e,{isFetching:!1,tunes:n,meta:t.meta});case"REQUEST_TUNE":return Object.assign({},e,{currentTune:{isFetching:!0}});case"RECEIVE_TUNE":var r=t.currentTune;return Object.assign({},e,{currentTune:Object(a.a)({},r,{isFetching:!1})});default:return e}},sets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,sets:[],meta:{},currentSet:{isFetching:!1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_SETS":return Object.assign({},e,{isFetching:!0});case"RECEIVE_SETS":var n=t.add?[].concat(Object(M.a)(e.sets),Object(M.a)(t.sets)):t.sets;return Object.assign({},e,{isFetching:!1,sets:n,meta:t.meta});case"REQUEST_SET":return Object.assign({},e,{currentSet:{isFetching:!0}});case"RECEIVE_SET":var r=t.currentSet;return Object.assign({},e,{currentSet:Object(a.a)({},r,{isFetching:!1})});default:return e}}},H=n(280),Q=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),G=[H.a];z.a.init("hh8o22/foinn");var K=P.d,J=Object(P.e)(Object(P.c)(V),Q,K(P.a.apply(void 0,G)));J.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){return}}({session:J.getState().session,tunes:J.getState().tunes,sets:J.getState().sets})}));var Y=J;function X(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:"TOGGLE_DRAWER",forceClose:e}}var $=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).handleClick=function(){return function(e){Y.dispatch(X(!0))}},n._isRowLoaded=function(e){var t=e.index;return!!n.props.items[t]},n._loadMoreRows=function(){var e="sets"===n.props.type,t=n.props.meta.page+1;if(t>n.props.meta.pages)return!1;e?Y.dispatch(_(n.props.userId,t,!0)):Y.dispatch(D(n.props.userId,t,!0))},n._rowRenderer=function(e){var t=e.index,a=(e.key,e.style),s=n.props.items[t],o=s&&(s.name.length>40?W.a.decode(s.name).substring(0,40)+"...":W.a.decode(s.name));return s?f.a.createElement(m.i,{style:a,key:t,component:r.b,className:T()(Object(b.a)({},"".concat(n.props.classes.activeListItem),n.isActive(s.id))),button:!0,to:n.props.match.params.tuneId?"".concat(s.id):"".concat(n.props.match.url,"/").concat(s.id)},f.a.createElement(m.j,null,f.a.createElement(w.a,null)),f.a.createElement(m.k,{primary:o,secondary:s.type})):f.a.createElement("div",{style:a,key:t},"Loading")},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.list&&this.list.forceUpdateGrid(),e.type!==this.props.type&&(document.getElementById("drawer").scrollTop=0)}},{key:"isActive",value:function(e){return e===parseInt(this.props.match.params.tuneId,10)}},{key:"render",value:function(){var e=this,t=this.props,n=t.meta,a=t.height;t.isSets;return k()(n)?null:f.a.createElement(y.b,{isRowLoaded:this._isRowLoaded,loadMoreRows:this._loadMoreRows,rowCount:n.total},(function(t){var r=t.onRowsRendered;t.registerChild;return f.a.createElement(y.a,{disableHeight:!0},(function(t){var s=t.width;return f.a.createElement(y.c,{ref:function(t){return e.list=t},height:a||0,onRowsRendered:r,rowCount:n.total,rowHeight:80,rowRenderer:e._rowRenderer,threshold:300,width:s,id:"drawer"})}))}))}}]),t}(g.Component),Z=Object(s.g)(Object(x.b)((function(e,t){var n="sets"===t.type;return{items:n?e.sets.sets:e.tunes.tunes,meta:n?e.sets.meta:e.tunes.meta,router:e.router,userId:e.session.currentUser.id,isSets:"sets"===t.type,currentUser:e.session.currentUser}}))(Object(o.withStyles)((function(){return{activeListItem:{background:"#ddd"}}}))($))),ee=function(e){return Object(b.a)({root:{flexGrow:1,zIndex:1,overflowX:"hidden",overflowY:"auto",position:"relative",display:"flex",height:"100vh"},appBar:{position:"fixed",zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},flex:{flex:1,display:"flex",alignItems:"center"},menuButton:{marginLeft:12,marginRight:20},hide:{display:"none"},drawerPaper:{zIndex:e.zIndex.drawer-1,width:300,top:0,left:0,height:"100vh",position:"fixed",overflowY:"auto"},drawerHeader:Object(a.a)({display:"flex",alignItems:"center",justifyContent:"center",padding:"0 8px"},e.mixins.toolbar),logo:{position:"relative",transform:"translateY(-2px)"},greetings:{marginRight:e.spacing.unit,opacity:.5,display:"inline-block"},content:{width:"100%",padding:3*e.spacing.unit,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),height:"calc(100% - 56px)",marginTop:56}},e.breakpoints.up("md"),{content:{marginTop:64,marginLeft:300},drawerPaper:{height:"calc(100vh - 64px)",top:64}})},te=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={elementHeight:0},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){Y.dispatch(D(this.props.userId)),Y.dispatch(_(this.props.userId)),this.setState({elementHeight:this.divRef.clientHeight})}},{key:"handleDrawerToggle",value:function(){Y.dispatch(X())}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.folder,r=t.match.url,o="tunes"===a?f.a.createElement(Z,{type:"tunes",height:this.state.elementHeight}):f.a.createElement(Z,{type:"sets",height:this.state.elementHeight}),i=f.a.createElement("div",null,f.a.createElement(s.d,null,f.a.createElement(s.b,{path:"".concat(r,"/:tuneId")},o),f.a.createElement(s.b,{path:"".concat(r)},o)));return f.a.createElement("div",{className:n.drawerPaper,ref:function(t){return e.divRef=t}},f.a.createElement(m.h,{mdUp:!0},f.a.createElement(m.f,{variant:"temporary",anchor:"left",open:this.props.showDrawer,classes:{paper:n.drawerPaper},onClose:this.handleDrawerToggle,ModalProps:{keepMounted:!0}},i)),f.a.createElement(m.h,{smDown:!0,implementation:"css"},f.a.createElement(m.f,{variant:"persistent",open:!0,classes:{paper:n.drawerPaper}},i)))}}]),t}(g.Component),ne=Object(s.g)(Object(x.b)((function(e,t){return{userId:e.session.currentUser.id}}))(Object(o.withStyles)(ee)(te))),ae=n(98),re=n.n(ae),se=n(289),oe=n.n(se),ie=n(283),ce=n.n(ie),le=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={anchorEl:null,open:!1,selectedIndex:1},n.handleClickListItem=function(e){n.setState({open:!0,anchorEl:e.currentTarget})},n.handleRequestClose=function(){n.setState({open:!1})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"menuOptions",value:function(){return[{label:"Sets (".concat(this.props.setsCount,")"),shortLabel:"Sets",to:"/tunebook/".concat(this.props.currentUser.id,"/sets"),index:0},{label:"Tunes (".concat(this.props.tunesCount,")"),shortLabel:"Tunes",to:"/tunebook/".concat(this.props.currentUser.id,"/tunes"),index:1}]}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.location,s=this.menuOptions().find((function(e){return e.label.toLowerCase().includes(function(e){return e.pathname&&e.pathname.split("/")[3].toLowerCase()}(a))}));return f.a.createElement("div",{className:n.root},f.a.createElement(m.a,{"aria-owns":this.state.anchorEl?"simple-menu":null,"aria-haspopup":"true",onClick:this.handleClickListItem,color:"secondary"},s.shortLabel,f.a.createElement(ce.a,{className:n.righIcon})),f.a.createElement(m.l,{id:"simple-menu",anchorEl:this.state.anchorEl,open:this.state.open,onClose:this.handleRequestClose,PaperProps:{style:{width:265}}},this.menuOptions().map((function(t,n){return f.a.createElement(m.m,{key:t.label,component:r.b,selected:n===s.index,to:t.to,onClick:function(){return e.handleRequestClose()}},t.label)}))))}}]),t}(g.Component),ue=Object(s.g)(Object(x.b)((function(e){return{tunesCount:e.tunes.meta&&e.tunes.meta.total,setsCount:e.sets.meta&&e.sets.meta.total,currentUser:e.session.currentUser}}))(Object(o.withStyles)((function(e){return{root:Object(a.a)({},e.mixins.toolbar,{display:"flex",alignItems:"center",marginLeft:"20px"}),righIcon:{marginLeft:16}}}))(le)));var pe=Object(o.withStyles)((function(){return{root:{display:"flex",alignItems:"center",height:"100%",justifyContent:"center"}}}))((function(e){return f.a.createElement("div",{className:e.classes.root},"Please select a item from the list")})),me=n(287),he=n.n(me),de=n(286),ge=n.n(de),fe={jig:{key:"3/4",tempo:"140"},reel:{key:"4/4",tempo:"180"},"slip jig":{key:"9/8",tempo:"260"},hornpipe:{key:"4/4",tempo:"180"},polka:{key:"2/4",tempo:"100"},slide:{key:"12/8",tempo:"250"},waltz:{key:"3/4",tempo:"160"},barndance:{key:"4/4",tempo:"140"},strathspey:{key:"4/4",tempo:"140"},"three-two":{key:"3/2",tempo:"140"},mazurka:{key:"3/4",tempo:"140"}},Ee=n(284),ve=n.n(Ee),be=n(285),ye=n.n(be),Oe=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"renderAbc",value:function(e){ve.a.renderAbc(this.el,function(e,t,n){if(void 0===e.abc)return"";var a=t||e.type,r=e.abc.split("! ").join("\n"),s="T: ".concat(n),o="M: ".concat(fe[a].key),i="K: ".concat(e.key);return[s,o,"Q: ".concat(fe[a].tempo),"L: 1/8",i,r].join("\n")}(this.props.tune,this.props.type,this.title()),{},{paddingright:0,paddingleft:0,responsive:"resize"},{})}},{key:"title",value:function(){return this.props.tune.name?"".concat(W.a.decode(this.props.tune.name)," (").concat(this.props.tune.key," - ").concat(this.props.tune.type,")"):"".concat(this.props.tune.key," - ").concat(this.props.type)}},{key:"componentWillReceiveProps",value:function(e){var t=e.containerWidth;this.props.containerWidth!==t&&(this.renderAbc(this.props.containerWidth),this.renderMidi(this.props.containerWidth))}},{key:"componentDidMount",value:function(){this.renderAbc(this.props.containerWidth)}},{key:"render",value:function(){var e=this;return f.a.createElement("div",{className:this.props.classes.root},f.a.createElement("div",{ref:function(t){return e.el=t}}))}}]),t}(g.Component),we=Object(o.withStyles)((function(e){return{root:Object(b.a)({margin:"20px auto",maxWidth:"640px",borderBottom:"1px solid #ccc","&:last-child":{border:"none",marginBottom:0,paddingBottom:0}},e.breakpoints.up("md"),{padding:"20px"})}}))(ye()()(Oe)),je=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){Y.dispatch(F(this.props.userId,this.props.setId))}},{key:"componentWillReceiveProps",value:function(e){var t=e.setId;this.props.setId!==t&&Y.dispatch(F(this.props.userId,t))}},{key:"render",value:function(){var e,t="https://thesession.org/members/".concat(this.props.userId,"/sets/").concat(this.props.setId,"/sheetmusic?print=true"),n=this.props.classes;return this.props.isFetching?f.a.createElement(m.g,{container:!0,spacing:24},f.a.createElement(m.g,{item:!0,xs:12,md:8},f.a.createElement(m.e,null))):(e=this.props.currentSet,e||{}).name?f.a.createElement("div",null,f.a.createElement(m.g,{container:!0,spacing:24},f.a.createElement(m.g,{item:!0,xs:12,md:8},f.a.createElement(m.q,{className:this.props.classes.mainTitle,variant:"h1"},W.a.decode(this.props.currentSet.name)),f.a.createElement(m.h,{smDown:!0},f.a.createElement("p",{className:n.printButton},f.a.createElement(m.a,{href:t,target:"_blank",mini:!0},f.a.createElement(ge.a,{className:n.iconBtn}),"Print"),f.a.createElement(m.p,{title:"If your viewing another users set, you can copy it to your tuebook. Click to go the session.org where you can add it to yours."},f.a.createElement(m.a,{href:this.props.currentSet.url,target:"_blank",mini:!0},f.a.createElement(he.a,{className:n.iconBtn}),"Copy")))))),f.a.createElement("div",{className:n.settings},this.props.currentSet.settings.map((function(e){return f.a.createElement(m.g,{container:!0,spacing:24,key:e.id},f.a.createElement(m.g,{item:!0,xs:12,md:8},f.a.createElement(we,{tune:e})),f.a.createElement(m.h,{smDown:!0},f.a.createElement(m.g,{item:!0,xs:12,md:4},f.a.createElement(m.b,{className:n.card,key:e.id},f.a.createElement(m.d,null,f.a.createElement(m.q,{variant:"subtitle1",gutterBottom:!0},"Setting ",W.a.decode(e.name)," (",e.key,")"),f.a.createElement(m.q,{variant:"caption"},"by ",e.member.name," on ",e.date)),f.a.createElement(m.c,null,f.a.createElement(m.a,{component:"a",target:"_blank",href:"".concat(I).concat(e.id)},"View on The Session.org"))))))})))):null}}]),t}(g.Component),ke=Object(s.g)(Object(x.b)((function(e,t){return{setId:t.match.params.setId,currentSet:e.sets.currentSet,userId:e.session.currentUser.id,isFetching:e.sets.currentSet.isFetching}}))(Object(o.withStyles)((function(e){return{card:{margin:"".concat(10*e.spacing.unit,"px 0")},title:{marginBottom:16,fontSize:14,color:e.palette.text.secondary},settings:{},iconBtn:{marginRight:"10px"},mainTitle:Object(b.a)({textAlign:"center",marginTop:2*e.spacing.unit,fontWeight:100,opacity:.7},e.breakpoints.down("sm"),{fontSize:"21px"}),printButton:{textAlign:"center"}}}))(je)));var Se=Object(s.g)((function(e){var t=e.match.url;return f.a.createElement("div",null,f.a.createElement(s.d,null,f.a.createElement(s.b,{path:"".concat(t,"/:setId")},f.a.createElement(ke,null)),f.a.createElement(s.b,{path:"".concat(t)},f.a.createElement(pe,null))))})),Te=n(122),xe=n.n(Te),Ie=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){Y.dispatch(B(this.props.tuneId))}},{key:"componentWillReceiveProps",value:function(e){var t=e.tuneId;this.props.tuneId!==t&&Y.dispatch(B(t))}},{key:"render",value:function(){var e=this,t=this.props.classes;return this.props.isFetching?f.a.createElement(m.g,{container:!0,spacing:24},f.a.createElement(m.g,{item:!0,xs:12,md:8},f.a.createElement(m.e,null))):void 0===this.props.currentTune||void 0===this.props.currentTune.name?null:f.a.createElement("div",null,f.a.createElement(m.g,{container:!0,spacing:24},f.a.createElement(m.g,{item:!0,xs:12,md:8},f.a.createElement(m.q,{className:this.props.classes.title,variant:"h1"},W.a.decode(this.props.currentTune.name)))),this.props.currentTune.settings.map((function(n){return f.a.createElement(m.g,{container:!0,spacing:24,key:n.id},f.a.createElement(m.g,{item:!0,xs:12,md:8},f.a.createElement(we,{tune:n,type:e.props.currentTune.type})),f.a.createElement(m.h,{smDown:!0},f.a.createElement(m.g,{item:!0,md:4},f.a.createElement(m.b,{className:t.card,key:n.id},f.a.createElement(m.d,null,f.a.createElement(m.q,{variant:"subtitle1",gutterBottom:!0},"Setting #",n.id," (",n.key,")"),f.a.createElement(m.q,{variant:"caption"},"by ",n.member.name," on ",n.date)),f.a.createElement(m.c,null,f.a.createElement(m.a,{component:"a",target:"_blank",href:"".concat(I).concat(e.props.currentTune.id,"#setting").concat(n.id)},"View on The Session.org"))))))})))}}]),t}(g.Component),Ce=Object(s.g)(Object(x.b)((function(e,t){return{currentTune:e.tunes.currentTune,isFetching:e.tunes.currentTune.isFetching,tuneId:t.match.params.tuneId}}))(Object(o.withStyles)((function(e){return{card:{margin:"".concat(10*e.spacing.unit,"px 0")},settings:e.mixins.gutters({paddingTop:e.spacing.unit,paddingBottom:e.spacing.unit}),flex:{flex:1},title:{textAlign:"center",marginTop:2*e.spacing.unit,fontWeight:100,opacity:.7}}}))(Ie)));var Re=Object(s.g)((function(e){var t=e.match.url;return f.a.createElement("div",null,f.a.createElement(s.d,null,f.a.createElement(s.b,{path:"".concat(t,"/:tuneId")},f.a.createElement(Ce,null)),f.a.createElement(s.b,{path:"".concat(t)},f.a.createElement(pe,null))))}));var Ue=function(e){return U.a.get("".concat(C,"search?q=").concat(e,"&format=json")).catch((function(e){console.log(e)}))},Ne=n(288),_e=n.n(Ne),Fe=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleDrawerToggle",value:function(){Y.dispatch(X())}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.isLoggedOut,r=t.match.params.folder;return a?f.a.createElement(s.a,{to:"/"}):f.a.createElement("div",{className:n.root},f.a.createElement(v.a,{className:n.appBar},f.a.createElement(xe.a,null,f.a.createElement(m.h,{mdUp:!0},f.a.createElement(re.a,{color:"secondary","aria-label":"open drawer",onClick:this.handleDrawerToggle,className:n.navIconHide},f.a.createElement(oe.a,null))),f.a.createElement("div",{className:n.flex},f.a.createElement(m.h,{smDown:!0},f.a.createElement("img",{src:_e.a,alt:"Foinn",className:n.logo})),f.a.createElement(ue,null)),f.a.createElement(m.h,{smDown:!0},f.a.createElement("span",{className:n.greetings},"Hi! ",this.props.currentUser.name)),f.a.createElement(m.a,{onClick:function(){return e.props.logout()},color:"secondary"},"Change user"),f.a.createElement(re.a,{size:"small",component:"a",color:"secondary",href:"mailto:accounts+foinn@rorsvort.com"},f.a.createElement(d.a,null)))),f.a.createElement("div",{className:n.content},"tunes"===r?f.a.createElement(Re,null):f.a.createElement(Se,null)),f.a.createElement(ne,{showDrawer:this.props.showDrawer,folder:r}))}}]),t}(g.Component),Le=Object(s.g)(Object(x.b)((function(e){return{showDrawer:e.ui.showDrawer,isLoggedOut:k()(e.session.currentUser),currentUser:e.session.currentUser}}),{logout:function(){return{type:"LOGOUT"}}})(Object(o.withStyles)(ee)(Fe))),De=n(291),Be=n.n(De),Ae=n(297),We=n(292),Pe=n.n(We),qe=n(293),ze=n.n(qe),Me=n(294),Ve=n.n(Me);function He(e){var t=e.classes,n=e.autoFocus,r=e.value,s=e.ref,o=Object(Ae.a)(e,["classes","autoFocus","value","ref"]);return f.a.createElement(m.o,{className:t.textField,autoFocus:n,value:r,inputRef:s,styles:{width:"100%"},InputProps:Object(a.a)({className:t.input},o)})}function Qe(e,t){var n=t.query,a=t.isHighlighted,r=ze()(e.name,n),s=Ve()(e.name,r);return f.a.createElement(m.m,{selected:a,component:"div"},f.a.createElement("div",null,s.map((function(e,t){return e.highlight?f.a.createElement("span",{key:t,style:{fontWeight:300}},e.text):f.a.createElement("strong",{key:t,style:{fontWeight:500}},e.text)}))))}function Ge(e){var t=e.containerProps,n=e.children;return f.a.createElement(m.n,Object.assign({},t,{square:!0}),n)}function Ke(e){return Y.dispatch({type:"UPDATE_CURRENT_USER",currentUser:e}),e.name}var Je=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={value:n.props.userName,selectedSuggestion:{},suggestions:[]},n.handleSuggestionsFetchRequested=function(e){var t=e.value;if(t.length<4)return!1;Ue(t).then((function(e){if(void 0===e)return[];n.setState({suggestions:e.data.members})}))},n.handleSuggestionsClearRequested=function(){n.setState({suggestions:[]})},n.handleChange=function(e,t){var a=t.newValue;n.setState({value:a})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return f.a.createElement(Pe.a,{theme:{container:e.suggestionsContainer,suggestionsContainerOpen:e.suggestionsContainerOpen,suggestionsList:e.suggestionsList,suggestion:e.suggestion},renderInputComponent:He,suggestions:this.state.suggestions,onSuggestionsFetchRequested:this.handleSuggestionsFetchRequested,onSuggestionsClearRequested:this.handleSuggestionsClearRequested,renderSuggestionsContainer:Ge,getSuggestionValue:Ke,renderSuggestion:Qe,inputProps:{autoFocus:!1,classes:e,placeholder:"Search by typing your user name",value:this.state.value,onChange:this.handleChange}})}}]),t}(g.Component),Ye=Object(o.withStyles)((function(e){return{suggestionsContainer:{position:"relative",zIndex:999},suggestionsContainerOpen:{position:"absolute",marginBottom:3*e.spacing.unit,left:0,right:0},suggestion:{display:"block"},suggestionsList:{margin:0,padding:0,listStyleType:"none"},textField:{width:"100%"}}}))(Je),Xe=n(295),$e=n.n(Xe);var Ze=Object(x.b)((function(e){return{currentUser:e.session.currentUser,userName:k()(e.session.currentUser)?"":e.session.currentUser.name}}))(Object(o.withStyles)((function(e){return{container:{height:"100vh"},paper:{margin:"0 auto",padding:"20px"},button:{color:"white",marginTop:2*e.spacing.unit},home:{background:e.palette.primary[500]},logo:{maxWidth:"100%",margin:"0 auto 40px",display:"block"},title:{fontSize:21,fontWeight:"normal",textAlign:"center",lineHeight:1.5,color:"white",opacity:.8},login:{alignSelf:"flex-start"}}}))((function(e){var t=e.classes,n=e.userName,a=e.currentUser;return f.a.createElement(Be.a,{className:t.home},f.a.createElement(m.g,{container:!0,spacing:24,alignItems:"center",justify:"center",direction:"row",className:t.container},f.a.createElement(m.g,{item:!0,xs:12,md:12},f.a.createElement("img",{src:$e.a,alt:"Foinn app",className:t.logo}),f.a.createElement("h1",{className:t.title},"Browse your tunes and sets from Thessession.org ",f.a.createElement("br",null),f.a.createElement("small",null,"The ideal session companion"))),f.a.createElement(m.g,{item:!0,xs:12,md:4,className:t.login},f.a.createElement(m.n,{className:t.paper,elevation:8},f.a.createElement(m.q,{variant:"subtitle1",gutterBottom:!0},"To start, select your"," ",f.a.createElement("a",{href:"https://thesession.org",target:"_blank",rel:"noopener noreferrer"},"TheSession.org")," ","user name."),f.a.createElement(Ye,{userName:n}),n&&f.a.createElement(m.a,{to:"/tunebook/".concat(a.id,"/tunes"),className:t.button,component:r.b,variant:"raised",color:"primary"},"Open tunebook")))))}))),et=n(24),tt=n.n(et),nt=n(296),at=n.n(nt),rt=n(189),st=n.n(rt),ot=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function it(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ct=Object(o.createMuiTheme)({palette:{primary:at.a,secondary:Object(a.a)({},{50:"#fff",100:"#fff",200:"#fff",300:"#fff",400:"#fff",500:"#fff",600:"#fff",700:"#fff",800:"#fff",900:"#fff",A100:"#fff",A200:"#fff",A400:"#fff",A700:"#fff",contrastDefaultColor:"brown"}),error:st.a},typography:{useNextVariants:!0,h1:{fontFamily:"'Kaushan Script', 'cursive'",fontSize:"2.8125rem"}}}),lt=f.a.createElement(o.MuiThemeProvider,{theme:ct},f.a.createElement(x.a,{store:Y},f.a.createElement(r.a,null,f.a.createElement("div",null,f.a.createElement(s.b,{exact:!0,path:"/"},f.a.createElement(Ze,null)),f.a.createElement(s.b,{path:"/tunebook/:userId/:folder"},f.a.createElement(Le,null))))));tt.a.render(lt,document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");ot?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):it(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):it(e)}))}}()}},[[361,1,2]]]);
//# sourceMappingURL=main.2c007212.chunk.js.map